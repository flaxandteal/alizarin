{"version":3,"file":"alizarin.js","sources":["../../../node_modules/uuid/dist/esm-browser/regex.js","../../../node_modules/uuid/dist/esm-browser/validate.js","../../../node_modules/uuid/dist/esm-browser/parse.js","../../../node_modules/uuid/dist/esm-browser/stringify.js","../../../node_modules/uuid/dist/esm-browser/rng.js","../../../node_modules/uuid/dist/esm-browser/v35.js","../../../node_modules/uuid/dist/esm-browser/native.js","../../../node_modules/uuid/dist/esm-browser/v4.js","../../../node_modules/uuid/dist/esm-browser/sha1.js","../../../node_modules/uuid/dist/esm-browser/v5.js","../js/utils.ts","../js/static-types.ts","../js/client.ts","../js/rdm.ts","../js/staticStore.ts","../js/cards.ts","../js/nodeConfig.ts","../js/viewModels.ts","../js/pseudos.ts","../js/graphManager.ts","../js/renderers.ts","../js/main.ts"],"sourcesContent":["export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;\n","import REGEX from './regex.js';\nfunction validate(uuid) {\n    return typeof uuid === 'string' && REGEX.test(uuid);\n}\nexport default validate;\n","import validate from './validate.js';\nfunction parse(uuid) {\n    if (!validate(uuid)) {\n        throw TypeError('Invalid UUID');\n    }\n    let v;\n    return Uint8Array.of((v = parseInt(uuid.slice(0, 8), 16)) >>> 24, (v >>> 16) & 0xff, (v >>> 8) & 0xff, v & 0xff, (v = parseInt(uuid.slice(9, 13), 16)) >>> 8, v & 0xff, (v = parseInt(uuid.slice(14, 18), 16)) >>> 8, v & 0xff, (v = parseInt(uuid.slice(19, 23), 16)) >>> 8, v & 0xff, ((v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000) & 0xff, (v / 0x100000000) & 0xff, (v >>> 24) & 0xff, (v >>> 16) & 0xff, (v >>> 8) & 0xff, v & 0xff);\n}\nexport default parse;\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","import parse from './parse.js';\nimport { unsafeStringify } from './stringify.js';\nexport function stringToBytes(str) {\n    str = unescape(encodeURIComponent(str));\n    const bytes = new Uint8Array(str.length);\n    for (let i = 0; i < str.length; ++i) {\n        bytes[i] = str.charCodeAt(i);\n    }\n    return bytes;\n}\nexport const DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport const URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function v35(version, hash, value, namespace, buf, offset) {\n    const valueBytes = typeof value === 'string' ? stringToBytes(value) : value;\n    const namespaceBytes = typeof namespace === 'string' ? parse(namespace) : namespace;\n    if (typeof namespace === 'string') {\n        namespace = parse(namespace);\n    }\n    if (namespace?.length !== 16) {\n        throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    }\n    let bytes = new Uint8Array(16 + valueBytes.length);\n    bytes.set(namespaceBytes);\n    bytes.set(valueBytes, namespaceBytes.length);\n    bytes = hash(bytes);\n    bytes[6] = (bytes[6] & 0x0f) | version;\n    bytes[8] = (bytes[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = bytes[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(bytes);\n}\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","function f(s, x, y, z) {\n    switch (s) {\n        case 0:\n            return (x & y) ^ (~x & z);\n        case 1:\n            return x ^ y ^ z;\n        case 2:\n            return (x & y) ^ (x & z) ^ (y & z);\n        case 3:\n            return x ^ y ^ z;\n    }\n}\nfunction ROTL(x, n) {\n    return (x << n) | (x >>> (32 - n));\n}\nfunction sha1(bytes) {\n    const K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n    const H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n    const newBytes = new Uint8Array(bytes.length + 1);\n    newBytes.set(bytes);\n    newBytes[bytes.length] = 0x80;\n    bytes = newBytes;\n    const l = bytes.length / 4 + 2;\n    const N = Math.ceil(l / 16);\n    const M = new Array(N);\n    for (let i = 0; i < N; ++i) {\n        const arr = new Uint32Array(16);\n        for (let j = 0; j < 16; ++j) {\n            arr[j] =\n                (bytes[i * 64 + j * 4] << 24) |\n                    (bytes[i * 64 + j * 4 + 1] << 16) |\n                    (bytes[i * 64 + j * 4 + 2] << 8) |\n                    bytes[i * 64 + j * 4 + 3];\n        }\n        M[i] = arr;\n    }\n    M[N - 1][14] = ((bytes.length - 1) * 8) / Math.pow(2, 32);\n    M[N - 1][14] = Math.floor(M[N - 1][14]);\n    M[N - 1][15] = ((bytes.length - 1) * 8) & 0xffffffff;\n    for (let i = 0; i < N; ++i) {\n        const W = new Uint32Array(80);\n        for (let t = 0; t < 16; ++t) {\n            W[t] = M[i][t];\n        }\n        for (let t = 16; t < 80; ++t) {\n            W[t] = ROTL(W[t - 3] ^ W[t - 8] ^ W[t - 14] ^ W[t - 16], 1);\n        }\n        let a = H[0];\n        let b = H[1];\n        let c = H[2];\n        let d = H[3];\n        let e = H[4];\n        for (let t = 0; t < 80; ++t) {\n            const s = Math.floor(t / 20);\n            const T = (ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[t]) >>> 0;\n            e = d;\n            d = c;\n            c = ROTL(b, 30) >>> 0;\n            b = a;\n            a = T;\n        }\n        H[0] = (H[0] + a) >>> 0;\n        H[1] = (H[1] + b) >>> 0;\n        H[2] = (H[2] + c) >>> 0;\n        H[3] = (H[3] + d) >>> 0;\n        H[4] = (H[4] + e) >>> 0;\n    }\n    return Uint8Array.of(H[0] >> 24, H[0] >> 16, H[0] >> 8, H[0], H[1] >> 24, H[1] >> 16, H[1] >> 8, H[1], H[2] >> 24, H[2] >> 16, H[2] >> 8, H[2], H[3] >> 24, H[3] >> 16, H[3] >> 8, H[3], H[4] >> 24, H[4] >> 16, H[4] >> 8, H[4]);\n}\nexport default sha1;\n","import sha1 from './sha1.js';\nimport v35, { DNS, URL } from './v35.js';\nexport { DNS, URL } from './v35.js';\nfunction v5(value, namespace, buf, offset) {\n    return v35(0x50, sha1, value, namespace, buf, offset);\n}\nv5.DNS = DNS;\nv5.URL = URL;\nexport default v5;\n","import { v5 as uuidv5 } from 'uuid';\nimport { IStringKeyedObject } from \"./interfaces\";\n\n// TODO: make this customizable.\nconst DEFAULT_LANGUAGE = \"en\";\nconst SLUG_LENGTH = 20;\nconst UUID_NAMESPACE = '1a79f1c8-9505-4bea-a18e-28a053f725ca'; // Generated for this purpose.\nconst UUID_NAMESPACE_COMPRESSION = uuidv5('compression', '1a79f1c8-9505-4bea-a18e-28a053f725ca');\n\nlet currentLanguage: string | undefined;\n\nfunction slugify(original: any): string {\n    return `${original}`.replaceAll(/[^A-Za-z0-9_]/g, \"\").slice(0, SLUG_LENGTH);\n}\n\nfunction getCurrentLanguage(): string {\n  return currentLanguage || ((typeof navigator != 'undefined' && navigator.language) || DEFAULT_LANGUAGE).slice(0, 2);\n}\n\nfunction setCurrentLanguage(lang: string) {\n  currentLanguage = lang;\n}\n\nclass AttrPromise<T> extends Promise<T> implements IStringKeyedObject {\n  [key: string | symbol]: any;\n  [Symbol.toPrimitive]: undefined;\n  constructor(\n    executor: (\n      resolve: (value: T | PromiseLike<T>) => void,\n      reject: (reason: any) => void,\n    ) => void,\n  ) {\n    super(executor);\n    const proxy = new Proxy(this, {\n      set: (object: AttrPromise<T>, keyObj, value) => {\n        object.then((val: any) => {\n          val[keyObj] = value;\n          return val;\n        });\n        return true;\n      },\n      get: (object: AttrPromise<T>, keyObj: string | symbol) => {\n        if (keyObj in object) {\n          const value: any = object[keyObj];\n          if (typeof value === \"function\") {\n            return value.bind(object);\n          }\n          return value;\n        }\n        const key = keyObj.toString();\n        if (key in object) {\n          const value: any = object[key];\n          if (typeof value === \"function\") {\n            return value.bind(object);\n          }\n          return value;\n        }\n        if (object instanceof Promise) {\n          return object.then((val: any) => {\n            return val ? val[keyObj] : val;\n          });\n        }\n        return object[keyObj];\n      },\n    });\n    return proxy;\n  }\n}\n\nconst KEY_COMPRESSION_LENGTH = 1000;\nfunction generateUuidv5(group: [type: string, id?: string], key: string | string[]) {\n  if (Array.isArray(key)) {\n    let shortKey = '';\n    let keyTracker = '';\n    key.forEach(k => {\n      if (keyTracker.length + k.length + 1 > KEY_COMPRESSION_LENGTH) {\n        shortKey = uuidv5(shortKey + '>' + keyTracker, UUID_NAMESPACE_COMPRESSION);\n        keyTracker = k;\n      } else {\n        keyTracker += ';' + k;\n      }\n    });\n  }\n  return uuidv5(`${group[0]}:${group[1]}:${key}`, UUID_NAMESPACE);\n}\n\nexport { slugify, AttrPromise, getCurrentLanguage, generateUuidv5, setCurrentLanguage };\n","import { v4 as uuidv4 } from 'uuid';\nimport { generateUuidv5 } from './utils';\nconst UUID_NAMESPACE = '1a79f1c8-9505-4bea-a18e-28a053f725ca'; // Generated for this purpose.\nimport { getCurrentLanguage, slugify } from './utils';\n\nclass StaticGraphMeta {\n  [key: string]: any\n  author: string | undefined\n  cards: number | undefined\n  cards_x_nodes_x_widgets: number | undefined\n  color: string | undefined\n  description: {[lang: string]: string} | undefined\n  edges: number | undefined\n  graphid: string\n  iconclass: string | undefined\n  is_editable: boolean | undefined\n  isresource: boolean | undefined\n  jsonldcontext: {[key: string]: any} | undefined\n  name: {[lang: string]: string} | undefined\n  nodegroups: number | undefined\n  nodes: number | undefined\n  ontology_id: string | undefined\n  publication: {[key: string]: string | null} | undefined\n  relatable_resource_model_ids: string[] = []\n  resource_2_resource_constraints: any[] = []\n  root: StaticNode | undefined\n  slug: string | undefined\n  subtitle: {[lang: string]: string} | undefined\n  version: string | undefined\n\n  constructor(jsondata: StaticGraphMeta) {\n    this.graphid = jsondata.graphid;\n    Object.assign(this, jsondata)\n  }\n}\n\nclass StaticTranslatableString extends String {\n  translations: Map<string, string>;\n  lang: string;\n\n  constructor(\n    s: string | StaticTranslatableString,\n    lang: undefined | string = undefined,\n  ) {\n    let translations: Map<string, string>;\n    let finalLang: string;\n    if (s instanceof StaticTranslatableString) {\n      translations = new Map(s.translations);\n      if (lang === undefined) {\n        finalLang = s.lang;\n      } else {\n        finalLang = lang;\n      }\n    } else if (typeof s === \"object\") {\n      translations = new Map(Object.entries(s));\n      if (lang === undefined || !translations.has(lang)) {\n        const defaultLanguage = getCurrentLanguage();\n        if (!translations || translations.has(defaultLanguage)) {\n          finalLang = defaultLanguage;\n        } else {\n          finalLang = Object.keys(s)[0];\n        }\n      } else {\n        finalLang = lang;\n      }\n    } else {\n      translations = new Map();\n      finalLang = lang || getCurrentLanguage();\n      translations.set(finalLang, s);\n    }\n    s = translations.get(finalLang) || \"\";\n    super(s);\n    this.translations = translations;\n    this.lang = finalLang;\n  }\n\n  copy?() {\n    return new StaticTranslatableString(this, this.lang);\n  }\n\n  toString(): string {\n    const current = this.lang || getCurrentLanguage();\n    let asString;\n    if (this.translations.size) {\n      asString = this.translations.get(current) || this.translations.values().next().value\n    }\n    return `${asString}`;\n  }\n\n  toJSON(): {[key: string]: string} {\n    return Object.fromEntries(this.translations);\n  }\n}\n\nclass StaticNodegroup {\n  cardinality: \"1\" | \"n\" | null;\n  legacygroupid: null;\n  nodegroupid: string;\n  parentnodegroup_id: string | null;\n\n  constructor(jsonData: StaticNodegroup) {\n    this.legacygroupid = jsonData.legacygroupid;\n    this.nodegroupid = jsonData.nodegroupid;\n    this.parentnodegroup_id = jsonData.parentnodegroup_id;\n    this.cardinality = jsonData.cardinality;\n  }\n\n  copy?(): StaticNodegroup {\n    return new StaticNodegroup(this);\n  }\n}\n\nclass StaticNode {\n  alias: string | null;\n  config: { [key: string]: any };\n  datatype: string;\n  description: string | null;\n  exportable: boolean;\n  fieldname: null | string;\n  graph_id: string;\n  hascustomalias: boolean;\n  is_collector: boolean;\n  isrequired: boolean;\n  issearchable: boolean;\n  istopnode: boolean;\n  name: string;\n  nodegroup_id: string | null;\n  nodeid: string;\n  ontologyclass: string | null = null;\n  parentproperty: string | null = null;\n  sortorder: number;\n  sourcebranchpublication_id: null | string = null;\n\n  constructor(jsonData: StaticNode) {\n    this.alias = jsonData.alias;\n    this.config = jsonData.config;\n    this.datatype = jsonData.datatype;\n    this.description = jsonData.description;\n    this.exportable = jsonData.exportable;\n    this.fieldname = jsonData.fieldname;\n    this.graph_id = jsonData.graph_id;\n    this.hascustomalias = jsonData.hascustomalias;\n    this.is_collector = jsonData.is_collector;\n    this.isrequired = jsonData.isrequired;\n    this.issearchable = jsonData.issearchable;\n    this.istopnode = jsonData.istopnode;\n    this.name = jsonData.name;\n    this.nodegroup_id = jsonData.nodegroup_id;\n    this.nodeid = jsonData.nodeid;\n    this.parentproperty = jsonData.parentproperty;\n    this.sortorder = jsonData.sortorder;\n    this.ontologyclass = jsonData.ontologyclass;\n    this.sourcebranchpublication_id = jsonData.sourcebranchpublication_id;\n  }\n\n  copy?(): StaticNode {\n    // TODO: config should be deep copied\n    return new StaticNode(this);\n  }\n\n  // true -- same object\n  // 2 -- identical\n  // 1 -- identical not counting falsey nodeid, nodegroupid and/or graphid\n  // -1 -- identical up to nodeid\n  // -2 -- identical up to nodeid, nodegroupid\n  // -3 -- identical up to nodeid, nodegroupid and graphid\n  // false -- different\n  // for <2, falsey nodeid, nodegroupid and graphid count as matches\n  // and copy/compare are ignored.\n  static compare(nodeA: StaticNode | {[key: string]: any}, nodeB: StaticNode | {[key: string]: any}): number | boolean {\n    if (nodeA === nodeB) {\n      return true;\n    }\n    const keys = [...Object.keys(nodeA), ...Object.keys(nodeB)].filter(key => ![\n      'compare',\n      'copy',\n      'nodeid',\n      'graph_id',\n      'nodegroup_id'\n    ].includes(key));\n    // doubles keys...\n    function compareEntries(entriesA: [string, any][], entriesB: [string, any][]) {\n      const entryPairs: {[key: string]: any} = {};\n      for (const [key, value] of [...entriesA, ...entriesB]) {\n        entryPairs[key] = entryPairs[key] || [];\n        entryPairs[key].push(value);\n      }\n      for (const [_, [valA, valB]] of Object.entries(entryPairs)) {\n        if (valA && valB && typeof valA === 'object' && typeof valB === 'object') {\n          if (!compareEntries(Object.entries(valA), Object.entries(valB))) {\n            return false;\n          }\n        }\n        if (Array.isArray(valA) && Array.isArray(valB)) {\n          if (!compareEntries(Object.entries(valA), Object.entries(valB))) {\n            return false;\n          }\n        }\n        if (valA !== valB) {\n          return false;\n        }\n      }\n      return true;\n    }\n    if (!compareEntries(\n      // @ts-expect-error Expecting values to be symbols\n      keys.map((k: string): [string, any][] => [k, nodeA[k]]),\n      // @ts-expect-error Expecting values to be symbols\n      keys.map((k: string): [string, any][] => [k, nodeB[k]])\n    )) {\n      return false;\n    }\n\n    // We know these are the same up to the IDs\n    if (nodeA.graph_id && nodeB.graph_id && nodeA.graph_id !== nodeB.graph_id) {\n      return -3;\n    }\n    if (nodeA.nodegroup_id && nodeB.nodegroup_id && nodeA.nodegroup_id !== nodeB.nodegroup_id) {\n      return -2;\n    }\n    if (nodeA.nodeid && nodeB.nodeid && nodeA.nodeid !== nodeB.nodeid) {\n      return -1;\n    }\n    if (\n      (nodeA.graph_id && nodeB.graph_id || nodeA.graph_id === nodeB.graph_id) &&\n      (nodeA.nodegroup_id && nodeB.nodegroup_id || nodeA.nodegroup_id === nodeB.nodegroup_id) &&\n      (nodeA.nodeid && nodeB.nodeid || nodeA.nodeid === nodeB.nodeid)\n    ) {\n      return 2;\n    }\n    return 1;\n  }\n}\n\nclass StaticConstraint {\n  card_id: string;\n  constraintid: string;\n  nodes: Array<string>;\n  uniquetoallinstances: boolean;\n\n  constructor(jsonData: StaticConstraint) {\n    this.card_id = jsonData.card_id;\n    this.constraintid = jsonData.constraintid;\n    this.nodes = jsonData.nodes;\n    this.uniquetoallinstances = jsonData.uniquetoallinstances;\n  }\n}\n\nclass StaticCard {\n  active: boolean;\n  cardid: string;\n  component_id: string;\n  config?: object;\n  constraints: Array<StaticConstraint>;\n  cssclass: null | string;\n  description: string | null;\n  graph_id: string;\n  helpenabled: boolean;\n  helptext: StaticTranslatableString;\n  helptitle: StaticTranslatableString;\n  instructions: StaticTranslatableString;\n  is_editable: boolean;\n  name: StaticTranslatableString;\n  nodegroup_id: string;\n  sortorder: number | null;\n  visible: boolean;\n\n  constructor(jsonData: StaticCard) {\n    this.active = jsonData.active;\n    this.cardid = jsonData.cardid;\n    this.component_id = jsonData.component_id;\n    this.config = jsonData.config;\n    this.constraints = jsonData.constraints.map(\n      (constraint) => new StaticConstraint(constraint),\n    );\n    this.cssclass = jsonData.cssclass;\n    this.description = jsonData.description;\n    this.graph_id = jsonData.graph_id;\n    this.helpenabled = jsonData.helpenabled;\n    this.helptext = new StaticTranslatableString(jsonData.helptext);\n    this.helptitle = new StaticTranslatableString(jsonData.helptitle);\n    this.instructions = new StaticTranslatableString(jsonData.instructions);\n    this.is_editable = jsonData.is_editable;\n    this.name = new StaticTranslatableString(jsonData.name);\n    this.nodegroup_id = jsonData.nodegroup_id;\n    this.sortorder = jsonData.sortorder;\n    this.visible = jsonData.visible;\n  }\n}\n\nclass StaticCardsXNodesXWidgets {\n  card_id: string;\n  config: object;\n  id: string;\n  label: StaticTranslatableString;\n  node_id: string;\n  sortorder: number;\n  visible: boolean;\n  widget_id: string;\n\n  constructor(jsonData: StaticCardsXNodesXWidgets) {\n    this.card_id = jsonData.card_id;\n    this.config = jsonData.config;\n    this.id = jsonData.id;\n    this.label = new StaticTranslatableString(jsonData.label);\n    this.node_id = jsonData.node_id;\n    this.sortorder = jsonData.sortorder;\n    this.visible = jsonData.visible;\n    this.widget_id = jsonData.widget_id;\n  }\n}\n\nclass StaticEdge {\n  description: string | null;\n  domainnode_id: string;\n  edgeid: string;\n  graph_id: string;\n  name: null | string;\n  ontologyproperty: null | string = null;\n  rangenode_id: string;\n\n  constructor(jsonData: StaticEdge) {\n    this.description = jsonData.description;\n    this.domainnode_id = jsonData.domainnode_id;\n    this.edgeid = jsonData.edgeid;\n    this.graph_id = jsonData.graph_id;\n    this.name = jsonData.name;\n    this.rangenode_id = jsonData.rangenode_id;\n    this.ontologyproperty = jsonData.ontologyproperty;\n  }\n\n  copy?(): StaticEdge {\n    return new StaticEdge(this);\n  }\n}\n\ninterface IStaticDescriptorConfig {\n  descriptor_types: {\n    nodegroup_id: string,\n    string_template: string\n  }[],\n};\n\nclass StaticFunctionsXGraphs {\n  config: IStaticDescriptorConfig;\n  function_id: string;\n  graph_id: string;\n  id: string;\n\n  constructor(jsonData: StaticFunctionsXGraphs) {\n    this.config = jsonData.config;\n    this.function_id = jsonData.function_id;\n    this.graph_id = jsonData.graph_id;\n    this.id = jsonData.id;\n  }\n\n  copy(): StaticFunctionsXGraphs {\n    return new StaticFunctionsXGraphs(this);\n  }\n}\n\nclass StaticPublication {\n  graph_id: string;\n  notes: null | string;\n  publicationid: string;\n  published_time: string;\n\n  constructor(jsonData: StaticPublication) {\n    this.graph_id = jsonData.graph_id;\n    this.notes = jsonData.notes;\n    this.publicationid = jsonData.publicationid;\n    this.published_time = jsonData.published_time;\n  }\n\n  copy?(): StaticPublication {\n    return new StaticPublication(this);\n  }\n}\n\nclass StaticGraph {\n  author: string;\n  cards: Array<StaticCard> | null = null;\n  cards_x_nodes_x_widgets: Array<StaticCardsXNodesXWidgets> | null = null;\n  color: string | null;\n  config: object;\n  deploymentdate: null | string = null;\n  deploymentfile: null | string = null;\n  description: StaticTranslatableString;\n  edges: Array<StaticEdge>;\n  functions_x_graphs: Array<StaticFunctionsXGraphs> | null = null;\n  graphid: string;\n  iconclass: string;\n  is_editable: boolean | null = null;\n  isresource: boolean;\n  jsonldcontext: string | null = null;\n  name: StaticTranslatableString;\n  nodegroups: Array<StaticNodegroup>;\n  nodes: Array<StaticNode>;\n  ontology_id: string | null = null;\n  publication: StaticPublication | null = null;\n  relatable_resource_model_ids: Array<string>;\n  resource_2_resource_constraints: Array<any> | null = null;\n  root: StaticNode;\n  slug: string | null = null;\n  subtitle: StaticTranslatableString;\n  template_id: string;\n  version: string;\n\n  constructor(jsonData: StaticGraph) {\n    this.author = jsonData.author;\n    this.cards =\n      jsonData.cards && jsonData.cards.map((card) => new StaticCard(card));\n    this.cards_x_nodes_x_widgets =\n      jsonData.cards_x_nodes_x_widgets &&\n      jsonData.cards_x_nodes_x_widgets.map(\n        (card_x_node_x_widget) =>\n          new StaticCardsXNodesXWidgets(card_x_node_x_widget),\n      );\n    this.color = jsonData.color;\n    this.config = jsonData.config;\n    this.deploymentdate = jsonData.deploymentdate;\n    this.deploymentfile = jsonData.deploymentfile;\n    this.description = new StaticTranslatableString(jsonData.description);\n    this.edges = jsonData.edges.map((edge) => new StaticEdge(edge));\n    this.functions_x_graphs =\n      jsonData.functions_x_graphs &&\n      jsonData.functions_x_graphs.map(\n        (functions_x_graphs) => new StaticFunctionsXGraphs(functions_x_graphs),\n      );\n    this.graphid = jsonData.graphid;\n    this.iconclass = jsonData.iconclass;\n    this.is_editable = jsonData.is_editable;\n    this.isresource = jsonData.isresource;\n    this.jsonldcontext = jsonData.jsonldcontext;\n    this.name = new StaticTranslatableString(jsonData.name);\n    this.nodegroups = jsonData.nodegroups.map(\n      (nodegroup) => new StaticNodegroup(nodegroup),\n    );\n    // We should probably confirm that there is one node in nodes and it is\n    // equivalent to root.\n    this.nodes = jsonData.nodes.map((node) => new StaticNode(node));\n    this.ontology_id = jsonData.ontology_id;\n    this.publication =\n      jsonData.publication && new StaticPublication(jsonData.publication);\n    this.relatable_resource_model_ids = jsonData.relatable_resource_model_ids;\n    this.resource_2_resource_constraints =\n      jsonData.resource_2_resource_constraints;\n    this.root = jsonData.root;\n    this.slug = jsonData.slug;\n    this.subtitle = new StaticTranslatableString(jsonData.subtitle);\n    this.template_id = jsonData.template_id;\n    this.version = jsonData.version;\n  }\n\n  // TODO: complete deepcopy\n  copy?(): StaticGraph {\n    const newGraph = new StaticGraph(this);\n    Object.assign(newGraph, {\n      author: this.author,\n      cards: this.cards?.map(card => new StaticCard(card)) || [],\n      cards_x_nodes_x_widgets: this.cards_x_nodes_x_widgets?.map(cnw => new StaticCardsXNodesXWidgets(cnw)) || [],\n      color: this.color,\n      config: Object.assign({}, this.config), // TODO: deepcopy;\n      deploymentdate: this.deploymentdate,\n      deploymentfile: this.deploymentfile,\n      description: this.description.copy && this.description.copy() || this.description,\n      edges: this.edges.map(edge => edge.copy && edge.copy() || edge),\n      functions_x_graphs: this.functions_x_graphs?.map(fxg => fxg.copy()) || [],\n      graphid: this.graphid,\n      iconclass: this.iconclass,\n      is_editable: this.is_editable,\n      isresource: this.isresource,\n      jsonldcontext: this.jsonldcontext,\n      name: this.name.copy && this.name.copy() || this.name,\n      nodegroups: this.nodegroups?.map(ng => ng.copy && ng.copy() || ng),\n      nodes: this.nodes?.map(n => n.copy && n.copy() || n),\n      ontology_id: this.ontology_id,\n      publication: this.publication?.copy && this.publication.copy() || null,\n      relatable_resource_model_ids: [...this.relatable_resource_model_ids || []],\n      resource_2_resource_constraints: [...this.resource_2_resource_constraints || []],\n      root: this.root.copy && this.root.copy() || this.root,\n      slug: this.slug,\n      subtitle: this.subtitle.copy && this.subtitle.copy(),\n      template_id: this.template_id,\n      version: this.version\n    });\n    return newGraph;\n  }\n\n  static create(props: {\n    author?: string,\n    color?: string | null,\n    config?: object,\n    deploymentdate?: null | string,\n    deploymentfile?: null | string,\n    description?: string | StaticTranslatableString,\n    graphid?: string,\n    iconclass?: string,\n    is_editable?: boolean | null,\n    isresource?: boolean,\n    jsonldcontext?: string | null,\n    name?: string | StaticTranslatableString,\n    ontology_id?: string | null,\n    relatable_resource_model_ids?: Array<string>,\n    resource_2_resource_constraints?: Array<any> | null,\n    slug?: string | null,\n    subtitle?: string | StaticTranslatableString,\n    template_id?: string,\n    version?: string\n  }, published: boolean=true): StaticGraph {\n    const graphid = props.graphid || uuidv4();\n    const publication = published ? new StaticPublication({\n      graph_id: graphid,\n      notes: null,\n      publicationid: uuidv4(),\n      published_time: (new Date()).toISOString()\n    }) : null;\n    // TODO: check name is not just string in upstream\n    const name = props.name ? (\n      props.name instanceof StaticTranslatableString ?\n      props.name : new StaticTranslatableString(props.name)\n    ) : new StaticTranslatableString('');\n    const alias = slugify(name);\n    const root = new StaticNode({\n      \"alias\": alias,\n      \"config\": {},\n      \"datatype\": \"semantic\",\n      \"description\": \"\",\n      \"exportable\": false,\n      \"fieldname\": \"\",\n      \"graph_id\": graphid,\n      \"hascustomalias\": false,\n      \"is_collector\": false,\n      \"isrequired\": false,\n      \"issearchable\": true,\n      \"istopnode\": true,\n      \"name\": name.toString(),\n      \"nodegroup_id\": null,\n      \"nodeid\": graphid,\n      \"ontologyclass\": props.ontology_id || null,\n      \"parentproperty\": null,\n      \"sortorder\": 0,\n      \"sourcebranchpublication_id\": null\n    });\n    return new StaticGraph({\n      author: props.author,\n      cards: null,\n      cards_x_nodes_x_widgets: null,\n      color: props.color || null,\n      config: props.config || {},\n      deploymentdate: props.deploymentdate || null,\n      deploymentfile: props.deploymentfile || null,\n      description: props.description ? (\n        props.description instanceof StaticTranslatableString ?\n        props.description : new StaticTranslatableString(props.description)\n      ) : null,\n      edges: [],\n      functions_x_graphs: [],\n      graphid: graphid,\n      iconclass: props.iconclass || '',\n      is_editable: props.is_editable || null,\n      isresource: props.isresource || null,\n      jsonldcontext: props.jsonldcontext || null,\n      name: name,\n      nodegroups: [],\n      nodes: [root.copy()],\n      ontology_id: props.ontology_id || null,\n      publication: publication,\n      relatable_resource_model_ids: props.relatable_resource_model_ids || [],\n      resource_2_resource_constraints: props.resource_2_resource_constraints || null,\n      root: root,\n      slug: props.slug || null,\n      subtitle: props.subtitle ? (\n        props.subtitle instanceof StaticTranslatableString ?\n        props.subtitle : new StaticTranslatableString(props.subtitle)\n      ) : new StaticTranslatableString(''),\n      template_id: props.template_id || '',\n      version: props.version || ''\n    });\n  }\n}\n\n/// Resources\n//\ntype StaticProvisionalEdit = any;\n\nclass StaticValue {\n  id: string;\n  value: string;\n  __concept?: StaticConcept | null;\n  __conceptId?: string | null;\n\n  constructor(jsonData: StaticValue, concept: StaticConcept | string | null = null) {\n    this.id = jsonData.id;\n    this.value = jsonData.value;\n    if (concept instanceof StaticConcept) {\n      this.__concept = concept;\n      this.__conceptId = concept ? concept.id : null;\n    } else {\n      this.__concept = null;\n      this.__conceptId = concept;\n    }\n  }\n\n  toString() {\n    return this.value;\n  }\n\n  static create(referent: string | StaticConcept, valueType: string, value: string, language?: string) {\n    const lang = language || getCurrentLanguage();\n    const referentId = referent instanceof StaticConcept ? referent.id : referent;\n    // NB: this means passing an ID of a concept, and a concept, have different ID-creating behaviour.\n    const concept = referent instanceof StaticConcept ? referent : null;\n    const id = generateUuidv5(\n      ['value'],\n      `${referentId}/${valueType}/${value}/${lang}`\n    );\n    return new StaticValue(\n      {\n        id: id,\n        value: value\n      },\n      concept\n    );\n  }\n}\n\nclass StaticConcept {\n  id: string;\n  prefLabels: { [lang: string]: StaticValue };\n  source: string | null;\n  sortOrder: number | null;\n  children: StaticConcept[] | null;\n\n  constructor(jsonData: StaticConcept) {\n    this.id = jsonData.id;\n    this.prefLabels = jsonData.prefLabels;\n    for (const [lang, value] of Object.entries(this.prefLabels)) {\n      if (!(value instanceof StaticValue)) {\n        this.prefLabels[lang] = new StaticValue(value, this);\n      }\n    }\n    this.source = jsonData.source;\n    this.sortOrder = jsonData.sortOrder;\n    this.children = jsonData.children;\n    if (this.children) {\n      this.children = this.children.map((child) => {\n        return child instanceof StaticConcept\n          ? child\n          : new StaticConcept(child);\n      });\n    }\n  }\n\n  getPrefLabel?(): StaticValue {\n    return (\n      this.prefLabels[getCurrentLanguage()] || Object.values(this.prefLabels)[0]\n    );\n  }\n\n  toString() {\n    if (!this.getPrefLabel) {\n      return this.constructor(this).getPrefLabel().value;\n    }\n    return this.getPrefLabel().value;\n  }\n\n  // NB: copies value, does not make it a child\n  static fromValue(conceptScheme: StaticConcept | null, value: string | StaticValue | { [lang: string]: StaticValue }, children?: (string | StaticValue | StaticConcept)[], config: {baseLanguage?: string, source?: string | null, sortOrder?: number | null} = {}): StaticConcept {\n    // TODO make sure that children are in the same concept scheme so that deterministic IDs are preserved.\n    let lang = config?.baseLanguage || getCurrentLanguage();\n    let tmpValue;\n    let prefLabels: { [lang: string]: StaticValue };\n    if (typeof value === 'string') {\n      tmpValue = value;\n      prefLabels = {[lang]: new StaticValue({id: '', value: tmpValue})};\n    } else if (value instanceof StaticValue) {\n      tmpValue = value.value;\n      prefLabels = {[lang]: value};\n    } else if (lang in value) {\n      tmpValue = value[lang].value;\n      prefLabels = value;\n    } else {\n      const firstValue = Object.entries(value).sort()[0];\n      if (firstValue === undefined) {\n        throw Error(\"Cannot create a concept from values without a non-empty value\");\n      }\n      lang = firstValue[0];\n      tmpValue = firstValue[1].value;\n      prefLabels = value;\n    }\n    const conceptId = generateUuidv5(\n      ['concept'],\n      `${conceptScheme?.id || '(none)'}/${tmpValue}`\n    );\n    const childConcepts = (children || []).map(child => {\n      if (!(child instanceof StaticConcept)) {\n        return StaticConcept.fromValue(conceptScheme, value, [], {baseLanguage: config.baseLanguage});\n      }\n      return child;\n    });\n    return new StaticConcept({\n      id: conceptId,\n      prefLabels,\n      source: config.source || null,\n      sortOrder: config.sortOrder || null,\n      children: childConcepts\n    });\n  }\n}\n\n// A prefLabel, for example, can only exist once per language.\nclass StaticCollection {\n  id: string;\n  prefLabels: { [lang: string]: StaticValue };\n  concepts: { [conceptId: string]: StaticConcept };\n  __allConcepts: { [conceptId: string]: StaticConcept };\n  __values: { [valueId: string]: StaticValue };\n\n  static fromConceptScheme(props: {\n    collectionid?: string,\n    name?: string | { [lang: string]: StaticValue } | StaticValue;\n    conceptScheme: StaticConcept\n  }): StaticCollection {\n    const collectionName = props.name ?? props.conceptScheme.toString();\n    return StaticCollection.create({\n      name: collectionName,\n      concepts: props.conceptScheme.children || []\n    })\n  }\n\n  static create(props: {\n    collectionid?: string,\n    name: string | { [lang: string]: StaticValue } | StaticValue;\n    concepts: StaticConcept[] | { [conceptId: string]: StaticConcept }\n  }): StaticCollection {\n    let concepts = props.concepts;\n    if (Array.isArray(concepts)) {\n      concepts = concepts.reduce(\n        (acc: { [conceptId: string]: StaticConcept }, c: StaticConcept) => {\n          acc[c.id] = c;\n          return acc;\n        },\n      {});\n    }\n    const name: StaticValue | { [lang: string]: StaticValue } = (\n      typeof props.name === 'string' ?\n        StaticValue.create('', 'prefLabel', props.name) :\n        props.name\n      );\n    let collectionid = props.collectionid;\n    if (!collectionid) {\n      if (typeof name === 'string') {\n        collectionid = generateUuidv5(\n          ['collection'],\n          name\n        );\n      } else if (name instanceof StaticValue) {\n        collectionid = generateUuidv5(\n          ['collection'],\n          name.value\n        );\n      } else {\n        throw Error(\"Must have a unique name to create a collection ID\");\n      }\n    }\n    const prefLabels: { [lang: string]: StaticValue } = name instanceof StaticValue ? {\n      [getCurrentLanguage()]: name\n    } : name;\n    return new StaticCollection({\n      id: collectionid,\n      prefLabels: prefLabels,\n      concepts: concepts,\n      __allConcepts: {},\n      __values: {}\n    });\n  }\n\n  constructor(jsonData: StaticCollection) {\n    this.id = jsonData.id;\n    this.prefLabels = jsonData.prefLabels;\n    this.concepts = jsonData.concepts;\n    this.__allConcepts = {};\n    this.__values = {};\n    const addValues = (concept: StaticConcept) => {\n      this.__allConcepts[concept.id] = concept;\n      for (const [, value] of Object.entries(concept.prefLabels)) {\n        this.__values[value.id] = value;\n      }\n      if (concept.children) {\n        for (let child of concept.children) {\n          if (!(child instanceof StaticConcept)) {\n            child = new StaticConcept(child);\n          }\n          addValues(child);\n        }\n      }\n    };\n    for (const [id, concept] of Object.entries(this.concepts)) {\n      if (!(concept instanceof StaticConcept)) {\n        this.concepts[id] = new StaticConcept(concept);\n      }\n      addValues(this.concepts[id]);\n    }\n  }\n\n  getConceptValue?(valueId: string) {\n    return this.__values[valueId];\n  }\n\n  getConceptByValue?(label: string) {\n    return Object.values(this.__values).find(value => value.value == label)?.__concept;\n  }\n\n  toString(): string {\n    return (this.prefLabels[getCurrentLanguage()] || Object.values(this.prefLabels)[0] || '').toString();\n  }\n}\n\nclass StaticTile {\n  data: Map<\n    string,\n    object | Map<string, any> | Array<any> | null | number | boolean | string\n  >;\n  nodegroup_id: string;\n  resourceinstance_id: string;\n  tileid: string | null;\n  parenttile_id: string | null = null;\n  provisionaledits: null | Array<StaticProvisionalEdit> = null;\n  sortorder: number | null = null;\n\n  constructor(jsonData: StaticTile) {\n    this.data = jsonData.data;\n    if (typeof this.data === 'object' && !(this.data instanceof Map)) {\n      this.data = new Map(Object.entries(this.data));\n    }\n    this.nodegroup_id = jsonData.nodegroup_id;\n    this.resourceinstance_id = jsonData.resourceinstance_id;\n    this.tileid = jsonData.tileid;\n    this.parenttile_id = jsonData.parenttile_id;\n    this.provisionaledits = jsonData.provisionaledits;\n    this.sortorder = jsonData.sortorder;\n  }\n\n  ensureId(): string {\n    if (!this.tileid) {\n      this.tileid = crypto.randomUUID();\n    }\n    return this.tileid;\n  }\n}\n\nclass StaticResourceDescriptors {\n  [key: string]: (string | undefined | (() => boolean));\n  name?: string;\n  map_popup?: string;\n  description?: string;\n\n  constructor(jsonData?: StaticResourceDescriptors) {\n    if (jsonData) {\n      this.name = jsonData.name;\n      this.map_popup = jsonData.map_popup;\n      this.description = jsonData.description;\n    }\n  }\n\n  isEmpty(): boolean {\n    return !(this.name || this.map_popup || this.description);\n  }\n}\n\nclass StaticResourceMetadata {\n  descriptors: StaticResourceDescriptors;\n  graph_id: string;\n  name: string;\n  resourceinstanceid: string;\n  publication_id: string | null = null;\n  principaluser_id: number | null = null;\n  legacyid: null | string = null;\n  graph_publication_id: string | null = null;\n\n  constructor(jsonData: StaticResourceMetadata) {\n    this.descriptors = jsonData.descriptors;\n    if (!(this.descriptors instanceof StaticResourceDescriptors)) {\n      if (jsonData.descriptors instanceof Map) {\n        this.descriptors = new StaticResourceDescriptors(Object.fromEntries(jsonData.descriptors.entries()));\n      } else {\n        this.descriptors = new StaticResourceDescriptors(this.descriptors);\n      }\n    }\n    this.graph_id = jsonData.graph_id;\n    this.name = jsonData.name;\n    this.resourceinstanceid = jsonData.resourceinstanceid;\n    this.publication_id = jsonData.publication_id;\n    this.principaluser_id = jsonData.principaluser_id;\n    this.legacyid = jsonData.legacyid;\n    this.graph_publication_id = jsonData.graph_publication_id;\n  }\n}\n\nclass StaticDomainValue {\n  id: string\n  selected: boolean\n  text: {[lang: string]: string}\n\n  constructor(jsonData: StaticDomainValue) {\n    this.id = jsonData.id;\n    this.selected = jsonData.selected;\n    this.text = jsonData.text;\n  }\n\n  toString() {\n    const lang = getCurrentLanguage();\n    let localized = this.text[lang];\n    if (typeof localized !== \"string\") {\n      localized = Object.values(this.text)[0];\n    }\n    if (!localized) {\n      throw Error(`Could not render domain value ${this.id} in language ${lang}`);\n    }\n    return localized;\n  }\n\n  lang(lang: string): string | undefined {\n    return this.text[lang];\n  }\n\n  async forJson() {\n    return {\n      id: this.id,\n      selected: this.selected,\n      text: this.text\n    }\n  }\n}\n\nclass StaticResourceReference {\n  id: string;\n  type: string | undefined;\n  graphId: string;\n  title: string | undefined;\n  root: any | undefined;\n  meta?: {[key: string]: any};\n\n  constructor(jsonData: StaticResourceReference) {\n    this.id = jsonData.id;\n    this.type = jsonData.type;\n    this.graphId = jsonData.graphId;\n    this.root = jsonData.root;\n    this.title = jsonData.title;\n    if (jsonData.meta) {\n      this.meta = jsonData.meta;\n    }\n  }\n}\n\nclass StaticResource {\n  resourceinstance: StaticResourceMetadata;\n  tiles: Array<StaticTile> | null = null;\n  metadata: {[key: string]: string};\n  __cache: {[tileId: string]: {[nodeId: string]: {[key: string]: string}}} | undefined = undefined;\n  __source: string | undefined = undefined;\n  __scopes: string[] | undefined = undefined;\n\n  constructor(jsonData: StaticResource) {\n    this.resourceinstance = new StaticResourceMetadata(\n      jsonData.resourceinstance,\n    );\n    this.tiles =\n      jsonData.tiles && jsonData.tiles.map((tile) => new StaticTile(tile));\n    this.metadata = jsonData.metadata || {};\n    this.__cache = jsonData.__cache;\n    this.__scopes = jsonData.__scopes;\n  }\n}\n\nexport {\n  StaticValue,\n  StaticTile,\n  StaticGraph,\n  StaticResource,\n  StaticResourceMetadata,\n  StaticNode,\n  StaticNodegroup,\n  StaticEdge,\n  StaticCard,\n  StaticCardsXNodesXWidgets,\n  StaticCollection,\n  StaticConcept,\n  StaticDomainValue,\n  StaticResourceReference,\n  StaticGraphMeta,\n  StaticFunctionsXGraphs,\n  StaticResourceDescriptors,\n  StaticTranslatableString,\n  StaticConstraint,\n  type IStaticDescriptorConfig\n};\n","import { StaticGraphMeta, StaticGraph, StaticResource } from \"./static-types\";\nimport { StaticCollection } from \"./rdm\";\n\nclass GraphResult {\n  models: {[graphId: string]: StaticGraphMeta};\n\n  constructor(jsonData: GraphResult) {\n    this.models = Object.fromEntries(\n      Object.entries(jsonData.models).map(([k, v]) => [k, new StaticGraphMeta(v)])\n    );\n  }\n}\n\nabstract class ArchesClient {\n  abstract getGraphs(): Promise<GraphResult>;\n\n  abstract getGraph(graph: StaticGraphMeta): Promise<StaticGraph | null>;\n\n  abstract getGraphByIdOnly(graphId: string): Promise<StaticGraph | null>;\n\n  abstract getResources(\n    graphId: string,\n    limit: number,\n  ): Promise<StaticResource[]>;\n\n  abstract getResource(resourceId: string): Promise<StaticResource>;\n\n  abstract getCollection(collectionId: string): Promise<StaticCollection>;\n}\n\nclass ArchesClientRemote extends ArchesClient {\n  archesUrl: string;\n\n  constructor(archesUrl: string) {\n    super();\n    this.archesUrl = archesUrl;\n  }\n\n  async getGraphs(): Promise<GraphResult> {\n    const response = await fetch(\n      `${this.archesUrl}/api/arches/graphs?format=arches-json&hide_empty_nodes=false&compact=false`,\n    );\n    return await response.json();\n  }\n\n  async getGraph(graph: StaticGraphMeta): Promise<StaticGraph> {\n    return this.getGraphByIdOnly(graph.graphid);\n  }\n\n  async getGraphByIdOnly(graphId: string): Promise<StaticGraph> {\n    const response = await fetch(\n      `${this.archesUrl}/graphs/${graphId}?format=arches-json&gen=`,\n    );\n    return await response.json();\n  }\n\n  async getResource(resourceId: string): Promise<StaticResource> {\n    throw Error(`Not implemented yet: getResource(${resourceId}`);\n  }\n\n  async getCollection(collectionId: string): Promise<StaticCollection> {\n    throw Error(`Not implemented yet: getCollection(${collectionId}`);\n  }\n\n  async getResources(\n    graphId: string,\n    limit: number,\n  ): Promise<StaticResource[]> {\n    const response = await fetch(\n      `${this.archesUrl}/resources?graph_uuid=${graphId}&format=arches-json&hide_empty_nodes=false&compact=false&limit=${limit}`,\n    );\n    return await response.json();\n  }\n}\n\nclass ArchesClientRemoteStatic extends ArchesClient {\n  archesUrl: string;\n  allGraphFile: () => string;\n  graphToGraphFile?: (graph: StaticGraphMeta) => string;\n  graphIdToGraphFile: (graphId: string) => string;\n  graphIdToResourcesFiles: (graphId: string) => string[];\n  resourceIdToFile: (resourceId: string) => string;\n  collectionIdToFile: (collectionId: string) => string;\n\n  constructor(\n    archesUrl: string,\n    {\n      allGraphFile,\n      graphToGraphFile,\n      graphIdToResourcesFiles,\n      resourceIdToFile,\n      collectionIdToFile,\n      graphIdToGraphFile,\n    }: {\n      allGraphFile?: () => string,\n      graphToGraphFile?: (graph: StaticGraphMeta) => string,\n      graphIdToGraphFile?: (graphId: string) => string;\n      graphIdToResourcesFiles?: (graphId: string) => string[];\n      resourceIdToFile?: (resourceId: string) => string;\n      collectionIdToFile?: (collectionId: string) => string;\n    } = {},\n  ) {\n    super();\n    this.archesUrl = archesUrl;\n    this.allGraphFile = allGraphFile || (() => \"resource_models/_all.json\");\n    this.graphToGraphFile = graphToGraphFile;\n    this.graphIdToGraphFile =\n      graphIdToGraphFile ||\n      ((graphId: string) => `resource_models/${graphId}.json`);\n    this.graphIdToResourcesFiles =\n      graphIdToResourcesFiles ||\n      ((graphId: string) => [`business_data/_${graphId}.json`]);\n    this.resourceIdToFile =\n      resourceIdToFile ||\n      ((resourceId: string) => `business_data/${resourceId}.json`);\n    this.collectionIdToFile =\n      collectionIdToFile ||\n      ((collectionId: string) => `collections/${collectionId}.json`);\n  }\n\n  async getGraphs(): Promise<GraphResult> {\n    const response = await fetch(`${this.archesUrl}/${this.allGraphFile()}`);\n    return await response.json();\n  }\n\n  async getGraph(graph: StaticGraphMeta): Promise<StaticGraph | null> {\n    if (!this.graphToGraphFile) {\n      return this.getGraphByIdOnly(graph.graphid);\n    }\n    const response = await fetch(\n      `${this.archesUrl}/${this.graphToGraphFile(graph)}`,\n    );\n    return (await response.json()).graph[0];\n  }\n\n  async getGraphByIdOnly(graphId: string): Promise<StaticGraph | null> {\n    const response = await fetch(\n      `${this.archesUrl}/${this.graphIdToGraphFile(graphId)}`,\n    );\n    return (await response.json()).graph[0];\n  }\n\n  async getResource(resourceId: string): Promise<StaticResource> {\n    const source = `${this.archesUrl}/${this.resourceIdToFile(resourceId)}`;\n    const response = await fetch(source);\n    return response.json().then((response: StaticResource) => {\n      response.__source = source;\n      return response;\n    });\n  }\n\n  async getCollection(collectionId: string): Promise<StaticCollection> {\n    const response = await fetch(\n      `${this.archesUrl}/${this.collectionIdToFile(collectionId)}`,\n    );\n    return await response.json();\n  }\n\n  async getResources(\n    graphId: string,\n    limit: number,\n  ): Promise<StaticResource[]> {\n    const resources = [];\n    for (const file of this.graphIdToResourcesFiles(graphId)) {\n      const source = `${this.archesUrl}/${file}`;\n      const response = await fetch(source);\n      const resourceSet: StaticResource[] = (await response.json()).business_data.resources;\n      for (const resource of resourceSet) {\n        resource.__source = source;\n      }\n      resources.push(...(limit ? resourceSet.slice(0, limit) : resourceSet));\n      if (limit && resources.length > limit) {\n        break;\n      }\n    }\n    return resources;\n  }\n}\n\nclass ArchesClientLocal extends ArchesClient {\n  fs: any;\n  allGraphFile: () => string;\n  graphToGraphFile?: (graph: StaticGraphMeta) => string;\n  graphIdToGraphFile: (graphId: string) => string;\n  graphIdToResourcesFiles: (graphId: string) => string[];\n  resourceIdToFile: (resourceId: string) => string;\n  collectionIdToFile: (collectionId: string) => string;\n\n  constructor({\n      allGraphFile,\n      graphToGraphFile,\n      graphIdToResourcesFiles,\n      resourceIdToFile,\n      collectionIdToFile,\n      graphIdToGraphFile,\n    }: {\n      allGraphFile?: () => string,\n      graphToGraphFile?: (graph: StaticGraphMeta) => string,\n      graphIdToGraphFile?: (graphId: string) => string;\n      graphIdToResourcesFiles?: (graphId: string) => string[];\n      resourceIdToFile?: (resourceId: string) => string;\n      collectionIdToFile?: (collectionId: string) => string;\n    } = {}) {\n    super();\n    this.fs = import(\"fs\");\n    this.allGraphFile = allGraphFile || (() => \"tests/definitions/models/_all.json\");\n    this.graphToGraphFile =\n      graphToGraphFile ||\n      ((graph: StaticGraphMeta) => `tests/definitions/models/${graph.graphid}.json`);\n    this.graphIdToGraphFile =\n      graphIdToGraphFile ||\n      ((graphId: string) => `tests/definitions/models/${graphId}.json`);\n    this.graphIdToResourcesFiles =\n      graphIdToResourcesFiles ||\n      ((graphId: string) => [`tests/definitions/resources/_${graphId}.json`]);\n    this.resourceIdToFile =\n      resourceIdToFile ||\n      ((resourceId: string) => `tests/definitions/resources/${resourceId}.json`);\n    this.collectionIdToFile =\n      collectionIdToFile ||\n      ((collectionId: string) => `tests/definitions/collections/${collectionId}.json`);\n  }\n\n  async getGraphs(): Promise<GraphResult> {\n    const fs = await this.fs;\n    const response = await fs.promises.readFile(this.allGraphFile(), \"utf8\");\n    return new GraphResult(await JSON.parse(response));\n  }\n\n  async getGraph(graph: StaticGraphMeta): Promise<StaticGraph | null> {\n    const fs = await this.fs;\n    const graphFile = this.graphToGraphFile ? this.graphToGraphFile(graph) : this.graphIdToGraphFile(graph.graphid);\n    if (!graphFile) {\n      return null;\n    }\n    const response = await fs.promises.readFile(\n      graphFile,\n      \"utf8\",\n    );\n    return await JSON.parse(response).graph[0];\n  }\n\n  async getGraphByIdOnly(graphId: string): Promise<StaticGraph | null> {\n    const fs = await this.fs;\n    const graphFile = this.graphIdToGraphFile(graphId);\n    if (!graphFile) {\n      return null;\n    }\n    const response = await fs.promises.readFile(\n      graphFile,\n      \"utf8\",\n    );\n    return await JSON.parse(response).graph[0];\n  }\n\n  async getResource(resourceId: string): Promise<StaticResource> {\n    const fs = await this.fs;\n    const source = this.resourceIdToFile(resourceId);\n    const response = await fs.promises.readFile(\n      source,\n      \"utf8\",\n    );\n    return JSON.parse(response).then((resource: StaticResource) => {\n      resource.__source = source;\n      return resource;\n    });\n  }\n\n  async getCollection(collectionId: string): Promise<StaticCollection> {\n    const fs = await this.fs;\n    const response = await fs.promises.readFile(\n      this.collectionIdToFile(collectionId),\n      \"utf8\",\n    );\n    return await JSON.parse(response);\n  }\n\n  async getResources(\n    graphId: string,\n    limit: number | null,\n  ): Promise<StaticResource[]> {\n    const fs = await this.fs;\n    const resources = [];\n    for (const file of this.graphIdToResourcesFiles(graphId)) {\n      const response = JSON.parse(await fs.promises.readFile(file, \"utf8\"));\n      const source = file;\n      // const read = fs.createReadStream(file, { encoding: \"utf8\" });\n      // let buffer = '';\n      // let bufferLength = 0;\n      // const response: IStringKeyedObject = await (new Promise(resolve => {\n      //   read.pipe(bfj.unpipe((error: string, data: string) => {\n      //     if (error) {\n      //       throw Error(error);\n      //     }\n      //     return data;\n      //   })).on('data', (data: string) => {\n      //     const bl = Math.floor(buffer.length / 1000);\n      //     bufferLength = bl;\n      //     buffer += data;\n      //   }).on('end', () => {\n      //     resolve(JSON.parse(buffer));\n      //   });\n      // }));\n\n      const resourceSet: StaticResource[] = response.business_data.resources.filter(\n        (resource: StaticResource) => graphId === resource.resourceinstance.graph_id\n      );\n      for (const resource of resourceSet) {\n        resource.__source = source;\n      }\n      resources.push(...(limit ? resourceSet.slice(0, limit) : resourceSet));\n      if (limit && resources.length > limit) {\n        break;\n      }\n    }\n    return resources;\n  }\n}\n\nconst archesClient = new ArchesClientRemote(\"http://localhost:8000\");\n\nexport {\n  archesClient,\n  ArchesClient,\n  ArchesClientRemoteStatic,\n  ArchesClientRemote,\n  ArchesClientLocal,\n  GraphResult,\n};\n","import { StaticCollection } from \"./static-types\";\nimport { ArchesClient, archesClient } from \"./client\";\n\nclass ReferenceDataManager {\n  archesClient: ArchesClient;\n  collections: Map<string, Promise<StaticCollection>>;\n\n  constructor(archesClient: ArchesClient) {\n    this.archesClient = archesClient;\n    this.collections = new Map<string, Promise<StaticCollection>>();\n  }\n\n  retrieveCollection(id: string): Promise<StaticCollection> {\n    let collection = this.collections.get(id);\n    if (collection !== undefined) {\n      return collection;\n    }\n    collection = this.archesClient\n      .getCollection(id)\n      .then((jsonData) => new StaticCollection(jsonData));\n    this.collections.set(id, collection);\n    return collection;\n  }\n}\n\nconst RDM = new ReferenceDataManager(archesClient);\n\nexport { StaticCollection, ReferenceDataManager, RDM };\n","import { archesClient, ArchesClient } from \"./client.ts\";\nimport {\n  StaticResource,\n  StaticResourceMetadata,\n} from \"./static-types\";\n\n// TODO: this does not currently cache, to avoid\n//  memory leaks.\nclass StaticStore {\n  archesClient: ArchesClient;\n  cache: Map<string, StaticResource | StaticResourceMetadata>;\n  cacheMetadataOnly: boolean;\n\n  constructor(archesClient: ArchesClient, cacheMetadataOnly: boolean = true) {\n    this.archesClient = archesClient;\n    this.cache = new Map();\n    this.cacheMetadataOnly = cacheMetadataOnly;\n  }\n\n  async getMeta(id: string, onlyIfCached: boolean = true): Promise<StaticResourceMetadata | null> {\n    if (this.cache.has(id)) {\n      const resource = this.cache.get(id);\n      if (resource instanceof StaticResource) {\n        return resource.resourceinstance;\n      }\n      return resource || null;\n    }\n\n    if (!onlyIfCached) {\n      const resource = await this.loadOne(id);\n      return resource.resourceinstance;\n    }\n    return null;\n  }\n\n  async* loadAll(\n    graphId: string,\n    limit: number | undefined = undefined,\n  ): AsyncIterable<StaticResource> {\n    const resourcesJSON: StaticResource[] =\n      await this.archesClient.getResources(graphId, limit || 0);\n    for (const resourceJSON of resourcesJSON.values()) {\n      const resource = new StaticResource(resourceJSON);\n      if (resource.resourceinstance.graph_id !== graphId) {\n        continue;\n      }\n      this.cache.set(\n        resource.resourceinstance.resourceinstanceid,\n        this.cacheMetadataOnly ? resource.resourceinstance : resource\n      );\n      yield resource;\n    }\n  }\n\n  async loadOne(id: string): Promise<StaticResource> {\n    if (this.cache.has(id)) {\n      const resource = this.cache.get(id);\n      if (resource instanceof StaticResource) {\n        return resource;\n      }\n    }\n\n    const resourceJSON: StaticResource =\n      await this.archesClient.getResource(id);\n    const resource = new StaticResource(resourceJSON);\n    if (this.cacheMetadataOnly) {\n      this.cache.set(id, this.cacheMetadataOnly ? resource.resourceinstance : resource);\n    }\n    return resource;\n  }\n}\n\nconst staticStore = new StaticStore(archesClient);\n\nexport { staticStore };\n","// The Widgets here are AGPLv3 from Arches DB setup.\n//\nimport {\n  StaticNode\n} from \"./static-types\";\n\nclass CardComponent {\n  id: string;\n  name: string;\n\n  constructor(id: string, name: string) {\n    this.id = id;\n    this.name = name;\n  }\n};\n\nclass Widget {\n  id: string;\n  name: string;\n  datatype: string;\n  defaultConfig: string; // as JSON - always need a fresh copy\n\n  constructor(id: string, name: string, datatype: string, defaultConfig: string) {\n    this.id = id;\n    this.name = name;\n    this.datatype = datatype;\n    this.defaultConfig = defaultConfig;\n  }\n\n  getDefaultConfig(): {[key: string]: any} {\n    return JSON.parse(this.defaultConfig);\n  }\n};\nconst DEFAULT_CARD_COMPONENT = new CardComponent(\n  'f05e4d3a-53c1-11e8-b0ea-784f435179ea',\n  'Default Card'\n);\nconst _WIDGET_VALUES: [string, string, string, string][] = [\n    ['10000000-0000-0000-0000-000000000001', 'text-widget', 'string', '{ \"placeholder\": \"Enter text\", \"width\": \"100%\", \"maxLength\": null}'],\n    ['10000000-0000-0000-0000-000000000002', 'concept-select-widget', 'concept', '{ \"placeholder\": \"Select an option\", \"options\": [] }'],\n    ['10000000-0000-0000-0000-000000000012', 'concept-multiselect-widget', 'concept-list', '{ \"placeholder\": \"Select an option\", \"options\": [] }'],\n    ['10000000-0000-0000-0000-000000000015', 'domain-select-widget', 'domain-value', '{ \"placeholder\": \"Select an option\" }'],\n    ['10000000-0000-0000-0000-000000000016', 'domain-multiselect-widget', 'domain-value-list', '{ \"placeholder\": \"Select an option\" }'],\n    ['10000000-0000-0000-0000-000000000003', 'switch-widget', 'boolean', '{ \"subtitle\": \"Click to switch\"}'],\n    ['10000000-0000-0000-0000-000000000004', 'datepicker-widget', 'date', `{\n      \"placeholder\": \"Enter date\",\n      \"viewMode\": \"days\",\n      \"dateFormat\": \"YYYY-MM-DD\",\n      \"minDate\": false,\n      \"maxDate\": false\n    }`],\n    ['10000000-0000-0000-0000-000000000005', 'rich-text-widget', 'string', '{}'],\n    ['10000000-0000-0000-0000-000000000006', 'radio-boolean-widget', 'boolean', '{\"trueLabel\": \"Yes\", \"falseLabel\": \"No\"}'],\n    ['10000000-0000-0000-0000-000000000007', 'map-widget', 'geojson-feature-collection', `{\n      \"basemap\": \"streets\",\n      \"geometryTypes\": [{\"text\":\"Point\", \"id\":\"Point\"}, {\"text\":\"Line\", \"id\":\"Line\"}, {\"text\":\"Polygon\", \"id\":\"Polygon\"}],\n      \"overlayConfigs\": [],\n      \"overlayOpacity\": 0.0,\n      \"geocodeProvider\": \"MapzenGeocoder\",\n      \"zoom\": 0,\n      \"maxZoom\": 20,\n      \"minZoom\": 0,\n      \"centerX\": 0,\n      \"centerY\": 0,\n      \"pitch\": 0.0,\n      \"bearing\": 0.0,\n      \"geocodePlaceholder\": \"Search\",\n      \"geocoderVisible\": true,\n      \"featureColor\": null,\n      \"featureLineWidth\": null,\n      \"featurePointSize\": null\n    }`],\n    ['10000000-0000-0000-0000-000000000008', 'number-widget', 'number', '{ \"placeholder\": \"Enter number\", \"width\": \"100%\", \"min\":\"\", \"max\":\"\"}'],\n    ['10000000-0000-0000-0000-000000000009', 'concept-radio-widget', 'concept', '{ \"options\": [] }'],\n    ['10000000-0000-0000-0000-000000000013', 'concept-checkbox-widget', 'concept-list', '{ \"options\": [] }'],\n    ['10000000-0000-0000-0000-000000000017', 'domain-radio-widget', 'domain-value', '{}'],\n    ['10000000-0000-0000-0000-000000000018', 'domain-checkbox-widget', 'domain-value-list', '{}'],\n    ['10000000-0000-0000-0000-000000000019', 'file-widget', 'file-list', '{\"acceptedFiles\": \"\", \"maxFilesize\": \"200\"}'],\n];\nconst WIDGETS: {[key: string]: Widget} = Object.fromEntries(_WIDGET_VALUES.map((constructor: [string, string, string, string]): [string, Widget] => [constructor[1], new Widget(...constructor)]));\n\nfunction getDefaultWidgetForNode(node: StaticNode, preferences: {[key: string]: string} = {}) {\n  const datatype = node.datatype;\n\n  // For example, you can use this to prefer a rich-text field.\n  if (datatype in preferences) {\n    return WIDGETS[preferences[datatype]];\n  }\n\n  if (datatype === 'semantic') {\n    throw Error(\"Not default widget for a semantic node\");\n  } else if (datatype === 'number') {\n    return WIDGETS['number-widget'];\n  } else if (datatype === 'string') {\n    return WIDGETS['text-widget'];\n  } else if (datatype === 'concept') {\n    return WIDGETS['concept-select-widget'];\n  } else if (datatype === 'concept-list') {\n    return WIDGETS['concept-multiselect-widget'];\n  } else if (datatype === 'domain-value') {\n    return WIDGETS['domain-select-widget'];\n  } else if (datatype === 'domain-value-list') {\n    return WIDGETS['domain-multiselect-widget'];\n  } else if (datatype === 'geojson-feature-collection') {\n    return WIDGETS['geojson-feature-collection'];\n  } else if (datatype === 'boolean') {\n    return WIDGETS['switch-widget'];\n  } else if (datatype === 'date') {\n    return WIDGETS['datepicker-widget'];\n  } else {\n    throw Error(`No default widget for ${datatype} datatype - perhaps you could supply a manual preference`);\n  }\n}\n\nexport { DEFAULT_CARD_COMPONENT, CardComponent, getDefaultWidgetForNode, Widget };\n","import { INodeConfig } from './interfaces';\nimport { StaticNode, StaticDomainValue } from './static-types';\n\ninterface IStaticNodeConfigDomain {\n  i18n_config: {[key: string]: string}\n  options: StaticDomainValue[];\n};\n\ninterface IStaticNodeConfigBoolean {\n  i18n_properties: string[]\n  falseLabel: {[key: string]: string}\n  trueLabel: {[key: string]: string}\n};\n\ninterface IStaticNodeConfigConcept {\n  rdmCollection: string\n};\n\nclass StaticNodeConfigBoolean implements IStaticNodeConfigBoolean, INodeConfig {\n  i18n_properties: string[]\n  falseLabel: {[key: string]: string}\n  trueLabel: {[key: string]: string}\n\n  constructor(jsonData: IStaticNodeConfigBoolean) {\n    this.i18n_properties = jsonData.i18n_properties;\n    this.falseLabel = jsonData.falseLabel;\n    this.trueLabel = jsonData.trueLabel;\n  }\n}\n\nclass StaticNodeConfigConcept implements IStaticNodeConfigConcept, INodeConfig {\n  rdmCollection: string;\n\n  constructor(jsonData: IStaticNodeConfigConcept) {\n    this.rdmCollection = jsonData.rdmCollection;\n  }\n}\n\nclass StaticNodeConfigDomain implements IStaticNodeConfigDomain, INodeConfig {\n  i18n_config: {[key: string]: string}\n  options: StaticDomainValue[];\n\n  getSelected() {\n    return this.options.find(option => option.selected);\n  }\n\n  valueFromId(id: string) {\n    return this.options.find(option => option.id == id);\n  }\n\n  constructor(jsonData: IStaticNodeConfigDomain) {\n    this.i18n_config = jsonData.i18n_config;\n    this.options = jsonData.options;\n    if (this.options) {\n      this.options = this.options.map(sdv => {\n        if (!(sdv instanceof StaticDomainValue)) {\n          return new StaticDomainValue(sdv);\n        }\n        return sdv;\n      });\n    }\n  }\n}\n\nclass NodeConfigManager {\n  static _cache: Map<string, INodeConfig | null>\n  cache: Map<string, INodeConfig | null>\n\n  constructor(cache: Map<string, INodeConfig | null> | undefined = undefined) {\n    if (!cache) {\n      cache = NodeConfigManager._cache || new Map();\n    }\n    this.cache = cache;\n  }\n\n  retrieve(node: StaticNode) {\n    if (this.cache.has(node.nodeid)) {\n      return this.cache.get(node.nodeid);\n    }\n    let nodeConfig = null;\n    switch (node.datatype) {\n      case \"boolean\":\n        // @ts-expect-error node.config is not typed\n        nodeConfig = new StaticNodeConfigBoolean(node.config);\n        break;\n      case \"domain-value-list\":\n      case \"domain-value\":\n        // @ts-expect-error node.config is not typed\n        nodeConfig = new StaticNodeConfigDomain(node.config);\n        break;\n      default:\n    };\n    this.cache.set(node.nodeid, nodeConfig);\n    return nodeConfig;\n  }\n};\n\nconst nodeConfigManager = new NodeConfigManager();\n\nexport { nodeConfigManager, StaticNodeConfigDomain, StaticNodeConfigBoolean, StaticNodeConfigConcept };\n","import {\n  IStringKeyedObject,\n  IInstanceWrapper,\n  IModelWrapper,\n  IViewModel,\n  IPseudo,\n  IGraphManager,\n  IRIVM,\n  GetMeta,\n} from \"./interfaces.ts\";\nimport { PseudoValue, PseudoList } from \"./pseudos\";\nimport { RDM } from \"./rdm\";\nimport {\n  StaticNodeConfigDomain,\n  StaticNodeConfigBoolean,\n} from './nodeConfig';\nimport {\n  StaticDomainValue,\n  StaticTile,\n  StaticNode,\n  StaticValue,\n  StaticConcept,\n  StaticResource,\n  StaticResourceReference\n} from \"./static-types\";\nimport { AttrPromise } from \"./utils\";\nimport { nodeConfigManager } from './nodeConfig';\n\nconst TILE_LOADING_ERRORS = null; // \"suppress\" or \"silence\" TODO: enum\n\nconst DEFAULT_LANGUAGE = \"en\";\n\nclass ViewContext {\n  graphManager: IGraphManager | undefined\n};\nconst viewContext = new ViewContext();\n\nfunction tileLoadingError(reason: string, exc: any) {\n  if (TILE_LOADING_ERRORS !== \"silence\") {\n    console.error(reason, exc);\n    if (TILE_LOADING_ERRORS !== \"suppress\") {\n      throw exc;\n    }\n  }\n}\n\nclass ValueList<T extends IRIVM<T>> {\n  values: Map<string, any>;\n  wrapper: IInstanceWrapper<T>;\n  tiles: StaticTile[] | null;\n  promises: Map<string, boolean | Promise<boolean | IViewModel>>;\n  writeLock: null | Promise<boolean | IViewModel>;\n\n  constructor(\n    values: Map<string, any>,\n    allNodegroups: Map<string, boolean>,\n    wrapper: IInstanceWrapper<T>,\n    tiles: StaticTile[] | null,\n  ) {\n    this.values = values;\n    this.wrapper = wrapper;\n    this.tiles = tiles;\n    this.promises = allNodegroups;\n    this.writeLock = null;\n  }\n\n  async get(key: string) {\n    return this.retrieve(key, this.values.get(key), true);\n  }\n\n  set(key: string, value: any) {\n    this.values.set(key, value);\n  }\n\n  async has(key: string) {\n    await this.retrieve(key, null);\n    return this.values.has(key);\n  }\n\n  async retrieve(key: string, dflt: any = null, raiseError: boolean = false) {\n    let result: any = this.values.get(key);\n    if (Array.isArray(result)) {\n      return result;\n    }\n    const node = this.wrapper.model.getNodeObjectsByAlias().get(key);\n\n    result = await result;\n\n    if (!node) {\n      throw Error(`This key ${key} has no corresponding node`);\n    }\n    const nodegroupId = node.nodegroup_id || '';\n    const promise = node ? await this.promises.get(nodegroupId) : false;\n    // When an unloaded node is found, the whole nodegroup is loaded.\n    // The promises member ensures that no other node in the nodegroup\n    // triggers the same nodegroup load. Note that there is _also_ the\n    // individual node promise, which allows any operation to wait for\n    // just that node to finish and resolve in to the approach pseudo\n    // even if `retrieve` is not used (e.g. allEntries).\n    // _However_, this means that allEntries will not see a promise for\n    // individual nodes in the nodegroup that are _not_ the first\n    // requested, until the first requested resolves and updates the\n    // values map for all nodes in the nodegroup.\n    if (promise === false) {\n      // FIXME: the evidence is that this is not successfully functioning as\n      // a resource-wide lock...\n      await this.writeLock;\n      if (this.wrapper.resource) {\n        // Will KeyError if we do not have it.\n        const node = this.wrapper.model.getNodeObjectsByAlias().get(key);\n        if (node === undefined) {\n          throw Error(\n            \"Tried to retrieve a node key that does not exist on this resource\",\n          );\n        }\n        const values = new Map([...this.values.entries()]);\n        const promise: Promise<IViewModel | boolean> = new Promise((resolve) => {\n           return this.wrapper\n            .ensureNodegroup(\n              values,\n              this.promises,\n              nodegroupId,\n              this.wrapper.model.getNodeObjects(),\n              this.wrapper.model.getNodegroupObjects(),\n              this.wrapper.model.getEdges(),\n              false,\n              this.tiles,\n              true\n            ).then(async ([ngValues]) => {\n              let original = false;\n              const processValue = (k: string, concreteValue: any) => {\n                if (key === k) {\n                  // Other methods may be waiting on this specific\n                  // value to resolve.\n                  original = concreteValue;\n                }\n                // In theory, this should never happen when this.values[k] is\n                // not false, as the resource-wide write lock means that no other nodegroup\n                // can write. This _is_ happening however. In theory, once set, the\n                // value will be a list, so passed by reference, and so should not\n                // undo and changes that happened concurrently.\n                if (concreteValue !== false) {\n                  this.values.set(k, concreteValue);\n                }\n              }\n              return Promise.all([...ngValues.entries()].map(([k, value]) => {\n                if (value instanceof Promise) {\n                  return value.then((concreteValue: any) => processValue(k, concreteValue));\n                }\n                processValue(k, value);\n              })).then(() => {\n                resolve(original);\n              });\n            });\n        });\n        // No writes should happen until this is done\n        this.writeLock = promise;\n        // No reads from this nodegroup should happen [legacy comment]\n        this.promises.set(nodegroupId, promise);\n        // Other readers are welcome to wait for this nodegroup's read\n        this.values.set(key, promise);\n        await promise;\n        this.promises.set(nodegroupId, true);\n      } else {\n        this.values.delete(key);\n      }\n      result = await this.values.get(key);\n    }\n    result = await result;\n    if (result === undefined || result === false) {\n      if (raiseError) {\n        throw Error(`Unset key ${key}`);\n      } else {\n        return dflt;\n      }\n    }\n    return result;\n  }\n\n  async setDefault(key: string, value: any) {\n    const newValue = await this.retrieve(key, value, false);\n    this.values.set(key, newValue);\n    return newValue;\n  }\n}\n\nclass ConceptListCacheEntry implements IStringKeyedObject {\n  [key: string]: any;\n  datatype: string = 'concept-list';\n  _: ConceptValueCacheEntry[];\n  meta: {[key: string]: any};\n\n  constructor({meta, _}: {meta: IStringKeyedObject | undefined, _: ConceptValueCacheEntry[]}) {\n    this._ = _.map(instance => {\n      if (instance instanceof ConceptValueCacheEntry) {\n        return instance;\n      } else if (instance) {\n        return new ConceptValueCacheEntry(instance);\n      }\n      return null;\n    }).filter(cvce => cvce !== null);\n    this.meta = meta || {};\n  }\n}\n\nclass ConceptValueCacheEntry implements IStringKeyedObject {\n  [key: string]: any\n  datatype: string = 'concept';\n  id: string;\n  value: string;\n  conceptId: string | null;\n  meta: {[key: string]: any};\n\n  constructor({meta, id, value, conceptId}: {meta: IStringKeyedObject | undefined, id: string, value: string, conceptId: string | null}) {\n    this.id = id;\n    this.value = value;\n    this.conceptId = conceptId;\n    this.meta = meta || {};\n  }\n}\n\nclass ResourceInstanceListCacheEntry implements IStringKeyedObject {\n  [key: string]: any;\n  datatype: string = 'resource-instance-list';\n  _: ResourceInstanceCacheEntry[];\n  meta: {[key: string]: any};\n\n  constructor({meta, _}: {meta: IStringKeyedObject | undefined, _: ResourceInstanceCacheEntry[]}) {\n    this._ = _.map(instance => {\n      if (instance instanceof ResourceInstanceCacheEntry) {\n        return instance;\n      }\n      return new ResourceInstanceCacheEntry(instance);\n    });\n    this.meta = meta || {};\n  }\n}\n\nclass ResourceInstanceCacheEntry implements IStringKeyedObject {\n  [key: string]: any\n  datatype: string = 'resource-instance';\n  id: string;\n  type: string;\n  graphId: string;\n  title: string | null;\n  meta: {[key: string]: any};\n\n  constructor({meta, id, type, graphId, title}: {meta: IStringKeyedObject | undefined, id: string, type: string, graphId: string, title: string | null}) {\n    this.id = id;\n    this.type = type;\n    this.graphId = graphId;\n    this.meta = meta || {};\n    this.title = this.meta.title || title;\n  }\n}\n\nclass ResourceInstanceListViewModel extends Array implements IViewModel {\n  _: IViewModel | Promise<IViewModel> | undefined = undefined;\n  __parentPseudo: IPseudo | undefined;\n\n  describeField = () => (this.__parentPseudo ? this.__parentPseudo.describeField() : null)\n  describeFieldGroup = () => (this.__parentPseudo ? this.__parentPseudo.describeFieldGroup() : null)\n  _value: Promise<(ResourceInstanceViewModel<any> | null)[]> | null = null;\n\n  async forJson() {\n    const value = await this._value;\n    return value ? value.map((v) => (v ? v.forJson() : null)) : null;\n  }\n\n  async __forJsonCache(getMeta: GetMeta): Promise<ResourceInstanceListCacheEntry> {\n    return new ResourceInstanceListCacheEntry({\n      meta: getMeta ? await getMeta(this) : getMeta,\n      _: await Promise.all([...this.values()].map(async (rivmPromise: Promise<ResourceInstanceViewModel<any>>) => {\n        const rivm = await rivmPromise;\n        return await rivm.__forJsonCache(getMeta)\n      }))\n    });\n  }\n\n  static async __create(\n    tile: StaticTile,\n    node: StaticNode,\n    value: any,\n    cacheEntry: ResourceInstanceListCacheEntry | null = null\n  ): Promise<ResourceInstanceListViewModel | null> {\n    const nodeid = node.nodeid;\n    let val: (ResourceInstanceViewModel<any> | null | Promise<ResourceInstanceViewModel<any> | null>)[];\n    if (tile) {\n      if (!tile.data.has(nodeid)) {\n        tile.data.set(nodeid, null);\n      }\n      if (value !== null) {\n        tile.data.set(nodeid, []);\n        if (!Array.isArray(value)) {\n          throw Error(\n            `Cannot set an (entire) resource list value on node ${nodeid} except via an array: ${JSON.stringify(value)}`,\n          );\n        }\n        val = value.map((v, i) => {\n          if (v instanceof ResourceInstanceViewModel) {\n            return v;\n          }\n          return ResourceInstanceViewModel.__create(tile, node, v, cacheEntry && cacheEntry._[i] ? cacheEntry._[i] : null);\n        });\n        Promise.all(\n          val.map(async (c) => {\n            const v = await c;\n            return v ? (await v).id : null;\n          }),\n        ).then((ids) => {\n          tile.data.set(nodeid, ids.map(id => {\n            return {\n              resourceId: id\n            };\n          }));\n          return ids;\n        });\n        value = val;\n      }\n    } else {\n      value = [];\n    }\n\n    if (!tile || !value) {\n      return null;\n    }\n    const str = new ResourceInstanceListViewModel(...value);\n    return str;\n  }\n\n  async __asTileData() {\n    return this._value ? await this._value : null;\n  }\n}\n\nclass ResourceInstanceViewModel<RIVM extends IRIVM<RIVM>> implements IStringKeyedObject {\n  [key: string | symbol]: any;\n  _: IViewModel | Promise<IViewModel> | undefined = undefined;\n  $: IInstanceWrapper<RIVM> | null;\n  __: IModelWrapper<RIVM> | null;\n  __parentPseudo: IPseudo | undefined = undefined;\n  __cacheEntry: ResourceInstanceCacheEntry | null = null;\n  id: string;\n  then: undefined;\n  [Symbol.toPrimitive]: undefined;\n\n  gm: IGraphManager | undefined;\n\n  toString(): string {\n    if (!this.__) {\n      return `[Resource:${this.id}]`;\n    }\n    return `[${this.__.wkrm.modelClassName}:${this.id ?? \"-\"}]`;\n  }\n\n  async __has(key: string): Promise<boolean | undefined> {\n    // There is a catch here, that because we lazy-load, we do not\n    // know, hence three possible return values.\n    if (!this.$) {\n      return undefined;\n    }\n    return (await this.$.getRootViewModel() || new Map()).__has(key);\n  }\n\n  async __asTileData(): Promise<IStringKeyedObject> {\n    return {\n      resourceId: this.id\n    };\n  }\n\n  async __forJsonCache(getMeta: GetMeta): Promise<ResourceInstanceCacheEntry> {\n    // TODO should we re-use the cacheEntry and rely on it being expired correctly?\n    let wrapper: IModelWrapper<RIVM>;\n    if (!this.__) {\n      if (this.__cacheEntry) {\n        return this.__cacheEntry;\n      } else {\n        [, wrapper] = await this.retrieve();\n      }\n    } else {\n      wrapper = this.__;\n    }\n    this.__cacheEntry = new ResourceInstanceCacheEntry({\n      meta: getMeta ? await getMeta(this) : undefined,\n      id: this.id,\n      type: wrapper.wkrm.modelClassName,\n      graphId: wrapper.wkrm.graphId,\n      title: null,\n    });\n    return this.__cacheEntry;\n  }\n\n  async forJson(cascade: boolean=false) {\n    let jsonData: StaticResourceReference;\n    if (!cascade && this.__cacheEntry) {\n      jsonData = {\n        type: this.__cacheEntry.type,\n        graphId: this.__cacheEntry.graphId,\n        id: this.__cacheEntry.id,\n        title: this.__cacheEntry.title || undefined,\n        meta: this.__cacheEntry.meta || undefined,\n        root: null\n      };\n    } else if (this.__) {\n      jsonData = {\n        type: this.__.wkrm.modelClassName,\n        graphId: this.__.wkrm.graphId,\n        id: this.id,\n        title: undefined,\n        meta: undefined,\n        root: null\n      };\n    } else {\n      jsonData = {\n        type: \"(unknown)\",\n        graphId: \"\",\n        id: this.id,\n        title: undefined,\n        meta: undefined,\n        root: null\n      };\n    }\n    const basic = new StaticResourceReference(jsonData);\n    if (cascade) {\n      if (!this.$) {\n        await this.retrieve();\n        if (!this.$) {\n          throw Error(\"Could not retrieve resource\");\n        }\n      }\n      const root = await this.$.getRootViewModel();\n      basic.root = await root.forJson();\n    }\n    return basic;\n  }\n\n  async retrieve(): Promise<[IInstanceWrapper<RIVM>, IModelWrapper<RIVM>]> {\n    let iw: IInstanceWrapper<RIVM>;\n    let mw: IModelWrapper<RIVM>;\n    if (viewContext.graphManager) {\n      const replacement = await viewContext.graphManager.getResource(this.id, true);\n\n      // @ts-expect-error We cannot guarantee this resource is the right type...\n      iw = replacement.$;\n      // @ts-expect-error We cannot guarantee this resource is the right type...\n      mw = replacement.__;\n    } else {\n      throw Error(\"Cannot traverse resource relationships without a GraphManager\");\n    }\n    this.$ = iw;\n    this.__ = mw;\n    return [iw, mw];\n  }\n\n  constructor(\n    id: string,\n    modelWrapper: IModelWrapper<RIVM> | null,\n    instanceWrapperFactory: ((\n      rivm: RIVM,\n    ) => IInstanceWrapper<RIVM>) | null,\n    cacheEntry: object | null,\n  ) {\n    this.id = id;\n    // @ts-expect-error I believe some deep type magic would be required to\n    // convince TS that `this` is a valid RIVM.\n    this.$ = instanceWrapperFactory ? instanceWrapperFactory(this) : null;\n    this.__ = modelWrapper;\n    if (cacheEntry instanceof ResourceInstanceCacheEntry) {\n      this.__cacheEntry = cacheEntry;\n    }\n\n    return new Proxy(this, {\n      // NOTE: set should not return a promise, so could cause a race\n      // condition with a subsequent read.\n      // @ts-expect-error Returning a promise for set\n      set: async (object: ResourceInstanceViewModel<RIVM>, key, value): Promise<boolean> => {\n        const k: string = typeof key === 'symbol' ? key.description || '' : key;\n        if (key in object) {\n          object[key] = value;\n        } else if (k in object || k.startsWith('__')) {\n          object[k] = value;\n        } else {\n          if (!object.$) {\n            await this.retrieve();\n            if (!object.$) {\n              throw Error(\"Could not retrieve resource\");\n            }\n          }\n          object.$.setOrmAttribute(k, value);\n        }\n        return true;\n      },\n      get: (object: ResourceInstanceViewModel<RIVM>, key) => {\n        const k: string = typeof key === 'symbol' ? key.description || '' : key;\n        if (key in object) {\n          return object[key];\n        } else if (k in object || k.startsWith('__')) {\n          return object[k];\n        }\n        return new AttrPromise(async (resolve) => {\n          if (!object.$) {\n            await this.retrieve();\n            if (!object.$) {\n              throw Error(\"Could not retrieve resource\");\n            }\n          }\n          return object.$.getOrmAttribute(k).then((v) => {\n            return resolve(v);\n          });\n        });\n      },\n    });\n  }\n\n  static async __create(\n    tile: StaticTile,\n    node: StaticNode,\n    value: any,\n    cacheEntry: ResourceInstanceCacheEntry | null\n  ): Promise<ResourceInstanceViewModel<any> | null> {\n    const nodeid = node.nodeid;\n    let val: string | null = value;\n    if (tile) {\n      if (!tile.data.has(nodeid)) {\n        tile.data.set(nodeid, null);\n      }\n      if (value !== null) {\n        if (!value && !(value instanceof StaticResource) && !(value instanceof StaticResourceReference)) {\n          val = null;\n        } else if (value instanceof Promise) {\n          return value.then((value) => {\n            return ResourceInstanceViewModel.__create(tile, node, value, cacheEntry);\n          });\n        } else if (typeof value == \"string\") {\n          if (\n            /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.exec(\n              value,\n            )\n          ) {\n            val = value;\n          } else {\n            throw Error(\n              `Set resource instances using id, not strings in node ${node.alias}: ${value}`,\n            );\n          }\n        } else if (value instanceof Object && value.resourceId) {\n          val = value.resourceId;\n        } else if (value instanceof Array && value.length < 2 ) {\n          if (value.length == 1) {\n            return ResourceInstanceViewModel.__create(tile, node, value[0], cacheEntry);\n          }\n        } else {\n          throw Error(\"Could not set resource instance from this data\");\n        }\n\n        tile.data.set(nodeid, val ? [{resourceId: val}] : null);\n      }\n    }\n\n    if (!tile || !val) {\n      return null;\n    }\n    const str = new ResourceInstanceViewModel(val, null, null, cacheEntry);\n    return str;\n  }\n}\n\nclass FileListViewModel extends Array implements IViewModel {\n  _: IViewModel | Promise<IViewModel> | undefined = undefined;\n  __parentPseudo: IPseudo | undefined;\n\n  describeField = () => (this.__parentPseudo ? this.__parentPseudo.describeField() : null)\n  describeFieldGroup = () => (this.__parentPseudo ? this.__parentPseudo.describeFieldGroup() : null)\n  _value: Promise<(ConceptValueViewModel | null)[]> | null = null;\n\n  async forJson() {\n    const value = await this._value;\n    return value ? value.map((v) => (v ? v.forJson() : null)) : null;\n  }\n\n  async __forJsonCache(): Promise<null> {\n    return null;\n  }\n\n  static async __create(\n    tile: StaticTile,\n    node: StaticNode,\n    value: any,\n  ): Promise<FileListViewModel> {\n    const nodeid = node.nodeid;\n    let val: (ConceptValueViewModel | Promise<ConceptValueViewModel | null> | null)[] = [];\n    if (!tile.data.has(nodeid)) {\n      tile.data.set(nodeid, null);\n    }\n    if (value !== null) {\n      tile.data.set(nodeid, []);\n      if (!Array.isArray(value)) {\n        throw Error(\n          `Cannot set an (entire) file list value on node ${nodeid} except via an array: ${JSON.stringify(value)}`,\n        );\n      }\n      val = value.map((c) => {\n        return c;\n      });\n      Promise.all(val).then((vals) => {\n        Promise.all(\n          vals.map(async (c) => {\n            const v = await c;\n            return v ? (await v.getValue()).id : null;\n          })\n        ).then((ids) => {\n          tile.data.set(nodeid, ids);\n        });\n      });\n      value = val;\n    } else {\n      value = [];\n    }\n\n    const str = new FileListViewModel(...value);\n    return str;\n  }\n\n  async __asTileData() {\n    return this._value ? await this._value : null;\n  }\n}\n\nclass ConceptListViewModel extends Array implements IViewModel {\n  _: IViewModel | Promise<IViewModel> | undefined = undefined;\n  __parentPseudo: IPseudo | undefined;\n\n  describeField = () => (this.__parentPseudo ? this.__parentPseudo.describeField() : null)\n  describeFieldGroup = () => (this.__parentPseudo ? this.__parentPseudo.describeFieldGroup() : null)\n  _value: Promise<(ConceptValueViewModel | null)[]> | null = null;\n\n  async forJson() {\n    const value = await this._value;\n    return value ? value.map((v) => (v ? v.forJson() : null)) : null;\n  }\n\n  async __forJsonCache(getMeta: GetMeta): Promise<ConceptListCacheEntry> {\n    return new ConceptListCacheEntry({\n      meta: getMeta ? await getMeta(this) : getMeta,\n      _: (await Promise.all([...this.values()].map(async (rivmPromise: Promise<ConceptValueViewModel>) => {\n        const rivm = await rivmPromise;\n        if (rivm) {\n          return await rivm.__forJsonCache(getMeta)\n        }\n      }))).filter(val => val !== undefined)\n    });\n  }\n  static async __create(\n    tile: StaticTile,\n    node: StaticNode,\n    value: any,\n    cacheEntry: ConceptListCacheEntry | null = null\n  ): Promise<ConceptListViewModel> {\n    const nodeid = node.nodeid;\n    let val: (ConceptValueViewModel | Promise<ConceptValueViewModel | null> | null)[] = [];\n    if (!tile.data.has(nodeid)) {\n      tile.data.set(nodeid, null);\n    }\n    if (value !== null) {\n      tile.data.set(nodeid, []);\n      if (!Array.isArray(value)) {\n        throw Error(\n          `Cannot set an (entire) concept list value on node ${nodeid} except via an array: ${JSON.stringify(value)}`,\n        );\n      }\n      val = value.map((c, i) => {\n        if (c instanceof ConceptValueViewModel) {\n          return c;\n        }\n        return ConceptValueViewModel.__create(tile, node, c, cacheEntry && cacheEntry._[i] ? cacheEntry._[i] : null);\n      });\n      Promise.all(val).then((vals) => {\n        Promise.all(\n          vals.map(async (c) => {\n            const v = await c;\n            return v ? (await v.getValue()).id : null;\n          })\n        ).then((ids) => {\n          tile.data.set(nodeid, ids);\n        });\n      });\n      value = val;\n    } else {\n      value = [];\n    }\n\n    const str = new ConceptListViewModel(...value);\n    return str;\n  }\n\n  async __asTileData() {\n    return this._value ? await this._value : null;\n  }\n}\n\nclass DomainValueListViewModel extends Array implements IViewModel {\n  _: IViewModel | Promise<IViewModel> | undefined = undefined;\n  __parentPseudo: PseudoValue<any> | undefined;\n\n  describeField = () => (this.__parentPseudo ? this.__parentPseudo.describeField() : null)\n  describeFieldGroup = () => (this.__parentPseudo ? this.__parentPseudo.describeFieldGroup() : null)\n  _value: Promise<(DomainValueViewModel | null)[]> | null = null;\n\n  async forJson() {\n    const value = await this._value;\n    return value ? value.map((v) => (v ? v.forJson() : null)) : null;\n  }\n\n  // No point in caching something that is on the graph.\n  __forJsonCache(): null {\n    return null;\n  }\n\n  static async __create(\n    tile: StaticTile,\n    node: StaticNode,\n    value: any,\n  ): Promise<DomainValueListViewModel> {\n    const nodeid = node.nodeid;\n    let val: (DomainValueViewModel | Promise<DomainValueViewModel | null> | null)[];\n    if (tile) {\n      if (!tile.data.has(nodeid)) {\n        tile.data.set(nodeid, null);\n      }\n      if (value !== null) {\n        tile.data.set(nodeid, []);\n        if (!Array.isArray(value)) {\n          throw Error(\n            `Cannot set an (entire) domain list value on node ${nodeid} except via an array: ${JSON.stringify(value)}`,\n          );\n        }\n        val = value.map((c) => {\n          if (c instanceof DomainValueViewModel) {\n            return c;\n          }\n          return DomainValueViewModel.__create(tile, node, c);\n        });\n        Promise.all(val).then(async (vals) => {\n          const ids = Promise.all(vals.map(async val => val === null ? val : (await val._value).id));\n          ids.then(ids => {\n            tile.data.set(nodeid, ids);\n          });\n        });\n      }\n    } else {\n      value = [];\n    }\n\n    const str = new DomainValueListViewModel(...value);\n    return str;\n  }\n\n  async __asTileData() {\n    const value = await this._value;\n    return value ?? null;\n  }\n}\n\n\n\nclass DomainValueViewModel extends String implements IViewModel {\n  _: IViewModel | Promise<IViewModel> | undefined = undefined;\n  __parentPseudo: PseudoValue<any> | undefined;\n\n  describeField = () => (this.__parentPseudo ? this.__parentPseudo.describeField() : null)\n  describeFieldGroup = () => (this.__parentPseudo ? this.__parentPseudo.describeFieldGroup() : null)\n\n  _value: StaticDomainValue | Promise<StaticDomainValue>;\n\n  constructor(value: StaticDomainValue) {\n    super(value.toString());\n    this._value = value;\n  }\n\n  async forJson(): Promise<StaticDomainValue> {\n    return this._value;\n  }\n\n  // No point in caching something that is on the graph.\n  __forJsonCache(): null {\n    return null;\n  }\n\n  getValue(): StaticDomainValue | Promise<StaticDomainValue> {\n    return this._value;\n  }\n\n  async lang(lang: string): Promise<string | undefined> {\n    return (await this._value).lang(lang);\n  }\n\n  static async __create(\n    tile: StaticTile,\n    node: StaticNode,\n    value: any,\n  ): Promise<DomainValueViewModel | null> {\n    const nodeid = node.nodeid;\n    let val: StaticDomainValue | null = value;\n    if (tile) {\n      if (!tile.data.has(nodeid)) {\n        tile.data.set(nodeid, null);\n      }\n      if (value !== null) {\n        if (!value && !(value instanceof StaticDomainValue)) {\n          val = null;\n        } else if (value instanceof Promise) {\n          return value.then((value) => {\n            return DomainValueViewModel.__create(tile, node, value);\n          });\n        } else if (typeof value == \"string\") {\n          if (\n            /^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i.exec(\n              value,\n            )\n          ) {\n            const config = nodeConfigManager.retrieve(node);\n            if (!config || !(config instanceof StaticNodeConfigDomain)) {\n              throw Error(`Cannot form domain value for ${node.nodeid} without config`);\n            }\n            val = config.valueFromId(value) || null;\n          } else {\n            throw Error(\n              \"Set domain values using values from domain lists, not strings\",\n            );\n          }\n        } else {\n          throw Error(\"Could not set domain value from this data\");\n        }\n\n        if (!(val instanceof Promise)) {\n          tile.data.set(nodeid, val ? val.id : null);\n        }\n      }\n    }\n\n    if (!tile || !val) {\n      return null;\n    }\n    const str = new DomainValueViewModel(val);\n    return str;\n  }\n\n  async __asTileData() {\n    const value = await this._value;\n    return value ? value.id : null;\n  }\n}\n\nclass ConceptValueViewModel extends String implements IViewModel {\n  _: IViewModel | Promise<IViewModel> | undefined = undefined;\n  __parentPseudo: IPseudo | undefined;\n\n  describeField = () => (this.__parentPseudo ? this.__parentPseudo.describeField() : null)\n  describeFieldGroup = () => (this.__parentPseudo ? this.__parentPseudo.describeFieldGroup() : null)\n\n  _value: StaticValue | Promise<StaticValue>;\n\n  constructor(value: StaticValue) {\n    super(value.value);\n    this._value = value;\n  }\n\n  async forJson(): Promise<StaticValue> {\n    return this._value;\n  }\n\n  async __forJsonCache(getMeta: GetMeta): Promise<ConceptValueCacheEntry> {\n    const value = await this._value;\n    return new ConceptValueCacheEntry({\n      meta: getMeta ? await getMeta(this) : undefined,\n      id: value.id,\n      value: value.value,\n      conceptId: value.__conceptId\n    });\n  }\n\n  getValue(): StaticValue | Promise<StaticValue> {\n    return this._value;\n  }\n\n  static async __create(\n    tile: StaticTile,\n    node: StaticNode,\n    value: any,\n    cacheEntry: ConceptValueCacheEntry | null\n  ): Promise<ConceptValueViewModel | null> {\n    const nodeid = node.nodeid;\n    const collectionId = node.config?.rdmCollection;\n    if (!collectionId) {\n      throw Error(`Node ${node.alias} (${node.nodeid}) missing rdmCollection in config`);\n    }\n    let val: StaticValue | null = value;\n    if (tile) {\n      if (!tile.data.has(nodeid)) {\n        tile.data.set(nodeid, null);\n      }\n      if (value !== null) {\n        if (value instanceof StaticConcept) {\n          if (value.getPrefLabel) {\n            val = value.getPrefLabel();\n          } else {\n            throw Error(\"Recognizing value as StaticConcept, but no getPrefLabel member\");\n          }\n        }\n        if (!value) {\n          val = null;\n        } else if (value instanceof StaticValue) {\n          // No change needed.\n        } else if (value instanceof Promise) {\n          return value.then((value) => {\n            return ConceptValueViewModel.__create(tile, node, value, cacheEntry);\n          });\n        } else if (typeof value == \"string\") {\n          if (\n            /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.exec(\n              value,\n            )\n          ) {\n            if (cacheEntry) {\n              val = new StaticValue({\n                id: cacheEntry.id,\n                value: cacheEntry.value,\n                __concept: null,\n                __conceptId: cacheEntry.conceptId,\n              }, cacheEntry.conceptId);\n              return new ConceptValueViewModel(val);\n            } else {\n              const collection = RDM.retrieveCollection(collectionId);\n              return collection.then((collection) => {\n                if (!collection.getConceptValue) {\n                  throw Error(`Collection ${collection.id} must be a StaticCollection here, not a key/value object`);\n                }\n                const val = collection.getConceptValue(value);\n\n                if (!val) {\n                  console.error(\"Could not find concept for value\", value, \"for\", node.alias, \"in collection\", collectionId);\n                }\n\n                tile.data.set(nodeid, val ? val.id : null);\n\n                if (!tile || !val) {\n                  return null;\n                }\n                const str = new ConceptValueViewModel(val);\n\n                return str;\n              });\n            }\n          } else {\n            throw Error(\n              `Set concepts using values from collections, not strings: ${value}`,\n            );\n          }\n        } else {\n          throw Error(\"Could not set concept from this data\");\n        }\n\n        if (!(val instanceof Promise)) {\n          if (!val) {\n            console.error(\"Could not find concept for value\", value, \"for\", node.alias, \"in collection\", collectionId);\n          }\n\n          tile.data.set(nodeid, val ? val.id : null);\n        }\n      }\n    }\n\n    if (!tile || !val) {\n      return null;\n    }\n    const str = new ConceptValueViewModel(val);\n    return str;\n  }\n\n  async __asTileData() {\n    const value = await this._value;\n    return value ? value.id : null;\n  }\n}\n\nclass DateViewModel extends Date implements IViewModel {\n  _: IViewModel | Promise<IViewModel> | undefined = undefined;\n  __parentPseudo: PseudoValue<any> | undefined;\n  __original: string;\n  then: undefined;\n\n  describeField = () => (this.__parentPseudo ? this.__parentPseudo.describeField() : null)\n  describeFieldGroup = () => (this.__parentPseudo ? this.__parentPseudo.describeFieldGroup() : null)\n\n  __forJsonCache(): null {\n    return null;\n  }\n\n  constructor(val: string) {\n    super(val);\n    this.__original = val;\n  }\n\n  static __create(\n    tile: StaticTile,\n    node: StaticNode,\n    value: any,\n  ): DateViewModel | Promise<DateViewModel | null> | null {\n    const nodeid = node.nodeid;\n    if (value instanceof Promise) {\n      return value.then((value) =>\n        DateViewModel.__create(tile, node, value),\n      );\n    }\n    if (tile) {\n      if (!tile.data.has(nodeid)) {\n        tile.data.set(nodeid, null);\n      }\n      if (value !== null) {\n        tile.data.set(nodeid, value);\n      }\n    }\n\n    let val: string | {[key: string]: string} | any = tile.data.get(nodeid);\n    // TODO: catch rendering issues - this workaround should be removed\n    // as it is overly tolerant of input issues.\n    if (typeof val == \"object\" && val['en'] !== undefined) {\n      val = val.en;\n    }\n    if (!tile || val === null || val === undefined || val === '') {\n      return null;\n    }\n    if (typeof val != \"string\") {\n      throw Error(\"Date should be a string\");\n    }\n    const str = new DateViewModel(val);\n    return str;\n  }\n\n  async forJson() {\n    try {\n      return this.toISOString();\n    } catch (e) {\n      console.warn(e);\n      return this.__original;\n    }\n  }\n\n  __asTileData() {\n    return this.toISOString();\n  }\n}\n\nclass GeoJSONViewModel implements IViewModel, IStringKeyedObject {\n  [key: string | symbol]: any;\n  _: IViewModel | Promise<IViewModel> | undefined = undefined;\n  __parentPseudo: PseudoValue<any> | undefined;\n  then: undefined;\n  [Symbol.toPrimitive]: undefined;\n\n  describeField = () => (this.__parentPseudo ? this.__parentPseudo.describeField() : null)\n  describeFieldGroup = () => (this.__parentPseudo ? this.__parentPseudo.describeFieldGroup() : null)\n\n  _value: { [key: string]: any };\n\n  __forJsonCache(): null {\n    return null;\n  }\n\n  constructor(jsonData: { [key: string]: any }) {\n    this._value = jsonData;\n    return new Proxy(this, {\n      get: (object: GeoJSONViewModel, key) => {\n        const k: string = typeof key === 'symbol' ? key.description || '' : key;\n        if (key in object) {\n          return object[key];\n        } else if (k in object) {\n          return object[k];\n        }\n        return this._value[k];\n      },\n      set: (object: GeoJSONViewModel, key, value) => {\n        const k: string = typeof key === 'symbol' ? key.description || '' : key;\n        if (key in object) {\n          object[key] = value;\n        } else if (k in object) {\n          object[k] = value;\n        } else {\n          this._value[k] = value;\n        }\n        return true;\n      },\n    });\n  }\n\n  static __create(\n    tile: StaticTile,\n    node: StaticNode,\n    value: any,\n  ): GeoJSONViewModel | Promise<GeoJSONViewModel | null> | null {\n    const nodeid = node.nodeid;\n    if (value instanceof Promise) {\n      return value.then((value) =>\n        GeoJSONViewModel.__create(tile, node, value),\n      );\n    }\n    if (tile) {\n      if (!tile.data.has(nodeid)) {\n        tile.data.set(nodeid, null);\n      }\n      if (value !== null) {\n        tile.data.set(nodeid, value);\n      }\n    }\n\n    const val = tile.data.get(nodeid);\n    if (!tile || val === null || val === undefined) {\n      return null;\n    }\n    if (!(val instanceof Object)) {\n      throw Error(\"GeoJSON should be a JSON object\");\n    }\n    const str = new GeoJSONViewModel(val);\n    return str;\n  }\n\n  async forJson() {\n    return await this._value;\n  }\n\n  __asTileData() {\n    return this._value;\n  }\n}\n\nclass StringTranslatedLanguage {\n  value: string = \"\"\n}\n\nclass EDTFViewModel extends String implements IViewModel {\n  _: IViewModel | Promise<IViewModel> | undefined = undefined;\n  __parentPseudo: PseudoValue<any> | undefined;\n\n  describeField = () => (this.__parentPseudo ? this.__parentPseudo.describeField() : null)\n  describeFieldGroup = () => (this.__parentPseudo ? this.__parentPseudo.describeFieldGroup() : null)\n\n  __forJsonCache(): null {\n    return null;\n  }\n\n  forJson(): string {\n    return this.toString();\n  }\n\n  static __create(\n    tile: StaticTile,\n    node: StaticNode,\n    value: any,\n  ): EDTFViewModel | Promise<EDTFViewModel | null> | null {\n    const nodeid = node.nodeid;\n    if (value instanceof Promise) {\n      return value.then((value) => EDTFViewModel.__create(tile, node, value));\n    }\n    if (tile) {\n      if (value !== null) {\n        tile.data.set(nodeid, value);\n      }\n    }\n\n    const val = tile.data.get(nodeid);\n    if (!tile || val === null || val === undefined) {\n      return null;\n    }\n    const string = new EDTFViewModel(val);\n    return string;\n  }\n\n  __asTileData() {\n    return `${this}`;\n  }\n}\n\nclass NonLocalizedStringViewModel extends String implements IViewModel {\n  _: IViewModel | Promise<IViewModel> | undefined = undefined;\n  __parentPseudo: PseudoValue<any> | undefined;\n\n  describeField = () => (this.__parentPseudo ? this.__parentPseudo.describeField() : null)\n  describeFieldGroup = () => (this.__parentPseudo ? this.__parentPseudo.describeFieldGroup() : null)\n\n  __forJsonCache(): null {\n    return null;\n  }\n\n  forJson(): string {\n    return this.toString();\n  }\n\n  static __create(\n    tile: StaticTile,\n    node: StaticNode,\n    value: any,\n  ): NonLocalizedStringViewModel | Promise<NonLocalizedStringViewModel | null> | null {\n    const nodeid = node.nodeid;\n    if (value instanceof Promise) {\n      return value.then((value) => NonLocalizedStringViewModel.__create(tile, node, value));\n    }\n    if (tile) {\n      if (value !== null) {\n        tile.data.set(nodeid, value);\n      }\n    }\n\n    const val = tile.data.get(nodeid);\n    if (!tile || val === null || val === undefined) {\n      return null;\n    }\n    const string = new NonLocalizedStringViewModel(val);\n    return string;\n  }\n\n  __asTileData() {\n    return `${this}`;\n  }\n}\n\nclass NumberViewModel extends Number implements IViewModel {\n  _: IViewModel | Promise<IViewModel> | undefined = undefined;\n  __parentPseudo: PseudoValue<any> | undefined;\n\n  describeField = () => (this.__parentPseudo ? this.__parentPseudo.describeField() : null)\n  describeFieldGroup = () => (this.__parentPseudo ? this.__parentPseudo.describeFieldGroup() : null)\n\n  toString(): string {\n    return `${this.valueOf()}`;\n  }\n\n  __forJsonCache(): null {\n    return null;\n  }\n\n  forJson(): number {\n    return this.valueOf();\n  }\n\n  static __create(\n    tile: StaticTile,\n    node: StaticNode,\n    value: any,\n  ): NumberViewModel | Promise<NumberViewModel | null> | null {\n    const nodeid = node.nodeid;\n    if (value instanceof Promise) {\n      return value.then((value) => NumberViewModel.__create(tile, node, value));\n    }\n    if (tile) {\n      if (value !== null) {\n        tile.data.set(nodeid, value);\n      }\n    }\n\n    const val = tile.data.get(nodeid);\n    if (!tile || val === null || val === undefined) {\n      return null;\n    }\n    const num = new NumberViewModel(val);\n    return num;\n  }\n\n  __asTileData() {\n    return this.valueOf();\n  }\n}\n\n// Note that this is a Boolean _object__, not an actual boolean\nclass BooleanViewModel extends Boolean implements IViewModel {\n  _: IViewModel | Promise<IViewModel> | undefined = undefined;\n  __parentPseudo: PseudoValue<any> | undefined;\n  __config:  StaticNodeConfigBoolean;\n\n  describeField = () => (this.__parentPseudo ? this.__parentPseudo.describeField() : null)\n  describeFieldGroup = () => (this.__parentPseudo ? this.__parentPseudo.describeFieldGroup() : null)\n\n  constructor(value: boolean, config: StaticNodeConfigBoolean) {\n    super(value);\n    this.__config = config;\n  }\n\n  toString(lang?: string | undefined): string {\n    const labelLang = lang || DEFAULT_LANGUAGE;\n    return this.valueOf() ? (\n      this.__config && this.__config.trueLabel ? this.__config.trueLabel[labelLang] || 'true' : 'true'\n    ) : (\n      this.__config && this.__config.trueLabel ? this.__config.falseLabel[labelLang] || 'false' : 'false'\n    );\n  }\n\n  __forJsonCache(): null {\n    return null;\n  }\n\n  forJson(): boolean {\n    return this.valueOf();\n  }\n\n  static __create(\n    tile: StaticTile,\n    node: StaticNode,\n    value: any,\n  ): BooleanViewModel | Promise<BooleanViewModel | null> | null {\n    const nodeid = node.nodeid;\n    if (value instanceof Promise) {\n      return value.then((value) => BooleanViewModel.__create(tile, node, value));\n    }\n    if (tile) {\n      if (value !== null) {\n        tile.data.set(nodeid, value);\n      }\n    }\n\n    const val = tile.data.get(nodeid);\n    if (!tile || val === null || val === undefined) {\n      return null;\n    }\n    const config = nodeConfigManager.retrieve(node);\n    if (!config || !(config instanceof StaticNodeConfigBoolean)) {\n      throw Error(`Cannot form boolean value for ${node.nodeid} without config`);\n    }\n    if (typeof val !== 'boolean' && val !== 0 && val !== 1) {\n      throw Error(`Refusing to use truthiness for value ${val} in boolean`);\n    }\n    const bool = new BooleanViewModel(val ? true : false, config);\n    return bool;\n  }\n\n  __asTileData() {\n    return this.valueOf();\n  }\n}\n\nclass Url {\n  url: string\n  url_label?: string\n\n  constructor(url: string, url_label?: string) {\n    this.url = url;\n    this.url_label = url_label;\n  }\n}\n\nclass UrlViewModel extends String implements IViewModel {\n  _: IViewModel | Promise<IViewModel> | undefined = undefined;\n  __parentPseudo: PseudoValue<any> | undefined;\n\n  describeField = () => (this.__parentPseudo ? this.__parentPseudo.describeField() : null)\n  describeFieldGroup = () => (this.__parentPseudo ? this.__parentPseudo.describeFieldGroup() : null)\n\n  _value: Url;\n\n  __forJsonCache(): null {\n    return null;\n  }\n\n  constructor(value: Url) {\n    const displayValue = value.url_label || value.url;\n    super(displayValue);\n    this._value = value;\n  }\n\n  forJson(): {[key: string]: string} {\n    return {\n      url: this._value.url,\n      url_label: this._value.url_label || \"\",\n    };\n  }\n\n  label() {\n    return this._value.url_label || this._value.url;\n  }\n\n  href() {\n    return this._value.url;\n  }\n\n  static __create(\n    tile: StaticTile,\n    node: StaticNode,\n    value: any,\n  ): UrlViewModel | Promise<UrlViewModel | null> | null {\n    const nodeid = node.nodeid;\n    if (value instanceof Promise) {\n      return value.then((value) => UrlViewModel.__create(tile, node, value));\n    }\n    if (tile) {\n      if (!tile.data.has(nodeid)) {\n        tile.data.set(nodeid, {});\n      }\n      if (value !== null) {\n        if (value instanceof UrlViewModel) {\n          value = value._value;\n        } else if (value instanceof Object) {\n          if (!value.url) {\n            throw Error(`A URL must be null or have a 'url' field: ${value}`);\n          }\n        }\n        tile.data.set(nodeid, {\n          url: value.url,\n          url_label: value.url_label,\n        });\n      }\n    }\n\n    const val = tile.data.get(nodeid);\n    if (!tile || val === null || val === undefined) {\n      return null;\n    }\n    let url: Url;\n    if (typeof val !== 'object') {\n      url = new Url(`${val}`);\n    } else if (val instanceof Map) {\n      url = new Url(val.get('url'), val.get('url_label'));\n    } else if ('url' in val && typeof val === 'object' && typeof val.url === 'string' && 'url_label' in val && (val.url_label === undefined || typeof val.url_label === 'string')) {\n      url = new Url(val.url, val.url_label);\n    } else {\n      throw Error(`Unrecognised URL type: ${val}`);\n    }\n    const str = new UrlViewModel(url);\n    return str;\n  }\n\n  __asTileData() {\n    return this.forJson();\n  }\n}\n\nclass StringViewModel extends String implements IViewModel {\n  _: IViewModel | Promise<IViewModel> | undefined = undefined;\n  __parentPseudo: PseudoValue<any> | undefined;\n\n  describeField = () => (this.__parentPseudo ? this.__parentPseudo.describeField() : null)\n  describeFieldGroup = () => (this.__parentPseudo ? this.__parentPseudo.describeFieldGroup() : null)\n\n  _value: Map<string, StringTranslatedLanguage>;\n\n  __forJsonCache(): null {\n    return null;\n  }\n\n  constructor(value: Map<string, StringTranslatedLanguage>, language: string | null = null) {\n    const lang = value.get(language || DEFAULT_LANGUAGE);\n    let displayValue: string;\n    if (lang) {\n      if (typeof lang == \"string\") {\n        displayValue = lang;\n      } else {\n        displayValue = lang.value;\n      }\n    } else {\n      // TODO: allow fallback\n      displayValue = \"\";\n    }\n    super(displayValue);\n    this._value = value;\n  }\n\n  forJson(): string {\n    return `${this}`;\n  }\n\n  lang(language: string) {\n    const elt = this._value.get(language);\n    if (elt) {\n      if (elt instanceof Object) {\n        return elt.value;\n      }\n      return elt;\n    } else {\n      return undefined;\n    }\n  }\n\n  static __create(\n    tile: StaticTile,\n    node: StaticNode,\n    value: any,\n  ): StringViewModel | Promise<StringViewModel | null> | null {\n    const nodeid = node.nodeid;\n    if (value instanceof Promise) {\n      return value.then((value) => StringViewModel.__create(tile, node, value));\n    }\n    if (tile) {\n      if (!tile.data.has(nodeid)) {\n        tile.data.set(nodeid, {});\n      }\n      if (value !== null) {\n        if (value instanceof Object) {\n          const entries =\n            value instanceof Map ? value.entries() : Object.entries(value);\n          for (const [k, v] of [...entries]) {\n            const val = tile.data.get(nodeid);\n            if (val instanceof Map) {\n              val.set(k, v);\n            } else if (val instanceof Object) {\n              // @ts-expect-error Need better typing of data to make this settable.\n              val[k] = v;\n            } else if (val !== null) {\n              throw Error(\"Malformed string in tile data\");\n            }\n          }\n        } else {\n          tile.data.set(nodeid, {\n            [DEFAULT_LANGUAGE]: value,\n          });\n        }\n      }\n    }\n\n    const val = tile.data.get(nodeid);\n    if (!tile || val === null || val === undefined) {\n      return null;\n    }\n    let mapVal;\n    if (val instanceof Map) {\n      mapVal = val;\n    } else {\n      mapVal = new Map(Object.entries(val));\n    }\n    const str = new StringViewModel(mapVal);\n    return str;\n  }\n\n  __asTileData() {\n    return this._value;\n  }\n}\n\nclass SemanticViewModel implements IStringKeyedObject, IViewModel {\n  [key: string | symbol]: any;\n  _: IViewModel | Promise<IViewModel> | undefined = undefined;\n  then: undefined;\n  [Symbol.toPrimitive]: undefined;\n\n  __parentPseudo: PseudoValue<any> | undefined;\n  __childValues: Map<string, any>;\n  __parentWkri: IRIVM<any> | null;\n  __childNodes: Map<string, StaticNode>;\n  __tile: StaticTile | null;\n  __node: StaticNode;\n\n  __forJsonCache(): null {\n    return null;\n  }\n\n  constructor(\n    parentWkri: IRIVM<any> | null,\n    childNodes: Map<string, StaticNode>,\n    tile: StaticTile | null,\n    node: StaticNode,\n  ) {\n    this.__childValues = new Map<string, any>();\n    this.__parentWkri = parentWkri;\n    this.__tile = tile;\n    this.__node = node;\n    this.__childNodes = childNodes;\n    return new Proxy(this, {\n      set: (object, key, value) => {\n        const k: string = typeof key === 'symbol' ? key.description || '' : key;\n        if (key in object) {\n          object[key] = value;\n        } else if (k.startsWith(\"__\") || k in object) {\n          object[k] = value;\n        } else {\n          object.__set(k, value);\n        }\n        return true;\n      },\n      get: (object, key) => {\n        const k: string = typeof key === 'symbol' ? key.description || '' : key;\n\n        if (key.toString() === \"Symbol.toStringTag\") {\n          return () => this.constructor.name;\n        }\n\n        if (key in object) {\n          return object[key];\n        } else if (k.startsWith(\"__\") || k in object) {\n          return object[k];\n        }\n        if (k == \"length\") {\n          return object.__childNodes.size;\n        }\n        return new AttrPromise((resolve) => {\n          object.__get(k).then(resolve);\n        });\n      },\n    });\n  }\n\n  async toString(): Promise<string> {\n    const entries = [...this.__childValues.entries()].map(([k, v]) => `${k}: ${v}`);\n    return `[[${entries.join(\",\")}]]`;\n  }\n\n  async toObject() {\n    const entries = [...(await this.__getChildValues()).entries()];\n    return Object.fromEntries(await Promise.all(entries.map(async ([k, vl]) => {\n        return [k, (await vl).getValue()];\n    })));\n  }\n\n  async forJson() {\n    async function _forJson(v: IPseudo | IViewModel | null) {\n      v = await v;\n      if (!v) {\n        return null;\n      }\n      return await v.forJson();\n    };\n    const entries = [...(await this.__getChildValues()).entries()];\n    return Object.fromEntries(await Promise.all(entries.map(async ([k, vl]) => {\n        return [k, vl ? await _forJson(vl) : vl];\n    })));\n  }\n\n  async __update(map: Map<string, any>) {\n    return Promise.all(\n      [...map.entries()].map(([k, v]) => {\n        this.__set(k, v);\n      }),\n    );\n  }\n\n  async __get(key: string) {\n    const childValue = await this.__getChildValue(key);\n    return childValue.getValue();\n  }\n\n  async __set(key: string, value: any) {\n  // async __set(key: string, value: any) {\n    if (!this.__childNodes.has(key)) {\n      throw Error(\n        `Semantic node does not have this key: ${key} (${[...this.__childNodes.keys()]})`,\n      );\n    }\n\n    throw Error(`Setting semantic keys (${key} = ${value}) is not implemented yet in Javascript`);\n    // const child = await this.__getChildValue(key, true);\n    // child.value = value;\n  }\n\n  __has(key: string) {\n    return this.__childNodes.has(key);\n  }\n\n  async __getChildTypes() {\n    const promises = [...this.__childNodes.keys()].map(async (key): Promise<[string, IPseudo]> => [\n      key,\n      await this.__getChildValue(key),\n    ]);\n    const entries: Array<[string, IPseudo]> = await Promise.all(promises);\n    return new Map<string, any>([...entries]);\n  }\n\n  async __getChildren(direct: null | boolean = null) {\n    const items = new Map<string, any>();\n    for (const [key, value] of [...(await this.__getChildValues()).entries()]) {\n      items.set(key, value);\n    }\n    const children = [...items.entries()]\n      .filter((entry) => {\n        const child = this.__childNodes.get(entry[0]);\n        if (!child) {\n          throw Error(\"Child key is not in child nodes\");\n        }\n        return (\n          (direct === null || direct === !child.is_collector) &&\n          entry[1] !== null\n        );\n      })\n      .map((entry) => entry[1]);\n    return children;\n  }\n\n  async __getChildValue(key: string, setDefault: boolean = false): Promise<IPseudo> {\n    if (!this.__childNodes.has(key)) {\n      throw Error(\n        `Semantic node does not have this key: ${key} (${[...this.__childNodes.keys()]})`,\n      );\n    }\n\n    let child;\n    if (!this.__childValues.has(key)) {\n      const children = await this.__getChildValues();\n      child = children.get(key) || null;\n\n      let set = true;\n      if (child === null) {\n        child = this.__makePseudo(key);\n        set = setDefault;\n      }\n      if (set) {\n        // This ensures that we do not set a default value in our\n        // local cache simply because the node is not loaded yet.\n        this.__childValues.set(key, child);\n      }\n      child.parentNode = this.__parentPseudo || null;\n    } else {\n      child = this.__childValues.get(key);\n    }\n    return child;\n  }\n\n  __makePseudo(key: string): IPseudo {\n    const childNode = this.__childNodes.get(key);\n\n    if (!childNode) {\n      throw Error(`Child node key ${key} missing`);\n    }\n\n    if (!this.__parentWkri) {\n      throw Error(\"This semantic node is currently parentless (no WKRI)\");\n    }\n\n    if (!this.__parentWkri.$) {\n      // Could autoretreive?\n      throw Error(\"This semantic node is currently on an unloaded WKRI\");\n    }\n\n    const child = this.__parentWkri.$.addPseudo(childNode, this.__tile, this.__node);\n    child.parentNode = this.__parentPseudo || null;\n    return child;\n  }\n\n  static async __create(\n    tile: StaticTile,\n    node: StaticNode,\n    value: any,\n    parent: IRIVM<any> | null,\n    childNodes: Map<string, StaticNode>,\n  ): Promise<SemanticViewModel> {\n    const svm = new SemanticViewModel(parent, childNodes, tile, node);\n    if (value) {\n      try {\n        await svm.__update(value);\n      } catch (e) {\n        tileLoadingError(\n          `\n          Suppressed a tile loading error: ${e}: ${typeof e} (tile: ${tile}; node: ${node}) - ${value}\n        `,\n          e,\n        );\n      }\n    }\n    // await svm.__getChildren();\n    return svm;\n  }\n\n  async __asTileData() {\n    // Ensure all nodes have populated the tile\n    const relationships: any[] = [];\n    for (const value of [...await this.__getChildren(true)]) {\n      // We do not use tile, because a child node will ignore its tile reference.\n      const [, subrelationships] = await value.getTile();\n      relationships.push(...subrelationships);\n    }\n    // This is none because the semantic type has no nodal value,\n    // only its children have nodal values, and the nodal value of this nodeid should\n    // not exist.\n    return [null, relationships];\n  }\n\n  async __getChildValues(): Promise<Map<string, IPseudo>> {\n    const parent = this.__parentWkri;\n    const childNodes = this.__childNodes;\n    const tile = this.__tile;\n    const node = this.__node;\n    if (!parent || !parent.$) {\n      return new Map();\n    }\n\n    // Ensure lazy-loading done.\n    // TODO check this does not go deeper than necessary.\n    await parent.$.loadNodes([...childNodes.keys()]);\n\n    // TODO: Why not just use edges?\n    const children: Map<string, any> = new Map();\n    for (const entry of [...parent.$.allEntries()]) {\n      const key = entry[0];\n      let values = entry[1];\n      if (values instanceof Promise) {\n        values = await values;\n      }\n      if (values === false || values === null || values === undefined) {\n        continue;\n      }\n      const childNode = childNodes.get(key);\n      if (childNode) {\n        for (let value of values) {\n          if (\n            value !== null &&\n            value.node &&\n            (!(value.parentNode) ||\n              value.parentNode === this.__parentPseudo)\n          ) {\n            // It is possible that this value has already\n            // been requested, but the tile is in-flight.\n            value = await value;\n            if (!value.node) {\n              throw Error(`Node ${childNode.alias} (${childNode.nodeid}) is unavailable`);\n            }\n            if (\n              // value.node.nodegroup_id == node.nodeid in all cases for first possibility?\n              (value.node.nodegroup_id != node.nodegroup_id && tile && value.tile && (!(value.tile.parenttile_id) || value.tile.parenttile_id == tile.tileid)) ||\n              (value.node.nodegroup_id == node.nodegroup_id &&\n                tile &&\n                value.tile == tile &&\n                !childNode.is_collector) //  # It shares a tile\n              // it feels like this should be necessary, but area_assignments->area_assignment fails with null parenttile_id\n              // (tile && value.tile && value.tile.parenttile_id == tile.tileid) ||\n              // (value.node.nodegroup_id == node.nodegroup_id &&\n              //   tile &&\n              //   value.tile == tile &&\n              //   !childNode.is_collector) //  # It shares a tile\n            ) {\n              children.set(key, value);\n            } else if (\n              node.nodegroup_id != value.node.nodegroup_id &&\n              childNode.is_collector // It does not share a tile\n            ) {\n              // This avoids list types that have their own tiles (like resource or concept lists)\n              // from appearing doubly-nested\n              const childValue = value instanceof PseudoList ? value : (value.isIterable() ? await value.getValue() : null);\n              let listValue: PseudoList | Array<any> | null;\n              if (childValue && Array.isArray(childValue)) {\n                listValue = childValue;\n              } else {\n                listValue = null;\n              }\n              if (listValue !== null) {\n                if (children.has(key)) {\n                  children.get(key).push(...listValue);\n                } else {\n                  children.set(key, listValue);\n                }\n              } else {\n                // In this case, we have a value, but the wrapper logic did not make it a PseudoList, so\n                // we should treat it as singular.\n                children.set(key, value);\n              }\n            }\n          }\n        }\n      }\n    }\n    for (const [key, value] of [...children.entries()]) {\n      value.parentNode = this.__parentPseudo;\n      this.__childValues.set(key, value);\n    }\n\n    return children;\n  }\n}\n\nconst CUSTOM_DATATYPES: Map<string, string | IViewModel> = new Map();\n\nasync function getViewModel<RIVM extends IRIVM<RIVM>>(\n  parentPseudo: PseudoValue<any>,\n  tile: StaticTile,\n  node: StaticNode,\n  data: any,\n  parent: IRIVM<RIVM> | null,\n  childNodes: Map<string, StaticNode>,\n  isInner: boolean = false\n): Promise<IViewModel | null> {\n  let vm;\n  // TODO: should parentPseudo.parent.$ trigger a retrieve if missing?\n  const cacheEntries: {[tileId: string]: {[nodeId: string]: IStringKeyedObject}} | undefined = parentPseudo.parent && parentPseudo.parent.$ ? await parentPseudo.parent.$.getValueCache(false, undefined) : undefined;\n  let cacheEntry: IStringKeyedObject | null = null;\n  if (cacheEntries) {\n    cacheEntry = (tile.tileid ? (cacheEntries[tile.tileid] ?? {}) : {})[node.nodeid]\n  };\n  const datatype = isInner ? \"semantic\" : CUSTOM_DATATYPES.get(node.datatype) ?? node.datatype;\n\n  // TODO: find a neater way.\n  let conceptCacheEntry: ConceptListCacheEntry | null;\n  let conceptValueCacheEntry: ConceptValueCacheEntry | null;\n  let resourceInstanceCacheEntry: ResourceInstanceCacheEntry | null;\n  let resourceInstanceListCacheEntry: ResourceInstanceListCacheEntry | null;\n\n  if (!(typeof datatype == \"string\")) {\n    // @ts-expect-error Cannot make a static member part of the interface\n    vm = await datatype.__create(tile, node, data, cacheEntry);\n  } else {\n    switch (datatype) {\n      case \"semantic\":\n        vm = await SemanticViewModel.__create(\n          tile,\n          node,\n          data,\n          parent,\n          childNodes,\n        );\n        break;\n      case \"domain-value\":\n        vm = await DomainValueViewModel.__create(tile, node, data);\n        break;\n      case \"domain-value-list\":\n        vm = await DomainValueListViewModel.__create(tile, node, data);\n        break;\n      case \"concept\":\n        if (cacheEntry && typeof cacheEntry === \"object\" && !(cacheEntry instanceof ConceptValueCacheEntry)) {\n          // @ts-expect-error We do not know the cache entry is structured correctly, and any such checks are in the constructor.\n          conceptValueCacheEntry = new ConceptValueCacheEntry(cacheEntry);\n        } else {\n          conceptValueCacheEntry = cacheEntry;\n        }\n        vm = await ConceptValueViewModel.__create(tile, node, data, conceptValueCacheEntry);\n        break;\n      case \"resource-instance\":\n        if (cacheEntry && typeof cacheEntry === \"object\" && !(cacheEntry instanceof ResourceInstanceCacheEntry)) {\n          // @ts-expect-error We do not know the cache entry is structured correctly, and any such checks are in the constructor.\n          resourceInstanceCacheEntry = new ResourceInstanceCacheEntry(cacheEntry);\n        } else {\n          resourceInstanceCacheEntry = cacheEntry;\n        }\n        vm = await ResourceInstanceViewModel.__create(tile, node, data, resourceInstanceCacheEntry);\n        break;\n      case \"resource-instance-list\":\n        if (cacheEntry && typeof cacheEntry === \"object\" && !(cacheEntry instanceof ResourceInstanceListCacheEntry)) {\n          // @ts-expect-error We do not know the cache entry is structured correctly, and any such checks are in the constructor.\n          resourceInstanceListCacheEntry = new ResourceInstanceListCacheEntry(cacheEntry);\n        } else {\n          resourceInstanceListCacheEntry = cacheEntry;\n        }\n        vm = await ResourceInstanceListViewModel.__create(tile, node, data, resourceInstanceListCacheEntry);\n        break;\n      case \"concept-list\":\n        if (cacheEntry && typeof cacheEntry === \"object\" && !(cacheEntry instanceof ConceptListCacheEntry)) {\n          // @ts-expect-error We do not know the cache entry is structured correctly, and any such checks are in the constructor.\n          conceptCacheEntry = new ConceptListCacheEntry(cacheEntry);\n        } else {\n          conceptCacheEntry = cacheEntry;\n        }\n        vm = await ConceptListViewModel.__create(tile, node, data, conceptCacheEntry);\n        break;\n      case \"date\":\n        vm = await DateViewModel.__create(tile, node, data);\n        break;\n      case \"geojson-feature-collection\":\n        vm = await GeoJSONViewModel.__create(tile, node, data);\n        break;\n      case \"boolean\":\n        vm = await BooleanViewModel.__create(tile, node, data);\n        break;\n      case \"string\":\n        vm = await StringViewModel.__create(tile, node, data);\n        break\n      case \"number\":\n        vm = await NumberViewModel.__create(tile, node, data);\n        break\n      case \"file-list\":\n        vm = await FileListViewModel.__create(tile, node, data);\n        break;\n      case \"edtf\":\n        vm = await EDTFViewModel.__create(tile, node, data);\n        break;\n      case \"url\":\n        vm = await UrlViewModel.__create(tile, node, data);\n        break;\n      case \"non-localized-string\":\n        vm = await NonLocalizedStringViewModel.__create(tile, node, data);\n        break;\n      default:\n        console.warn(\"Missing type for tile\", tile.tileid, \"on node\", node.alias, \"with type\", node.datatype);\n        vm = await NonLocalizedStringViewModel.__create(tile, node, data);\n    }\n  }\n\n  if (vm === null) {\n    return null;\n  }\n\n  vm.__parentPseudo = parentPseudo;\n  if (vm instanceof Array) {\n    for (const vme of vm) {\n      if (vme instanceof Promise) {\n        vme.then(vmep => { if (vmep !== null) vmep.__parentPseudo = parentPseudo; });\n      } else {\n        vme.__parentPseudo = parentPseudo;\n      }\n    }\n  }\n\n  return vm;\n}\n\nexport { ResourceInstanceCacheEntry, DEFAULT_LANGUAGE, ResourceInstanceViewModel, ValueList, getViewModel, DomainValueViewModel, SemanticViewModel, StringViewModel, DateViewModel, GeoJSONViewModel, ConceptValueViewModel, viewContext, NonLocalizedStringViewModel, CUSTOM_DATATYPES, BooleanViewModel, NumberViewModel, UrlViewModel };\n","import { StaticTile, StaticNode } from \"./static-types\";\nimport { ISemantic, IViewModel, IPseudo, IRIVM, IModelWrapper } from \"./interfaces\";\nimport { getViewModel } from \"./viewModels\";\nimport { AttrPromise } from \"./utils\";\n\nclass PseudoUnavailable implements IPseudo {\n  parentNode: PseudoValue<any> | null = null;\n  tile: null = null;\n  node: StaticNode;\n  isOuter: boolean = false;\n\n  constructor(node: StaticNode) {\n    this.node = node;\n  }\n\n  async forJson(): Promise<{[key: string]: any}[] | null> {\n    return null;\n  }\n\n  describeField() {\n    return \"Unavailable field\";\n  }\n\n  describeFieldGroup() {\n    return \"Unavailable field\";\n  }\n\n  public getValue(): AttrPromise<null> {\n    return new AttrPromise(resolve => resolve(null));\n  }\n\n  getLength() {\n    return 0;\n  }\n\n  getChildren(_: boolean = false) {\n    return [];\n  }\n\n  isIterable(): boolean {\n    return false\n  }\n}\n\nconst ITERABLE_DATATYPES = [\n  \"concept-list\",\n  \"resource-instance-list\",\n  \"domain-value-list\"\n];\n\nclass PseudoValue<VM extends IViewModel> implements IPseudo {\n  node: StaticNode;\n  tile: StaticTile | null;\n  value: any;\n  parent: IRIVM<any> | null;\n  parentNode: PseudoValue<any> | null;\n  valueLoaded: boolean | undefined = false;\n  datatype: string | null = null;\n  originalTile: StaticTile | null;\n  accessed: boolean;\n  childNodes: Map<string, StaticNode>;\n  isOuter: boolean = false;\n  isInner: boolean = false;\n  inner: PseudoValue<ISemantic> | null = null;\n  independent: boolean;\n\n  isIterable(): boolean {\n    return this.datatype !== null && ITERABLE_DATATYPES.includes(this.datatype);\n  }\n\n  describeField() {\n    let fieldName = this.node.name;\n    if (this.parent && this.parent.__) {\n      fieldName = `${this.parent.__.wkrm.modelName} - ${fieldName}`;\n    }\n    return fieldName;\n  }\n\n  describeFieldGroup() {\n    let fieldName = this.node.name;\n    if (this.parent && this.node.nodegroup_id && this.parent.$) {\n      const nodegroup = this.parent.$.model.getNodeObjects().get(this.node.nodegroup_id);\n      if (nodegroup && this.parent.__) {\n        fieldName = `${this.parent.__.wkrm.modelName} - ${nodegroup.name}`;\n      }\n    }\n    return fieldName;\n  }\n\n  constructor(\n    node: StaticNode,\n    tile: StaticTile | null,\n    value: any,\n    parent: IRIVM<any> | null,\n    childNodes: Map<string, StaticNode>,\n    inner: boolean | PseudoValue<ISemantic>,\n  ) {\n    this.node = node;\n    this.tile = tile;\n    this.independent = tile === null;\n    if (!parent) {\n      throw Error(\"Must have a parent or parent class for a pseudo-node\");\n    }\n    this.parent = parent;\n    this.parentNode = null;\n    this.childNodes = childNodes;\n    this.value = value;\n    this.accessed = false;\n    this.originalTile = tile;\n    this.datatype = node.datatype;\n    if (inner instanceof PseudoValue) {\n      this.isOuter = true;\n      this.inner = inner;\n    }\n    if (inner === true) {\n      this.isInner = true;\n      this.datatype = 'semantic';\n    }\n  }\n\n  // TODO deepcopy\n  //\n\n  getParentTileId() {\n    return this.tile ? this.tile.parenttile_id : null;\n  }\n\n  async getTile(): Promise<[StaticTile | null, any[]]> {\n    await this.updateValue();\n\n    let relationships: Array<any> = [];\n\n    if (this.inner) {\n      [this.tile, relationships] = await this.inner.getTile();\n    }\n\n    let tileValue;\n    if (this.value !== null) {\n      // It may be better to make this fully async if there's a performance benefit.\n      const [newTileValue, ownRelationships] = await (await this.value).__asTileData();\n      tileValue = newTileValue;\n      relationships = [...relationships, ...ownRelationships];\n    } else {\n      tileValue = null;\n    }\n    // if isinstance(tile_value, tuple):\n    //     relationships = [\n    //         relationship\n    //         if isinstance(relationship, tuple)\n    //         else (self.tile.nodegroup_id, self.node.nodeid, relationship)\n    //         for relationship in tile_value[1]\n    //     ]\n    //     tile_value = tile_value[0]\n    if (!this.tile) {\n      throw Error();\n    }\n    this.tile.data = this.tile.data || {};\n    if (tileValue === null) {\n      if (this.tile.data.get(this.node.nodeid)) {\n        this.tile.data.delete(this.node.nodeid);\n      }\n    } else {\n      this.tile.data.set(this.node.nodeid, tileValue);\n    }\n    const tile = this.independent ? this.tile : null;\n\n    // TODO relationships\n    return [tile, relationships];\n  }\n\n  clear() {\n    this.value = null;\n    if (this.tile && this.tile.data && this.tile.data.has(this.node.nodeid)) {\n      this.tile.data.delete(this.node.nodeid);\n    }\n  }\n\n  updateValue(tile?: StaticTile | null): AttrPromise<VM> {\n    if (tile) {\n      this.tile = tile;\n    }\n    this.accessed = true;\n    if (this.inner) {\n      this.inner.accessed = true;\n    }\n    if (!this.tile) {\n      if (!this.node) {\n        throw Error(\"Empty tile\");\n      }\n      if (this.inner) {\n        return new AttrPromise(async (resolve) => {\n          const tile = await this.inner?.getTile();\n          resolve(this.updateValue(tile ? tile[0] : undefined));\n        });\n      }\n      if (!this.tile) {\n        // NB: You may see issues where the nodegroup is null because it is the root node,\n        // and a node below is not marked as a collector, so tries to fill its tile in\n        // A cardinality n node below the root should be a collector.\n        this.tile = new StaticTile({\n          nodegroup_id: this.node.nodegroup_id || \"\",\n          tileid: null,\n          data: new Map<string, any>(),\n          sortorder: this.node.sortorder,\n          resourceinstance_id: \"\",\n          parenttile_id: null,\n          provisionaledits: null,\n          ensureId: () => \"\"\n        });\n        // this.relationships = [];\n      }\n    }\n    if (this.valueLoaded === false) {\n      this.valueLoaded = undefined;\n      let data: any;\n      if (\n        this.value === null &&\n        this.tile.data !== null &&\n        this.tile.data.has(this.node.nodeid) &&\n        this.datatype !== 'semantic' // Semantic nodes only have placeholder data\n      ) {\n        data = this.tile.data.get(this.node.nodeid);\n      } else {\n        data = this.value;\n      }\n\n      if (this.isOuter && typeof data === 'object' && this.inner && data) {\n        let outerData = undefined;\n        if (\"_\" in data && !data.constructor) {\n          outerData = data[\"_\"];\n          delete data[\"_\"];\n          this.inner.getValue().then((v: ISemantic | null) => v && v.update(data));\n          data = outerData;\n        } else if (data instanceof Map && data.has(\"_\")) {\n          outerData = data.get(\"_\");\n          data.delete(\"_\");\n          this.inner.getValue().then((v: ISemantic | null) => v && v.update(data));\n          data = outerData;\n        }\n      }\n      const vm = getViewModel(\n        this,\n        this.tile,\n        this.node,\n        data,\n        this.parent,\n        this.childNodes,\n        this.isInner\n      );\n\n      const resolveAttr = (vm: IViewModel) => {\n        if (vm !== null && vm instanceof Object) {\n          vm.__parentPseudo = this;\n          if (this.isOuter && this.inner) {\n            vm._ = this.inner.getValue();\n          }\n\n          this.valueLoaded = true;\n        }\n        return vm;\n      };\n      this.value = new AttrPromise((resolve) => {\n        vm.then((vm) => resolve(vm ? resolveAttr(vm) : vm));\n      });\n    }\n\n    return this.value;\n  }\n\n  public getValue(): AttrPromise<VM | null> {\n    return this.updateValue();\n  }\n\n  // @value.setter\n  // def value(this, value):\n\n  getLength() {\n    return this.getChildren().length;\n  }\n\n  async getChildTypes() {\n    await this.updateValue();\n    let childTypes = {};\n    if (this.value && this.value instanceof Object && 'getChildTypes' in this.value && typeof this.value.getChildTypes === 'function') {\n      childTypes = this.value.getChildTypes();\n    }\n    if (this.inner) {\n      Object.assign(childTypes, this.inner.getChildTypes());\n    }\n    return childTypes;\n  }\n\n  getChildren(direct = null): IPseudo[] {\n    let children = [];\n    if (this.value && this.value instanceof Object && 'getChildren' in this.value && typeof this.value.getChildren === 'function') {\n      children = this.value.getChildren(direct);\n    }\n    if (this.inner) {\n      children = [...children, ...this.inner.getChildren(direct)];\n    }\n    return children;\n  }\n\n  async forJson(): Promise<{[key: string]: any} | {[key: string]: any}[] | string | number | boolean | null> {\n    const value = (await this.getValue());\n    return value instanceof Object ? value.forJson() : value;\n  }\n}\n\nclass PseudoList extends Array implements IPseudo {\n  node: StaticNode | undefined = undefined;\n  parent: IRIVM<any> | null | undefined = undefined;\n  parentNode: PseudoValue<any> | null = null;\n  tile: StaticTile | undefined;\n  parenttileId: string | undefined;\n  ghostChildren: Set<PseudoValue<any>> | null = null;\n  isOuter: boolean = false;\n\n  isIterable(): boolean {\n    return true;\n  }\n\n  async sorted() {\n    const resolved = await Promise.all(this.map(async (pn) => await pn));\n    const test = [];\n    const sorted = resolved.sort((a, b) => {\n      const vals = [a, b].map(val => {\n        if (val && a.__parentPseudo && a.__parentPseudo.tile) {\n          if (val.__parentPseudo.tile.sortorder > 0) {\n            // RMV\n            test.push(1);\n          }\n          return val.__parentPseudo.tile.sortorder;\n        } else {\n          return 0;\n        }\n      });\n      return vals[0] - vals[1];\n    });\n    return sorted;\n  }\n\n  describeField() {\n    if (!this.node) {\n      return \"[(uninitialized node)]\";\n    }\n\n    let fieldName = this.node.name;\n    if (this.parent && this.parent.__) {\n      fieldName = `${this.parent.__.wkrm.modelName} - ${fieldName}`;\n    }\n    return `[${fieldName}]`;\n  }\n\n  describeFieldGroup() {\n    if (!this.node) {\n      return \"[(uninitialized node)]\";\n    }\n\n    let fieldName = this.node.name;\n    if (this.parent && this.node.nodegroup_id && this.parent.$) {\n      const nodegroup = this.parent.$.model.getNodeObjects().get(this.node.nodegroup_id);\n      if (nodegroup && this.parent.__) {\n        fieldName = `${this.parent.__.wkrm.modelName} - ${nodegroup.name}`;\n      }\n    }\n    return `[${fieldName}]`;\n  }\n\n  // Otherwise interferes with Array methods;\n  initialize(node: StaticNode, parent: IRIVM<any> | null) {\n    this.node = node;\n    if (Array.isArray(this.node)) {\n      throw Error(\"Cannot make a list of lists\");\n    }\n    if (!parent) {\n      throw Error(\"Must have a parent or parent class for a pseudo-node\");\n    }\n    this.parent = parent;\n    this.tile = undefined;\n    this.parenttileId = undefined;\n    this.ghostChildren = new Set();\n  }\n\n  async forJson(): Promise<{[key: string]: any}[]> {\n    const array: {[key: string]: any}[] = Array.from(\n      (await this.sorted()).map(\n        async (entry: Promise<IViewModel> | IViewModel) => {\n          const value = await entry;\n          return (value && value instanceof Object && value.forJson) ? value.forJson() : value;\n        }\n      )\n    );\n    return Promise.all(array);\n  }\n\n  getValue(): AttrPromise<PseudoList> {\n    return new AttrPromise(resolve => resolve(this));\n  }\n\n  toString() {\n    return `<PL: ${this.length}>`;\n  }\n}\n\n// Fix wkri type.\nfunction makePseudoCls(\n  model: IModelWrapper<any>,\n  key: string,\n  single: boolean,\n  tile: StaticTile | null = null,\n  wkri: any | null = null,\n): PseudoList | PseudoValue<any> | PseudoUnavailable {\n  const nodeObjs = model.getNodeObjectsByAlias();\n  const nodeObj = nodeObjs.get(key);\n  if (!nodeObj) {\n    throw Error(\"Could not find node by alias\");\n  }\n\n  const nodegroups = model.getNodegroupObjects();\n  const nodegroup = nodegroups.get(nodeObj.nodegroup_id || \"\");\n\n  let value = null;\n  if (\n    nodeObj.nodegroup_id &&\n    nodeObj.is_collector &&\n    nodegroup &&\n    nodegroup.cardinality == \"n\" &&\n    !single\n  ) {\n    value = new PseudoList();\n    value.initialize(nodeObj, wkri);\n  }\n  if (value === null || tile) {\n    let nodeValue;\n    const isPermitted = model.isNodegroupPermitted(nodeObj.nodegroup_id || '', tile, nodeObjs);\n    if (isPermitted) {\n      const childNodes: Map<string, StaticNode> = model.getChildNodes(nodeObj.nodeid);\n      let inner: boolean | PseudoValue<any> = false;\n      if (childNodes && childNodes.size && nodeObj.datatype !== 'semantic') {\n        inner = new PseudoValue(nodeObj, tile, null, wkri, childNodes, true);\n      }\n      nodeValue = new PseudoValue(nodeObj, tile, null, wkri, inner !== false ? new Map() : childNodes, inner);\n    } else {\n      nodeValue = new PseudoUnavailable(nodeObj);\n    }\n    // If we have a tile in a list, add it\n    if (value) {\n      value.push(nodeValue.getValue());\n    } else {\n      value = nodeValue;\n    }\n  }\n\n  return value;\n}\n\nexport { PseudoValue, PseudoList, PseudoUnavailable, makePseudoCls };\n","import { GraphResult, archesClient, ArchesClient, ArchesClientRemote } from './client';\nimport { staticStore } from './staticStore';\nimport { CardComponent, DEFAULT_CARD_COMPONENT, Widget, getDefaultWidgetForNode } from './cards';\nimport {\n  StaticTranslatableString,\n  StaticCollection,\n  StaticConstraint,\n  StaticCard,\n  StaticEdge,\n  StaticCardsXNodesXWidgets,\n  StaticFunctionsXGraphs,\n  StaticTile,\n  StaticGraph,\n  StaticNode,\n  StaticNodegroup,\n  StaticResource,\n  StaticResourceDescriptors,\n  StaticGraphMeta,\n  IStaticDescriptorConfig\n} from \"./static-types\";\nimport { makePseudoCls, PseudoList } from \"./pseudos.ts\";\nimport { DEFAULT_LANGUAGE, ResourceInstanceViewModel, ValueList, viewContext, SemanticViewModel } from \"./viewModels.ts\";\nimport { CheckPermission, GetMeta, IRIVM, IStringKeyedObject, IPseudo, IInstanceWrapper, IViewModel, ResourceInstanceViewModelConstructor } from \"./interfaces\";\nimport { } from \"./nodeConfig.ts\";\nimport { generateUuidv5, AttrPromise } from \"./utils\";\n\nconst MAX_GRAPH_DEPTH = 100;\nconst DESCRIPTOR_FUNCTION_ID = \"60000000-0000-0000-0000-000000000001\";\n\nclass WKRM {\n  modelName: string;\n  modelClassName: string;\n  graphId: string;\n  meta: StaticGraphMeta;\n\n  constructor(meta: StaticGraphMeta) {\n    let name: {[lang: string]: string} | string | undefined;\n    if (meta.name instanceof Object) {\n      name = meta.name[DEFAULT_LANGUAGE].toString();\n    } else {\n      name = meta.name;\n    }\n    this.modelName = name || \"Unnamed\";\n    this.graphId = meta.graphid;\n    this.modelClassName = (meta.slug || this.modelName)\n      .replace(/[_-]/g, \" \")\n      .replace(/\\s(.)/g, (c: string) => c.toUpperCase())\n      .replace(/\\s/g, \"\");\n    this.modelClassName = this.modelClassName[0].toUpperCase() + this.modelClassName.slice(1);\n    this.meta = meta;\n  }\n}\n\nclass ConfigurationOptions {\n  graphs: Array<string> | null | boolean;\n  eagerLoadGraphs: boolean = false;\n\n  constructor() {\n    this.graphs = null;\n  }\n}\n\nclass ResourceInstanceWrapper<RIVM extends IRIVM<RIVM>> implements IInstanceWrapper<RIVM> {\n  wkri: RIVM;\n  model: ResourceModelWrapper<RIVM>;\n\n  resource: StaticResource | null | false ;\n  valueList: ValueList<RIVM>;\n  cache: {[tileId: string]: {[nodeId: string]: IStringKeyedObject}} | undefined;\n  scopes?: string[];\n  metadata?: {[key: string]: string};\n\n  constructor(\n    wkri: RIVM,\n    model: ResourceModelWrapper<RIVM>,\n    resource: StaticResource | null | false, // False to disable dynamic resource-loading\n    pruneTiles: boolean = true\n  ) {\n    this.wkri = wkri;\n    this.model = model;\n    if (resource) {\n      this.model.stripTiles(resource);\n    }\n    this.resource = resource;\n    this.valueList = new ValueList(new Map<string, any>(), new Map<string, boolean>(), this, []);\n    this.cache = resource ? resource.__cache : undefined;\n    this.scopes = resource ? resource.__scopes : undefined;\n    this.metadata = resource ? resource.metadata : undefined;\n    if (pruneTiles && this.resource) {\n      this.pruneResourceTiles()\n    }\n  }\n\n  pruneResourceTiles(): undefined {\n    if (!this.resource) {\n      console.warn(\"Trying to prune tiles for an empty resource\", this.wkri.modelClassName);\n      return;\n    }\n    this.resource.tiles = (this.resource.tiles || []).filter((tile: StaticTile) => {\n      return this.model.isNodegroupPermitted(tile.nodegroup_id || '', tile);\n    });\n  }\n\n  async loadNodes(aliases: Array<string>): Promise<void> {\n    for (const key of aliases) {\n      await this.valueList.retrieve(key);\n    }\n  }\n\n  async getName(update: boolean = false) {\n    let resourceName = this.resource && this.resource.resourceinstance.name;\n    if (update || !resourceName) {\n      const descriptors = await this.getDescriptors(update);\n      resourceName = (descriptors && descriptors.name) || resourceName || '<Unnamed>';\n      if (this.resource && this.resource.resourceinstance) {\n        this.resource.resourceinstance.name = resourceName;\n      }\n    }\n    return resourceName;\n  }\n\n  async getDescriptors(update: boolean = false) {\n    let descriptors = this.resource && this.resource.resourceinstance.descriptors;\n    if (update || !descriptors || descriptors.isEmpty()) {\n      descriptors = new StaticResourceDescriptors();\n      let descriptorConfig: IStaticDescriptorConfig | undefined = undefined;\n      if (this.model.graph.functions_x_graphs) {\n        const descriptorNode = this.model.graph.functions_x_graphs.find(node => node.function_id === DESCRIPTOR_FUNCTION_ID);\n        if (descriptorNode) {\n          descriptorConfig = descriptorNode.config;\n        }\n      }\n      const nodes = this.model.getNodeObjects();\n      if (descriptorConfig) {\n        for (const [descriptor, config] of Object.entries(descriptorConfig.descriptor_types)) {\n          const semanticNode = nodes.get(config.nodegroup_id);\n          let description = config.string_template;\n          if (!description) {\n            continue;\n          }\n          let requestedNodes = description.match(/<[A-Za-z _-]*>/g) || [];\n          const relevantNodes = [...nodes.values()].filter(node => node.nodegroup_id === config.nodegroup_id && [...requestedNodes].includes(`<${node.name}>`)).map(node => [node.name, node.alias || '']);\n          let relevantValues: [string, string | undefined][] = [];\n          // First try and see if we can find all of these on one tile, for consistency.\n          if (semanticNode) {\n            let semanticValue = await (await this.valueList.retrieve(semanticNode.alias || ''))[0];\n            if (semanticValue instanceof PseudoList) {\n              semanticValue = await semanticValue[0];\n            } else if (semanticValue.inner) {\n              // TODO: Do we need to re-add the e.g. stringviewmodel as a <...> variable?\n              relevantValues.push([semanticNode.name || '', await semanticValue.getValue()]);\n              semanticValue = await semanticValue.inner.getValue();\n            } else {\n              semanticValue = await semanticValue.getValue();\n            }\n            if (semanticValue) {\n              relevantValues = [...relevantValues, ...await Promise.all(relevantNodes.filter(([_, alias]) => semanticValue.__has(alias)).map(([name, alias]) => semanticValue[alias].then((value: IViewModel) => [name, value])))];\n            }\n          }\n          if (relevantValues) {\n            description = relevantValues.reduce((desc, [name, value]) => value ? desc.replace(`<${name}>`, value) : desc, description);\n          }\n          requestedNodes = description.match(/<[A-Za-z _-]*>/g) || [];\n          if (requestedNodes.length) {\n            relevantValues = await Promise.all(relevantNodes.map(([name, alias]) => this.valueList.retrieve(alias).then((values: string[]): [string, string | undefined] => [name, values ? values[0] : undefined])));\n            if (relevantValues) {\n              description = relevantValues.reduce((desc, [name, value]) => value ? desc.replace(`<${name}>`, value) : desc, description);\n            }\n          }\n          descriptors[descriptor] = description;\n        }\n      }\n    }\n    if (this.resource && this.resource.resourceinstance) {\n      this.resource.resourceinstance.descriptors = descriptors;\n      if (descriptors.name) {\n        this.resource.resourceinstance.descriptors.name = descriptors.name;\n      }\n    }\n    return descriptors;\n  }\n\n  addPseudo(childNode: StaticNode, tile: StaticTile | null, node: StaticNode): IPseudo {\n    const key = childNode.alias;\n    if (!key) {\n      throw Error(`Cannot add a pseudo node with no alias ${childNode.nodeid}`);\n    }\n    const child = makePseudoCls(\n      this.model,\n      key,\n      false,\n      (!childNode.is_collector && childNode.nodegroup_id === node.nodegroup_id) ? tile : null, // Does it share a tile\n      this.wkri,\n    );\n\n    const valueList: ValueList<any> = this.valueList;\n    valueList.setDefault(key, []).then((val: Array<any>) => val.push(child));\n    return child;\n  }\n\n  allEntries(): MapIterator<[string, Array<IPseudo> | false | null]> {\n    return this.valueList.values.entries()\n  }\n\n  async keys() {\n    return (await this.getRootViewModel()).keys();\n  }\n\n  async values() {\n    return (await this.getRootViewModel()).values();\n  }\n\n  async entries() {\n    return (await this.getRootViewModel()).entries();\n  }\n\n  async getRootViewModel(): Promise<SemanticViewModel> {\n    const root = await this.getRoot();\n    let value: IViewModel | null = null;\n    if (root) {\n      const rootValue = await root.getValue();\n      if (!Array.isArray(rootValue)) {\n        value = rootValue;\n      }\n    }\n    if (!value || !(value instanceof SemanticViewModel)) {\n      throw Error(`Tried to get root on ${this.model.wkrm.modelClassName}, which has no root`);\n    }\n    return value;\n  }\n\n  getOrmAttribute(key: string): AttrPromise<IViewModel> {\n    let promise: Promise<void>;\n    if (this.resource === null) {\n      promise = this.model.findStatic(this.wkri.id).then(resource => {\n        this.resource = resource;\n      }).then(() => this.populate(true));\n    } else {\n      promise = new Promise((resolve) => { resolve(); });\n    }\n\n    // TODO remapping\n    return new AttrPromise(resolve => {\n      promise.then(() => this.getRootViewModel()).then(root => resolve(root[key]));\n    });\n  }\n\n  async getRoot(): Promise<IPseudo | undefined> {\n    const values = this.valueList;\n    const node = this.model.getRootNode();\n    if (node) {\n      let value;\n      const alias = node.alias;\n      if (!(typeof alias == 'string')) {\n        throw Error(`Alias missing for node ${node.nodeid}`);\n      }\n      await values.setDefault(alias, []);\n      const nodeValues = await values.get(alias);\n\n      if (nodeValues.length > 1) {\n        throw Error(\"Cannot have multiple root tiles\");\n      } else if (nodeValues.length == 1) {\n        value = nodeValues[0];\n      } else {\n        value = makePseudoCls(this.model, alias, false, null, this.wkri);\n        values.set(alias, [value]);\n      }\n      return value;\n    }\n  }\n\n  setOrmAttribute(key: string, value: any) {\n    // TODO remapping\n    return this.getRootViewModel().then((root) => {\n      if (root) {\n        root[key] = value;\n      } else {\n        throw Error(`Tried to set ${key} on ${self}, which has no root`);\n      }\n    });\n  }\n\n  async ensureNodegroup(\n    allValues: Map<string, any>,\n    allNodegroups: Map<string, boolean | Promise<any>>,\n    nodegroupId: string,\n    nodeObjs: Map<string, StaticNode>,\n    nodegroupObjs: Map<string, StaticNodegroup>,\n    edges: Map<string, string[]>,\n    addIfMissing: boolean,\n    tiles: StaticTile[] | null,\n    doImpliedNodegroups: boolean = true\n  ): Promise<[Map<string, any>, Set<string>]> {\n    const impliedNodegroups: Set<string> = new Set();\n    const sentinel = allNodegroups.get(nodegroupId); // no action required if pending\n    let newValues = new Map();\n\n    if (sentinel === false || (addIfMissing && sentinel === undefined)) {\n      [...nodeObjs.values()].filter((node: StaticNode) => {\n        return node.nodegroup_id === nodegroupId;\n      }).forEach((node: StaticNode) => allValues.delete(node.alias || ''));\n      let nodegroupTiles: (StaticTile | null)[];\n      if (tiles === null) {\n        nodegroupTiles = [];\n        console.error(\"Tiles must be provided and cannot be lazy-loaded yet\");\n      } else {\n        nodegroupTiles = tiles.filter(\n          (tile) => tile.nodegroup_id == nodegroupId && this.model.isNodegroupPermitted(nodegroupId, tile)\n        );\n        if (nodegroupTiles.length == 0 && addIfMissing) {\n          nodegroupTiles = [null];\n        }\n        const rgValues = await this.valuesFromResourceNodegroup(\n          allValues,\n          nodegroupTiles,\n          nodegroupId,\n          nodeObjs,\n          edges,\n        );\n        newValues = rgValues[0];\n        const newImpliedNodegroups: Set<string> = rgValues[1];\n\n        [...newValues.entries()].forEach((entry) => {\n          if (entry[1] !== undefined) {\n            allValues.set(entry[0], entry[1]);\n          }\n        });\n        [...newImpliedNodegroups].forEach((v) => {\n          impliedNodegroups.add(v);\n        });\n        allNodegroups.set(nodegroupId, true);\n      }\n    }\n\n    // RMV double-check against Python logic\n    if (doImpliedNodegroups) {\n      for (const nodegroupId of [...impliedNodegroups]) {\n        // TODO: why are we not keeping implied nodegroups?\n        const [impliedValues] = await this.ensureNodegroup(\n          allValues,\n          allNodegroups,\n          nodegroupId,\n          nodeObjs,\n          nodegroupObjs,\n          edges,\n          true,\n          tiles, // RMV different from Python\n          true\n        );\n        for (const [key, value] of impliedValues) {\n          newValues.set(key, value);\n        }\n      }\n      impliedNodegroups.clear();\n    }\n\n    return [newValues, impliedNodegroups];\n  }\n\n  async populate(lazy: boolean): Promise<void> {\n    const nodeObjs = this.model.getNodeObjects();\n    const nodegroupObjs = this.model.getNodegroupObjects();\n    const edges = this.model.getEdges();\n    // FIXME: this needs to be nodeObjs to ensure tiles\n    // whose nodegroup node is in a different nodegroup\n    // (e.g. children of designation_and_protection_timespan)\n    // get loaded - however, just doing that drops performance\n    // by half or two-thirds, so a less wasteful approach is needed.\n    const allValues: Map<string, any> = new Map();\n    const allNodegroups: Map<string, any> = new Map([...nodegroupObjs.keys()].map((id: string) => {\n      return [id || \"\", false];\n    }));\n    //[...nodegroupObjs.keys()].map((id: string) => {\n    //  const node = nodeObjs.get(id);\n    //  if (!node) {\n    //    throw Error(`Could not find node for nodegroup ${id}`);\n    //  }\n    //  allValues.set(node.alias || \"\", false);\n    //});\n    const rootNode = this.model.getRootNode();\n\n    if (rootNode.alias === null) {\n      throw Error(\"Cannot populate a model with no proper root node\");\n    }\n\n    allValues.set(rootNode.alias, false);\n\n    let tiles = null;\n    if (!lazy && this.resource) {\n      tiles = this.resource.tiles;\n      let impliedNodegroups = new Set<string>();\n      for (const [ng] of nodegroupObjs) {\n        const [_, newImpliedNodegroups] = await this.ensureNodegroup(\n          allValues,\n          allNodegroups,\n          ng,\n          nodeObjs,\n          nodegroupObjs,\n          edges,\n          true, // RMV: check vs python\n          tiles,\n          false\n        );\n\n        for (const impliedNodegroup of [...newImpliedNodegroups]) {\n          impliedNodegroups.add(impliedNodegroup);\n        }\n        impliedNodegroups.delete(ng);\n      }\n\n      while (impliedNodegroups.size) {\n        const newImpliedNodegroups = new Set<string>();\n        for (const nodegroupId of [...impliedNodegroups]) {\n          const currentValue = allNodegroups.get(nodegroupId);\n          if (currentValue === false || currentValue === undefined) {\n            const [_, newImpliedNodegroups] = await this.ensureNodegroup(\n              allValues,\n              allNodegroups,\n              nodegroupId,\n              nodeObjs,\n              nodegroupObjs,\n              edges,\n              true,\n              tiles, // RMV different from Python\n              true\n            );\n            for (const impliedNodegroup of [...newImpliedNodegroups]) {\n              newImpliedNodegroups.add(impliedNodegroup);\n            }\n          }\n        }\n        impliedNodegroups = newImpliedNodegroups;\n      }\n    } else if (this.resource) {\n      this.model.stripTiles(this.resource);\n    }\n\n    this.valueList = new ValueList(\n      allValues,\n      allNodegroups,\n      this,\n      this.resource ? this.resource.tiles : null,\n    );\n  }\n\n  async getValueCache(build: boolean = true, getMeta: GetMeta = undefined): Promise<{[tileId: string]: {[nodeId: string]: IStringKeyedObject}} | undefined> {\n    if (build) {\n      this.cache = await this.buildValueCache(getMeta);\n    }\n    return this.cache;\n  }\n\n  async buildValueCache(getMeta: GetMeta): Promise<{[tileId: string]: {[nodeId: string]: IStringKeyedObject}}> {\n    const cacheByTile: {[tileId: string]: {[nodeId: string]: IStringKeyedObject}} = {};\n    for (let pseudos of this.valueList.values.values()) {\n      pseudos = await pseudos;\n      if (pseudos) {\n        await Promise.all(pseudos.map(async (pseudo: IPseudo) => {\n          const value = await pseudo.getValue();\n          // We do not try to cache pseudolists\n          if (pseudo.tile && value && (!Array.isArray(pseudo))) {\n            // @ts-expect-error this can be IViewModel[] while using a pseudolist\n            const cacheJson = await value.__forJsonCache(getMeta); // caching JSON\n            if (cacheJson) {\n              const tileId = pseudo.tile.ensureId();\n              const nodeId = pseudo.node.nodeid;\n              if (!(tileId in cacheByTile)) {\n                cacheByTile[tileId] = {};\n              }\n              if (!(nodeId in cacheByTile[tileId])) {\n                cacheByTile[tileId][nodeId] = {};\n              }\n              cacheByTile[tileId][nodeId] = cacheJson;\n            }\n          }\n        }));\n      }\n    }\n    return cacheByTile;\n  }\n\n  async valuesFromResourceNodegroup(\n    existingValues: Map<string, any>,\n    nodegroupTiles: (StaticTile | null)[],\n    nodegroupId: string,\n    nodeObjs: Map<string, StaticNode>,\n    edges: Map<string, string[]>,\n  ): Promise<[Map<string, any>, Set<string>]> {\n    const allValues = new Map<string, any>();\n\n    const impliedNodegroups = new Set<string>();\n    const impliedNodes: Map<string, [StaticNode, StaticTile]> = new Map();\n\n    const nodesUnseen = new Set(\n      [...nodeObjs.values()]\n        .filter((node) => node.nodegroup_id == nodegroupId)\n        .map((node) => node.alias),\n    );\n    const tileNodesSeen: Set<[string, string]> = new Set();\n    const _addPseudo = async (node: StaticNode, tile: StaticTile | null) => {\n      const key = node.alias || \"\";\n      nodesUnseen.delete(node.alias);\n      const tileid = tile && tile.tileid;\n      if (tileid) {\n        tileNodesSeen.add([node.nodeid, tileid]);\n      }\n      let existing = existingValues.get(key);\n      if (existing instanceof Promise) {\n        existing = await existing;\n      }\n      if (existing !== false && existing !== undefined) {\n        // This might be correct - confirm.\n        // console.warn(`Tried to load node twice: ${key} (${node.nodeid}<${node.nodegroup_id})`, nodegroupId);\n        allValues.set(key, existing);\n      }\n      if (!allValues.has(key)) {\n        allValues.set(key, []);\n      }\n      const pseudoNode = makePseudoCls(this.model, key, false, tile, this.wkri);\n      // We shouldn't have to take care of this case, as it should already\n      // be included below.\n      // if tile.parenttile_id:\n      for (const [domain, ranges] of edges) {\n        if (ranges.includes(node.nodeid)) {\n          const domainNode = nodeObjs.get(domain);\n          if (!domainNode) {\n            throw Error(\"Edge error in graph\");\n          }\n          const toAdd = domainNode.nodegroup_id\n            ? domainNode.nodegroup_id\n            : '';\n          if (toAdd && toAdd !== nodegroupId) {\n            impliedNodegroups.add(toAdd);\n          }\n          if (domainNode.nodegroup_id && tile && domainNode.nodegroup_id === tile.nodegroup_id && domainNode.nodegroup_id !== domainNode.nodeid && tileid && !impliedNodes.has(domainNode.nodeid + tileid)) {\n            impliedNodes.set(domainNode.nodeid + tileid, [domainNode, tile]);\n          }\n          break;\n        }\n      }\n      if (Array.isArray(pseudoNode)) {\n        const value = allValues.get(key);\n        if (value !== undefined && value !== false) {\n          for (const pseudoList of allValues.get(key)) {\n            if (!(pseudoList instanceof PseudoList) || !(pseudoNode instanceof PseudoList)) {\n              throw Error(`Should be all lists not ${typeof pseudoList} and ${typeof pseudoNode}`);\n            }\n\n            if (pseudoList.parentNode == pseudoNode.parentNode) {\n              for (const ps of pseudoNode) {\n                pseudoList.push(ps);\n              }\n              return;\n            }\n          }\n        }\n      }\n      allValues.get(key).push(pseudoNode);\n    };\n\n    for (const tile of nodegroupTiles) {\n      const parentNode = nodeObjs.get(nodegroupId);\n      if (parentNode === undefined) {\n        continue;\n      }\n      if (!parentNode.nodegroup_id || parentNode.nodegroup_id == nodegroupId) {\n        await _addPseudo(parentNode, tile);\n      }\n\n      if (tile) {\n        const tileNodes = new Map();\n        for (const [key, value] of [...tile.data.entries()]) {\n          tileNodes.set(key, value);\n        }\n\n        // Semantic nodes in this tile should always have a pseudo-node\n        [...nodeObjs.values()].filter((node: StaticNode) => {\n          return node.nodegroup_id === nodegroupId && !tileNodes.get(node.nodeid) && node.datatype === 'semantic';\n        }).forEach((node: StaticNode) => tileNodes.set(node.nodeid, {}));\n\n        if (!tileNodes.has(tile.nodegroup_id)) {\n          tileNodes.set(tile.nodegroup_id, {});\n        }\n        for (const [nodeid, nodeValue] of [...tileNodes.entries()]) {\n          if (nodeid == nodegroupId) {\n            // RMV is this correct?\n            continue;\n          }\n          const node = nodeObjs.get(nodeid);\n          if (!node) {\n            throw Error(`Unknown node in nodegroup: ${nodeid} in ${nodegroupId}`);\n          }\n          if (nodeValue !== null) {\n            await _addPseudo(node, tile);\n          }\n        }\n      }\n    }\n    while (impliedNodes.size > 0) {\n      const value = impliedNodes.entries().next().value;\n      if (value) {\n        const [node, tile] = value[1];\n        // If nodeid!=nodegroup_id, then it has its own tile.\n        if (tile.tileid && !tileNodesSeen.has([node.nodeid, tile.tileid])) {\n          await _addPseudo(node, tile);\n        }\n        impliedNodes.delete(value[0]);\n      }\n    }\n    // Remove any \"unloaded\" sentinel values so we do not try and\n    // reload this nodegroup.\n    [...nodesUnseen.keys()].forEach((nodeUnseen) => {\n      // if (allValues.get(nodeUnseen) === false) { // TODO: work out why this is not necessary\n      if (nodeUnseen) {\n        allValues.set(nodeUnseen, undefined);\n      }\n      // }\n    });\n    return [allValues, impliedNodegroups];\n  }\n}\n\ntype GraphMutation = (baseGraph: StaticGraph) => StaticGraph;\n\nclass GraphMutator {\n  baseGraph: StaticGraph;\n  mutations: GraphMutation[];\n\n  autocreateCard: boolean;\n\n  constructor(baseGraph: StaticGraph, options: {\n    autocreateCard?: boolean\n  } = {}) {\n    this.baseGraph = baseGraph;\n    this.mutations = [];\n    this.autocreateCard = options.autocreateCard === undefined || options.autocreateCard;\n  }\n\n  _generateUuidv5(key: string) {\n    return generateUuidv5(['graph', this.baseGraph.graphid], key);\n  }\n\n  _generateEdge(fromNode: string, toNode: string, ontologyProperty: string, name?: string, description?: string) {\n    const edgeId = this._generateUuidv5(`node-${fromNode}-${toNode}`);\n    return new StaticEdge({\n      description: description || null,\n      domainnode_id: fromNode,\n      edgeid: edgeId,\n      graph_id: this.baseGraph.graphid,\n      name: name || null,\n      rangenode_id: toNode,\n      ontologyproperty: ontologyProperty,\n    });\n  }\n\n  addSemanticNode(parentAlias: string | null, alias: string, name: string, cardinality: 'n' | '1', ontologyClass: string, parentProperty: string, description?: string, options: {\n    exportable?: boolean,\n    fieldname?: string,\n    hascustomalias?: boolean;\n    is_collector?: boolean;\n    isrequired?: boolean;\n    issearchable?: boolean;\n    istopnode?: boolean;\n    sortorder?: number;\n  } = {}, config?: {[key: string]: any}) {\n    return this._addGenericNode(\n      parentAlias,\n      alias,\n      name,\n      cardinality,\n      \"semantic\",\n      ontologyClass,\n      parentProperty,\n      description,\n      options,\n      config\n    );\n  }\n\n  addConceptNode(parentAlias: string | null, alias: string, name: string, collection: StaticCollection, cardinality: 'n' | '1', ontologyClass: string, parentProperty: string, description?: string, options: {\n    is_list?: boolean,\n    exportable?: boolean,\n    fieldname?: string,\n    hascustomalias?: boolean;\n    is_collector?: boolean;\n    isrequired?: boolean;\n    issearchable?: boolean;\n    istopnode?: boolean;\n    sortorder?: number;\n  } = {}, config?: {[key: string]: any}) {\n    config = config || {};\n    if (collection?.id) {\n      config['rdmCollection'] = collection.id\n    }\n    return this._addGenericNode(\n      parentAlias,\n      alias,\n      name,\n      cardinality,\n      options.is_list ? \"concept-list\" : \"concept\",\n      ontologyClass,\n      parentProperty,\n      description,\n      options,\n      config\n    );\n  }\n\n  addCard(nodegroup: string | StaticNodegroup, name: string | StaticTranslatableString, component?: CardComponent, options: {\n    active?: boolean,\n    constraints?: Array<StaticConstraint>,\n    cssclass?: string | null,\n    helpenabled?: boolean,\n    helptext?: string | null | StaticTranslatableString,\n    helptitle?: string | null | StaticTranslatableString,\n    instructions?: string | null | StaticTranslatableString,\n    is_editable?: boolean,\n    description?: string | null,\n    sortorder?: number | null,\n    visible?: boolean\n  } = {}, config?: {[key: string]: any}) {\n    const nodegroupId = typeof nodegroup === 'string' ? nodegroup : nodegroup.nodegroupid;\n    const cardName = name instanceof StaticTranslatableString ? name : new StaticTranslatableString(name);\n    const cardComponent = component || DEFAULT_CARD_COMPONENT;\n    const helptext = options?.helptext && (\n      options.helptext instanceof StaticTranslatableString ?\n        options.helptext : new StaticTranslatableString(options.helptext)\n    );\n    const helptitle = (options?.helptitle && (\n      options.helptitle instanceof StaticTranslatableString ?\n        options.helptitle : new StaticTranslatableString(options.helptitle)\n    ));\n    const instructions = (options?.instructions && (\n      options.instructions instanceof StaticTranslatableString ?\n        options.instructions : new StaticTranslatableString(options.instructions)\n    ));\n    this.mutations.push((graph: StaticGraph) => {\n      graph.cards = graph.cards || [];\n      if (graph.cards.filter(card => card.nodegroup_id === nodegroup).length > 0) {\n        throw Error(`This nodegroup, ${nodegroupId}, already has a card`);\n      }\n      const cardId = this._generateUuidv5(`card-ng-${nodegroupId}`);\n      const card = new StaticCard({\n        active: options.active === undefined ? true : options.active,\n        cardid: cardId,\n        component_id: cardComponent.id,\n        config: config || null,\n        constraints: options.constraints || [],\n        cssclass: options.cssclass || null,\n        description: options.description || null,\n        graph_id: graph.graphid,\n        helpenabled: !!(options.helpenabled || (options.helpenabled === undefined && (helptext || helptitle))),\n        helptext: helptext || new StaticTranslatableString(''),\n        helptitle: helptitle || new StaticTranslatableString(''),\n        instructions: instructions || new StaticTranslatableString(''),\n        is_editable: options.is_editable === undefined ? true : options.is_editable,\n        name: cardName,\n        nodegroup_id: nodegroupId,\n        sortorder: options.sortorder || null,\n        visible: options.visible === undefined ? true : options.visible\n      });\n      graph.cards.push(card);\n      return graph;\n    });\n  }\n\n  addStringNode(parentAlias: string | null, alias: string, name: string, cardinality: 'n' | '1', ontologyClass: string, parentProperty: string, description?: string, options: {\n    exportable?: boolean,\n    fieldname?: string,\n    hascustomalias?: boolean;\n    is_collector?: boolean;\n    isrequired?: boolean;\n    issearchable?: boolean;\n    istopnode?: boolean;\n    sortorder?: number;\n  } = {}, config?: {[key: string]: any}) {\n    return this._addGenericNode(\n      parentAlias,\n      alias,\n      name,\n      cardinality,\n      \"string\",\n      ontologyClass,\n      parentProperty,\n      description,\n      options,\n      config\n    );\n  }\n\n  _addNodegroup(parentAlias: string | null, nodegroupId: string, cardinality: 'n' | '1', name?: StaticTranslatableString) {\n    this.mutations.push((graph: StaticGraph) => {\n      const prnt = parentAlias === null ? graph.root : graph.nodes.find(node => node.alias === parentAlias);\n      if (!prnt) {\n        throw Error(`Missing parent for nodegroup: ${parentAlias}`);\n      }\n      const nodegroup = new StaticNodegroup({\n        cardinality: cardinality,\n        legacygroupid: null,\n        nodegroupid: nodegroupId,\n        parentnodegroup_id: prnt.nodegroup_id\n      });\n      graph.nodegroups.push(nodegroup);\n      return graph;\n    });\n    if (this.autocreateCard) {\n      this.addCard(nodegroupId, name || '(unnamed)');\n    }\n    return this;\n  }\n\n  _addGenericNode(parentAlias: string | null, alias: string, name: string, cardinality: 'n' | '1', datatype: string, ontologyClass: string, parentProperty: string, description?: string, options: {\n    exportable?: boolean,\n    fieldname?: string,\n    hascustomalias?: boolean;\n    is_collector?: boolean;\n    isrequired?: boolean;\n    issearchable?: boolean;\n    istopnode?: boolean;\n    sortorder?: number;\n  } = {}, config?: {[key: string]: any}) {\n    const nodeId = this._generateUuidv5(`node-${alias}`);\n    const node = {\n      alias: alias,\n      config: config || {},\n      datatype: datatype,\n      description: description || null,\n      exportable: options.exportable || false,\n      fieldname: options.fieldname || null,\n      graph_id: this.baseGraph.graphid,\n      hascustomalias: options.hascustomalias || false,\n      is_collector: options.is_collector || false,\n      isrequired: options.isrequired || false,\n      issearchable: options.issearchable || true, // This is the default in Arches I believe\n      istopnode: options.istopnode || false,\n      name: name,\n      nodegroup_id: '',\n      nodeid: nodeId,\n      parentproperty: parentProperty,\n      sortorder: options.sortorder || 0,\n      ontologyclass: ontologyClass,\n      sourcebranchpublication_id: null,\n    };\n    if (cardinality === 'n' || parentAlias === null) {\n      node.nodegroup_id = nodeId;\n      this._addNodegroup(parentAlias, node.nodegroup_id, cardinality, new StaticTranslatableString(name));\n    }\n    this.mutations.push((graph: StaticGraph) => {\n      const prnt = parentAlias === null ? graph.root : graph.nodes.find(node => node.alias === parentAlias);\n      if (!prnt) {\n        throw Error(`Parent node does not exist: ${parentAlias}`);\n      }\n      // FIXME: we assume we are not adding a root node, but nowhere do we say this.\n      node.nodegroup_id = node.nodegroup_id !== '' ? node.nodegroup_id : prnt.nodegroup_id || '';\n      const newNode = new StaticNode(node);\n      graph.nodes.push(newNode);\n      const edge = this._generateEdge(prnt.nodeid, nodeId, parentProperty);\n      graph.edges.push(edge);\n      return graph;\n    });\n\n    if (this.autocreateCard && datatype !== 'semantic') {\n      const widget = getDefaultWidgetForNode(node);\n      const config = widget.getDefaultConfig();\n      config.label = name;\n      this.addWidgetToCard(\n        nodeId,\n        widget,\n        name,\n        config,\n        {\n          sortorder: node.sortorder,\n          silentSkip: true // if, for some reason, the card is not present (i.e. was removed), we should not worry\n        }\n      );\n    }\n    return this;\n  }\n\n  addWidgetToCard(\n    nodeId: string,\n    widget: Widget,\n    name: string,\n    config: {[key: string]: any},\n    options: {\n      sortorder?: number | null,\n      silentSkip?: boolean,\n      visible?: boolean\n    } = {}\n  ): GraphMutator {\n    this.mutations.push((graph: StaticGraph) => {\n      const node = graph.nodes.find(node => node.nodeid === nodeId);\n      if (!node) {\n        throw Error(`Tried to add card to graph ${graph.graphid} for node ${nodeId} but it was not found.`);\n      }\n      const card = graph.cards?.find(card => card.nodegroup_id === node.nodegroup_id);\n\n      if (card) {\n        const cardXNodeXWidgetId = this._generateUuidv5(`cxnxw-${nodeId}-${widget.id}`);\n\n        const cardXNodeXWidget = new StaticCardsXNodesXWidgets({\n          card_id: card.cardid,\n          config: config,\n          id: cardXNodeXWidgetId,\n          label: new StaticTranslatableString(name),\n          node_id: nodeId,\n          sortorder: options.sortorder || 0,\n          visible: options.visible === undefined || options.visible,\n          widget_id: widget.id\n        });\n        graph.cards_x_nodes_x_widgets = graph.cards_x_nodes_x_widgets || [];\n        graph.cards_x_nodes_x_widgets.push(cardXNodeXWidget);\n      } else if (!options.silentSkip) {\n        throw Error(`Failed adding widget for ${nodeId} to card for ${node.nodegroup_id} on graph ${graph.graphid}, as no card for this nodegroup (yet?)`);\n      }\n      return graph;\n    });\n    return this;\n  }\n\n  apply() {\n    if (!this.baseGraph.copy) {\n      throw Error(\"Attempt to build a mutator without a proper StaticGraph base graph\");\n    }\n    // TODO: complete deepcopies\n    const graph = this.baseGraph.copy();\n    return this.mutations.reduce((graph, mutation) => mutation(graph), graph);\n  }\n}\n\nclass ResourceModelWrapper<RIVM extends IRIVM<RIVM>> {\n  wkrm: WKRM;\n  graph: StaticGraph;\n  viewModelClass?: ResourceInstanceViewModelConstructor<RIVM>;\n  permittedNodegroups?: Map<string | null, boolean | CheckPermission>;\n\n  constructor(wkrm: WKRM, graph: StaticGraph, viewModelClass?: ResourceInstanceViewModelConstructor<RIVM>) {\n    this.wkrm = wkrm;\n    this.graph = graph;\n    this.viewModelClass = viewModelClass;\n  }\n\n  // TODO: Switch to getBranches\n  getBranchPublicationIds(accessible?: boolean): string[] {\n    const accessibleOnly = accessible || false;\n    const nodes = [...this.graph.nodes.values()];\n    return [...nodes.reduce(\n      (acc: Set<string>, node: StaticNode): Set<string> => {\n        if (node.sourcebranchpublication_id) {\n          if (accessibleOnly) {\n            if (this.isNodegroupPermitted(node.nodegroup_id || '', null)) {\n              acc.add(node.sourcebranchpublication_id);\n            }\n          } else {\n            acc.add(node.sourcebranchpublication_id);\n          }\n        }\n        return acc;\n      }, new Set()\n    )];\n  }\n\n  getCollections(accessible?: boolean): string[] {\n    const accessibleOnly = accessible || false;\n    const nodes = [...this.graph.nodes.values()];\n    return [...nodes.reduce(\n      (acc: Set<string>, node: StaticNode): Set<string> => {\n        if (['concept', 'concept-list'].includes(node.datatype) && node.config?.rdmCollection) {\n          if (accessibleOnly) {\n            if (this.isNodegroupPermitted(node.nodegroup_id || '', null)) {\n              acc.add(node.config.rdmCollection);\n            }\n          } else {\n            acc.add(node.config.rdmCollection);\n          }\n        }\n        return acc;\n      }, new Set()\n    )];\n  }\n\n  pruneGraph(keepFunctions?: string[]): undefined {\n    const allNodegroups = this.getNodegroupObjects();\n    const root = this.graph.root.nodeid;\n    // Strictly, this ultimately also contains nodes, but not all allowed nodes - the key point is that\n    // it has only and all nodegroups that we will keep.\n    const allowedNodegroups = new Map([...allNodegroups.values()].filter((nodegroup: StaticNodegroup) => {\n      return this.isNodegroupPermitted(nodegroup.nodegroupid || '', null);\n    }).map((nodegroup: StaticNodegroup) => [nodegroup.nodegroupid, nodegroup.nodegroupid === null || nodegroup.nodegroupid === '' || nodegroup.nodegroupid === root]));\n    const backedges: Map<string, string> = new Map();\n    for (const [d, rs] of this.getEdges()) {\n      for (const r of rs) {\n        if (backedges.has(r)) {\n          throw Error(`Graph is malformed, node ${r} has multiple parents, ${backedges.get(r)} and ${d} at least`);\n        }\n        backedges.set(r, d);\n      }\n    }\n\n    let loops = 0;\n    // This is not a fast approach, but it's simple enough. Optimize if needed.\n    allowedNodegroups.set(root, true);\n    while (loops < MAX_GRAPH_DEPTH) {\n      const unrooted = [...allowedNodegroups.entries()].filter(([_, rooted]: [string, boolean]) => !rooted);\n      if (unrooted.length === 0) {\n        break;\n      }\n      for (const [ng] of unrooted) {\n        if (ng === root) {\n          continue;\n        }\n        const next = backedges.get(ng);\n        if (!next) {\n          throw Error(`Graph does not have a parent for ${ng}`);\n        }\n        allowedNodegroups.set(ng, true);\n        if (!allowedNodegroups.has(next)) {\n          allowedNodegroups.set(next, false);\n        }\n      }\n      loops += 1;\n    }\n\n    if (loops >= MAX_GRAPH_DEPTH) {\n      throw Error(\"Hit edge traversal limit when pruning, is the graph well-formed without cycles?\")\n    }\n\n    const allowedNodes = new Set([...this.getNodeObjects().values()].filter((node: StaticNode) => {\n      return (node.nodegroup_id && allowedNodegroups.get(node.nodegroup_id)) || node.nodeid === root;\n    }).map((node: StaticNode) => node.nodeid));\n\n    this.graph.cards = (this.graph.cards || []).filter((card: StaticCard) => allowedNodegroups.get(card.nodegroup_id));\n    this.graph.cards_x_nodes_x_widgets = (this.graph.cards_x_nodes_x_widgets || []).filter((card: StaticCardsXNodesXWidgets) => allowedNodes.has(card.node_id));\n    this.graph.edges = (this.graph.edges || []).filter((edge: StaticEdge) => (edge.domainnode_id === root || allowedNodes.has(edge.domainnode_id)) && allowedNodes.has(edge.rangenode_id));\n    this.graph.nodegroups = (this.graph.nodegroups || []).filter((ng: StaticNodegroup) => allowedNodegroups.has(ng.nodegroupid));\n    this.graph.nodes = (this.graph.nodes || []).filter((node: StaticNode) => allowedNodes.has(node.nodeid));\n\n    // At this point, every originally-allowed nodegroup has an allowed parent, up to the root.\n    if (Array.isArray(keepFunctions) && this.graph.functions_x_graphs) {\n      this.graph.functions_x_graphs = this.graph.functions_x_graphs.filter((fxg: StaticFunctionsXGraphs) => keepFunctions.includes(fxg.function_id));\n    } else {\n      this.graph.functions_x_graphs = [];\n    }\n  }\n\n  exportGraph(): StaticGraph {\n    const graph = this.graph;\n    return new StaticGraph({\n      author: graph.author,\n      cards: graph.cards,\n      cards_x_nodes_x_widgets: graph.cards_x_nodes_x_widgets,\n      color: graph.color,\n      config: graph.config,\n      deploymentdate: graph.deploymentdate,\n      deploymentfile: graph.deploymentfile,\n      description: graph.description,\n      edges: graph.edges,\n      functions_x_graphs: graph.functions_x_graphs,\n      graphid: graph.graphid,\n      iconclass: graph.iconclass,\n      is_editable: graph.is_editable,\n      isresource: graph.isresource,\n      jsonldcontext: graph.jsonldcontext,\n      name: graph.name,\n      nodegroups: graph.nodegroups,\n      nodes: graph.nodes,\n      ontology_id: graph.ontology_id,\n      publication: graph.publication,\n      relatable_resource_model_ids: graph.relatable_resource_model_ids,\n      resource_2_resource_constraints: graph.resource_2_resource_constraints,\n      root: graph.root,\n      slug: graph.slug,\n      subtitle: graph.subtitle,\n      template_id: graph.template_id,\n      version: graph.version,\n    });\n  }\n\n  async all(params: { limit?: number; lazy?: boolean } | undefined = undefined): Promise<Array<RIVM>> {\n    const paramObj = params || { limit: undefined, lazy: undefined };\n    const promises = [];\n    for await (const resource of this.iterAll(paramObj)) {\n      promises.push(resource);\n    }\n    return Promise.all(promises);\n  }\n\n  stripTiles(resource: StaticResource) {\n    if (resource.tiles) {\n      const nodes = this.getNodeObjects();\n      resource.tiles = resource.tiles.filter(tile => {\n        const node = nodes.get(tile.nodegroup_id);\n        if (!node) {\n          throw Error(`Tile ${tile.tileid} has nodegroup ${tile.nodegroup_id} that is not on the model ${this.graph.graphid}`);\n        }\n        return this.isNodegroupPermitted(tile.nodegroup_id || '', tile);\n      });\n    }\n  }\n\n  async* resourceGenerator(staticResources: AsyncIterable<StaticResource, RIVM, unknown>, lazy: boolean=false, pruneTiles: boolean = true) {\n    for await (const staticResource of staticResources) {\n      yield this.fromStaticResource(staticResource, lazy, pruneTiles);\n    }\n  }\n\n  async* iterAll(params: { limit?: number; lazy?: boolean }): AsyncGenerator<RIVM> {\n    yield* this.resourceGenerator(staticStore.loadAll(this.wkrm.graphId, params.limit), params.lazy);\n  }\n\n  async findStatic(id: string): Promise<StaticResource> {\n    return await staticStore.loadOne(id);\n  }\n\n  async find(id: string, lazy: boolean = true, pruneTiles: boolean = true): Promise<RIVM> {\n    const rivm = await this.findStatic(id);\n    return this.fromStaticResource(rivm, lazy, pruneTiles);\n  }\n\n  setPermittedNodegroups(permissions: Map<string | null, boolean | CheckPermission>) {\n    const nodegroups = this.getNodegroupObjects();\n    const nodes = this.getNodeObjectsByAlias();\n    this.permittedNodegroups = new Map([...permissions].map(([key, value]): [key: string | null, value: boolean | CheckPermission] => {\n      const k = key || '';\n      if (nodegroups.has(k) || k === '') {\n        return [key, value];\n      } else {\n        const node = nodes.get(k);\n        if (node) {\n          // The nodeid is the nodegroup ID of the children, but may not be the nodegroup ID of\n          // the semantic node itself.\n          return [node.nodeid, value];\n        } else {\n          throw Error(`Could not find ${key} in nodegroups for permissions`);\n        }\n      }\n    }));\n  }\n\n  // Defaults to visible, which helps reduce the risk of false sense of security\n  // from front-end filtering masking the presence of data transferred to it.\n  getPermittedNodegroups(): Map<string | null, boolean | CheckPermission> {\n    if (!this.permittedNodegroups) {\n      const permissions = new Map([...this.getNodegroupObjects()].map(\n        ([k, _]: [k: string, _: StaticNodegroup]) => [k, true]\n      ));\n      permissions.set(\"\", true); // Have to have access to root node.\n      this.setPermittedNodegroups(permissions);\n    }\n    const permittedNodegroups = this.permittedNodegroups;\n    if (permittedNodegroups === undefined) {\n      throw Error(\"Could not set permitted nodegroups\");\n    }\n    // TODO allow reducing\n    return permittedNodegroups;\n  }\n\n  isNodegroupPermitted(nodegroupId: string, tile: StaticTile | null): boolean {\n    let permitted: boolean | CheckPermission | undefined = this.getPermittedNodegroups().get(nodegroupId);\n    if (permitted && typeof permitted == 'function') {\n      const nodes = this.getNodeObjectsByAlias();\n      permitted = permitted(nodegroupId, tile, nodes);\n    }\n    if (!permitted) {\n      return false;\n    }\n    if (permitted === true) {\n      return true;\n    }\n    throw Error(`Ambiguous permission state: ${permitted} for nodegroup ${nodegroupId}`);\n  }\n\n  makeInstance(id: string, resource: StaticResource | null, pruneTiles: boolean = true): RIVM {\n    if (!this.viewModelClass) {\n      throw Error(`Cannot instantiate without a viewModelClass in ${this.wkrm.modelClassName}`);\n    }\n    // TODO: This line needs fixed.\n    const instance: RIVM = new this.viewModelClass(\n      id,\n      this.viewModelClass.prototype.__,\n      (rivm: RIVM) =>\n        new ResourceInstanceWrapper(rivm, this, resource, pruneTiles),\n      null\n    );\n    return instance;\n  }\n\n  edges: Map<string, string[]> | undefined;\n  nodes: Map<string, StaticNode> | undefined;\n  nodegroups: Map<string, StaticNodegroup> | undefined;\n  nodesByAlias: Map<string, StaticNode> | undefined;\n\n  getChildNodes(nodeId: string): Map<string, StaticNode> {\n    const childNodes = new Map<string, StaticNode>();\n    const edges = this.getEdges().get(nodeId);\n    if (edges) {\n      for (const [, n] of this.getNodeObjects()) {\n        if (edges.includes(n.nodeid)) {\n          if (n.alias) {\n            childNodes.set(n.alias, n);\n          }\n        }\n      }\n    }\n    return childNodes;\n  }\n\n  buildNodes() {\n    if (this.nodes || this.nodegroups) {\n      throw Error(\"Cache should never try and rebuild nodes when non-empty\");\n    }\n\n    this.edges = new Map<string, string[]>();\n    this.nodes = new Map<string, StaticNode>();\n    this.nodegroups = new Map<string, StaticNodegroup>();\n\n    const graph = this.graph ?? graphManager.getGraph(this.wkrm.graphId);\n    if (!graph) {\n      throw Error(`Could not find graph ${this.wkrm.graphId} for resource`);\n    }\n    const nodes = new Map(graph.nodes.map((node) => [node.nodeid, node]));\n    const nodegroups = new Map(\n      graph.nodes\n        .filter((node) => node.nodegroup_id)\n        .map((node) => [\n          node.nodegroup_id || \"\",\n          new StaticNodegroup({\n            cardinality: \"n\",\n            legacygroupid: null,\n            nodegroupid: node.nodegroup_id || \"\",\n            parentnodegroup_id: null,\n          }),\n        ]),\n    );\n    for (const nodegroup of graph.nodegroups) {\n      nodegroups.set(nodegroup.nodegroupid, nodegroup);\n    }\n\n    const edgePairs = graph.edges.map((edge) => [\n      edge.domainnode_id,\n      edge.rangenode_id,\n    ]);\n    const edges: Map<string, string[]> = edgePairs.reduce((edges, dr) => {\n      const range = edges.get(dr[0]) || [];\n      range.push(dr[1]);\n      edges.set(dr[0], range);\n      return edges;\n    }, new Map<string, string[]>());\n\n    this.nodes = nodes;\n    this.nodegroups = nodegroups;\n    this.edges = edges;\n    this.nodesByAlias = new Map(\n      [...nodes.values()].map((node) => [node.alias || \"\", node]),\n    );\n  }\n\n  getNodeObjectsByAlias(): Map<string, StaticNode> {\n    if (!this.nodesByAlias) {\n      this.buildNodes();\n    }\n    if (!this.nodesByAlias) {\n      throw Error(\"Could not build nodes\");\n    }\n    return this.nodesByAlias;\n  }\n\n  getEdges(): Map<string, string[]> {\n    if (!this.edges) {\n      this.buildNodes();\n    }\n    if (!this.edges) {\n      throw Error(\"Could not build edges\");\n    }\n    return this.edges;\n  }\n\n  getNodeObjects(): Map<string, StaticNode> {\n    if (!this.nodes) {\n      this.buildNodes();\n    }\n    if (!this.nodes) {\n      throw Error(\"Could not build nodes\");\n    }\n    return this.nodes;\n  }\n\n  getNodegroupObjects(): Map<string, StaticNodegroup> {\n    if (!this.nodegroups) {\n      this.buildNodes();\n    }\n    if (!this.nodegroups) {\n      throw Error(\"Could not build nodegroups\");\n    }\n    return this.nodegroups;\n  }\n\n  getRootNode(): StaticNode {\n    const nodes = this.getNodeObjects();\n    const rootNode = [...nodes.values()].find((n) => !n.nodegroup_id);\n    if (!rootNode) {\n      throw Error(\n        `COULD NOT FIND ROOT NODE FOR ${this.wkrm.modelClassName}. Does the graph ${this.graph.graphid} still exist?`,\n      );\n    }\n    rootNode.alias = rootNode.alias || '';\n    return rootNode;\n  }\n\n  fromStaticResource(\n    resource: StaticResource,\n    lazy: boolean = false,\n    pruneTiles: boolean = true\n  ): Promise<RIVM> {\n    // TODO: implement lazy\n    const wkri: RIVM = this.makeInstance(\n      resource.resourceinstance.resourceinstanceid,\n      resource,\n      pruneTiles\n    );\n\n    if (!wkri.$) {\n      throw Error(\"Could not load resource from static definition\");\n    }\n\n    return wkri.$.populate(lazy).then(() => wkri);\n  }\n\n  asTree(): {[key: string]: any} {\n    const root = this.getRootNode();\n    const nodegroups = this.getNodegroupObjects();\n    const addChildren = (node: StaticNode) => {\n      const branch: {[key: string]: any} = {};\n      const children = this.getChildNodes(node.nodeid);\n      if (!children.size) {\n        return false;\n      }\n      for (const child of children.values()) {\n        const nodegroup = nodegroups.get(child.nodegroup_id || '');\n        const multiple = (\n          child.nodegroup_id &&\n          child.is_collector &&\n          nodegroup &&\n          nodegroup.cardinality == 'n' &&\n          node.nodegroup_id !== child.nodegroup_id\n        ) || child.datatype.endsWith('-list');\n        const childBranch = addChildren(child);\n        const alias = child.alias || '';\n        if (childBranch === false) {\n          branch[alias] = child.datatype;\n        } else {\n          branch[alias] = childBranch;\n          if (child.datatype !== 'semantic') {\n             branch[alias]['_'] = child.datatype;\n          }\n        }\n        if (multiple) {\n          branch[alias] = [branch[alias]];\n        }\n      }\n      return branch;\n    }\n    return addChildren(root) || {};\n  }\n}\n\nfunction makeResourceModelWrapper<T extends IRIVM<T>>(\n  viewModelClass: ResourceInstanceViewModelConstructor<T> | undefined,\n  wkrm: WKRM,\n  graph: StaticGraph,\n): ResourceInstanceViewModelConstructor<T> {\n  let vmc: ResourceInstanceViewModelConstructor<T>;\n  if (!viewModelClass) {\n    // @ts-expect-error It may be possible to correct this, but TS does not know that\n    // the dynamically-defined class meets the IRIVM interface.\n    const viewModelClassObj: {[name: string]: ResourceInstanceViewModelConstructor<T>} = {\n      [wkrm.modelClassName]: class extends ResourceInstanceViewModel<T> {\n        static _: ResourceInstanceWrapper<T> | null;\n        static __: ResourceModelWrapper<T> | null;\n      },\n    };\n    vmc = viewModelClassObj[wkrm.modelClassName];\n  } else {\n    vmc = viewModelClass;\n  }\n\n  const wrapper = new ResourceModelWrapper<T>(wkrm, graph, vmc);\n  vmc.prototype.__ = wrapper;\n  return vmc;\n}\n\nclass GraphManager {\n  _initialized: boolean = false;\n  archesClient: ArchesClient;\n  graphs: Map<string, ResourceModelWrapper<any>>;\n  wkrms: Map<string, WKRM>;\n\n  constructor(archesClient: ArchesClient) {\n    this.archesClient = archesClient;\n    this.graphs = new Map<string, ResourceModelWrapper<any>>();\n    this.wkrms = new Map<string, WKRM>();\n  }\n\n  async initialize(configurationOptions: ConfigurationOptions | undefined = undefined) {\n    if (this._initialized) {\n      return;\n    }\n    if (configurationOptions === undefined) {\n      configurationOptions = new ConfigurationOptions();\n    }\n    const graphJsons: GraphResult = await this.archesClient.getGraphs();\n\n    let graphs: Array<[string, StaticGraphMeta]> = Object.entries(graphJsons[\"models\"]);\n    const allowedGraphs = configurationOptions.graphs;\n    if (allowedGraphs !== null) {\n      if (allowedGraphs === false) {\n        throw Error(\"No current meaning of allowedGraphs === false\");\n      } else if (allowedGraphs !== true) {\n        graphs = graphs.filter(\n          ([graphId, _]: [string, StaticGraphMeta]) => allowedGraphs.includes(graphId),\n        );\n      }\n    }\n    graphs.forEach(([graphId, meta]: [string, StaticGraphMeta]) => {\n      meta.graphid = meta.graphid || graphId;\n      const wkrm = new WKRM(meta);\n      this.wkrms.set(wkrm.modelClassName, wkrm);\n    });\n    if (configurationOptions.eagerLoadGraphs) {\n      await Promise.all(graphs.map(([g]) => this.loadGraph(g)));\n    }\n\n    this._initialized = true;\n  }\n\n  async loadGraph<RIVM extends IRIVM<RIVM>>(modelClass: ResourceInstanceViewModelConstructor<RIVM> | string): Promise<ResourceModelWrapper<RIVM>> {\n    let modelClassName: string;\n    if (typeof modelClass == 'string') {\n      modelClassName = modelClass;\n    } else {\n      modelClassName = modelClass.name;\n    }\n\n    let wkrm = this.wkrms.get(modelClassName);\n    if (wkrm === undefined) {\n      wkrm = [...this.wkrms.values()].find(wkrm => wkrm.graphId === modelClassName);\n      if (wkrm === undefined) {\n        throw Error(`Only loading graphs for which metadata is present, not ${modelClassName}`);\n      }\n      modelClass = wkrm.modelClassName;\n    }\n\n    const wrapper = this.graphs.get(wkrm.graphId);\n    if (wrapper !== undefined) {\n      return wrapper;\n    }\n\n    const bodyJson = await this.archesClient.getGraph(wkrm.meta);\n    if (!bodyJson) {\n      throw Error(`Could not load graph ${wkrm.graphId}`);\n    }\n\n    const graph = new StaticGraph(bodyJson);\n\n    let model: ResourceInstanceViewModelConstructor<RIVM>;\n    if (typeof modelClass == 'string') {\n      modelClassName = modelClass;\n      model = makeResourceModelWrapper<RIVM>(undefined, wkrm, graph);\n    } else {\n      modelClassName = modelClass.name;\n      model = makeResourceModelWrapper<RIVM>(modelClass, wkrm, graph);\n    }\n\n    this.graphs.set(graph.graphid, model.prototype.__);\n    return model.prototype.__;\n  }\n\n  async get<RIVM extends IRIVM<RIVM>>(modelClass: ResourceInstanceViewModelConstructor<RIVM> | string): Promise<ResourceModelWrapper<RIVM>> {\n    let modelClassName: string;\n    if (typeof modelClass == 'string') {\n      modelClassName = modelClass;\n    } else {\n      modelClassName = modelClass.name;\n    }\n\n    // Initialize as a fallback\n    this.initialize(undefined);\n    let wkrm = this.wkrms.get(modelClassName);\n    if (wkrm === undefined) {\n      wkrm = [...this.wkrms.values()].find(w => w.graphId === modelClassName);\n      if (wkrm === undefined) {\n        throw Error(`Cannot find model requested: ${modelClassName}`);\n      }\n    }\n\n    const wrapper = this.graphs.get(wkrm.graphId);\n    if (wrapper === undefined) {\n      return this.loadGraph(modelClass);\n    }\n    return wrapper;\n  }\n\n  async getResource<T extends IRIVM<T>>(resourceId: string, lazy: boolean = true, pruneTiles: boolean = true): Promise<T> {\n    const rivm = await staticStore.loadOne(resourceId);\n    let graph = this.graphs.get(rivm.resourceinstance.graph_id);\n    if (!graph) {\n      graph = await this.loadGraph(rivm.resourceinstance.graph_id);\n      if (!graph) {\n        throw Error(`Graph not found for resource ${resourceId}`);\n      }\n    }\n    return graph.fromStaticResource(rivm, lazy, pruneTiles);\n  }\n\n  getGraph(graphId: string): StaticGraph {\n    const wrapper = this.graphs.get(graphId);\n    if (wrapper === undefined) {\n      throw Error(`Cannot find graph requested: ${graphId}`);\n    }\n    return wrapper.graph;\n  }\n}\n\nconst graphManager = new GraphManager(archesClient);\nviewContext.graphManager = graphManager;\n\nexport { GraphManager, graphManager, ArchesClientRemote, staticStore, WKRM, ResourceModelWrapper, GraphMutator };\n","import { staticStore } from \"./staticStore.ts\"\nimport { PseudoList } from \"./pseudos.ts\"\nimport { UrlViewModel, DateViewModel, ResourceInstanceViewModel, DomainValueViewModel, ConceptValueViewModel, NonLocalizedStringViewModel, StringViewModel, SemanticViewModel, GeoJSONViewModel, BooleanViewModel, NumberViewModel } from './viewModels';\n\nclass Cleanable extends String {\n  __clean: string | undefined\n}\n\nabstract class BaseRenderer {\n  async render(asset: ResourceInstanceViewModel<any>) {\n    if (!asset.$) {\n      throw Error(\"Cannot render unloaded asset - do you want to await asset.retrieve()?\");\n    }\n    const root = await (await asset.$.getRootViewModel());\n    return this.renderValue(root, 0);\n  }\n\n  abstract renderDomainValue(value: DomainValueViewModel, _depth: number): Promise<any>;\n  abstract renderDate(value: DateViewModel, _depth: number): Promise<any>;\n  abstract renderConceptValue(value: ConceptValueViewModel, _depth: number): Promise<any>;\n  abstract renderResourceReference(value: ResourceInstanceViewModel<any>, _depth: number): Promise<any>;\n  abstract renderSemantic(value: SemanticViewModel, depth: number): Promise<any>;\n  abstract renderBlock(block: {[key: string]: string} | {[key: string]: string}[], depth: number): any;\n  abstract renderArray(value: any[], depth: number): Promise<any>;\n  abstract renderString(value: string | StringViewModel | NonLocalizedStringViewModel, _depth: number): Promise<any>;\n  abstract renderBoolean(value: boolean | BooleanViewModel, _depth: number): Promise<any>;\n  abstract renderNumber(value: number | NumberViewModel, _depth: number): Promise<any>;\n  abstract renderUrl(value: UrlViewModel, _depth: number): Promise<any>;\n\n  async renderValue(value: any, depth: number): Promise<any> {\n    let newValue;\n    if (value instanceof Promise) {\n      value = await value;\n    }\n    if (value instanceof DomainValueViewModel) {\n      newValue = this.renderDomainValue(value, depth);\n    } else if (value instanceof DateViewModel) {\n      newValue = this.renderDate(value, depth);\n    } else if (value instanceof ConceptValueViewModel) {\n      newValue = this.renderConceptValue(value, depth);\n    } else if (value instanceof ResourceInstanceViewModel) {\n      newValue = this.renderResourceReference(value, depth);\n    } else if (value instanceof SemanticViewModel) {\n      newValue = this.renderSemantic(value, depth);\n    } else if (value instanceof Array) {\n      newValue = this.renderArray(value, depth);\n    } else if (value instanceof StringViewModel || value instanceof NonLocalizedStringViewModel || typeof value === 'string') {\n      newValue = this.renderString(value, depth);\n    } else if (value instanceof BooleanViewModel) {\n      newValue = this.renderBoolean(value, depth);\n    } else if (value instanceof NumberViewModel) {\n      newValue = this.renderNumber(value, depth);\n    } else if (value instanceof GeoJSONViewModel) {\n      newValue = this.renderBlock(await value.forJson(), depth);\n    } else if (value instanceof UrlViewModel) {\n      newValue = this.renderUrl(await value, depth);\n    } else if (value instanceof Object) {\n      newValue = this.renderBlock(value, depth);\n    } else {\n      newValue = value;\n    }\n    return newValue;\n  }\n}\n\nclass Renderer extends BaseRenderer {\n  async renderDomainValue(value: DomainValueViewModel, _depth: number): Promise<any> {\n    return value;\n  }\n\n  async renderString(value: string | StringViewModel | NonLocalizedStringViewModel, _depth: number): Promise<any> {\n    return `${value}`;\n  }\n\n  async renderNumber(value: number | NumberViewModel, _depth: number): Promise<any> {\n    return `${value}`;\n  }\n\n  async renderBoolean(value: boolean | BooleanViewModel, _depth: number): Promise<any> {\n    return value.toString();\n  }\n\n  async renderDate(value: DateViewModel, _depth: number): Promise<any> {\n    return value;\n  }\n\n  async renderConceptValue(value: ConceptValueViewModel, _depth: number): Promise<any> {\n    return value;\n  }\n\n  async renderResourceReference(value: ResourceInstanceViewModel<any>, _depth: number): Promise<any> {\n    return value;\n  }\n\n  async renderSemantic(value: SemanticViewModel, depth: number): Promise<any> {\n    return this.renderBlock(await value.toObject(), depth);\n  }\n\n  async renderUrl(value: UrlViewModel, _depth: number): Promise<any> {\n    return value;\n  }\n\n  renderBlock(block: {[key: string]: string} | {[key: string]: string}[], depth: number): any {\n    const renderedBlock: {[key: string]: any} = {};\n    const promises: Promise<void>[] = [];\n    for (const [key, value] of Object.entries(block)) {\n      promises.push(\n        this.renderValue(value, depth + 1).then((val: any) => { renderedBlock[key] = val; })\n      );\n    }\n    return Promise.all(promises).then(() => renderedBlock);\n  }\n\n  async renderArray(value: any, depth: number): Promise<any> {\n      return Promise.all(value.map((val: any) => this.renderValue(val, depth + 1)));\n  }\n\n}\n\nclass MarkdownRenderer extends Renderer {\n  conceptValueToUrl: ((value: ConceptValueViewModel) => string) | undefined\n  dateToText: ((value: DateViewModel) => string) | undefined\n  domainValueToUrl: ((value: DomainValueViewModel) => string) | undefined\n  resourceReferenceToUrl: ((value: ResourceInstanceViewModel<any>) => string) | undefined\n  nodeToUrl: ((value: string) => string) | undefined\n\n  constructor(callbacks: {\n    conceptValueToUrl: ((value: ConceptValueViewModel) => string) | undefined,\n    dateToText: ((value: DateViewModel) => string) | undefined,\n    domainValueToUrl: ((value: DomainValueViewModel) => string) | undefined,\n    resourceReferenceToUrl: ((value: ResourceInstanceViewModel<any>) => string) | undefined,\n    nodeToUrl: ((value: string) => string) | undefined,\n  }) {\n    super();\n    this.conceptValueToUrl = callbacks.conceptValueToUrl;\n    this.dateToText = callbacks.dateToText;\n    this.domainValueToUrl = callbacks.domainValueToUrl;\n    this.resourceReferenceToUrl = callbacks.resourceReferenceToUrl;\n    this.nodeToUrl = callbacks.nodeToUrl;\n  }\n\n  async renderUrl(value: UrlViewModel, _depth: number): Promise<any> {\n    const text = `[${value}](${value})`;\n    const wrapper = new Cleanable(text);\n    wrapper.__clean = value.href();\n    return wrapper;\n  }\n\n  override async renderDomainValue(domainValue: DomainValueViewModel, _: number): Promise<any> {\n    const value = await domainValue.getValue();\n    const url = this.domainValueToUrl ? await this.domainValueToUrl(domainValue): null;\n    const text = url ? `[${value.toString()}](${url.trim()})` : value.toString();\n    const wrapper = new Cleanable(`\n    <span\n      class='alizarin-domain-value' data-id='${value.id}'\n    >\n      ${text}\n    </span>`.replace(/\\n/g, ' ').trim());\n    wrapper.__clean = domainValue.toString();\n    return wrapper;\n  }\n\n  override async renderDate(date: DateViewModel, _: number): Promise<any> {\n    const value = await date;\n    const text = this.dateToText ? await this.dateToText(value): value.toISOString();\n    const wrapper = new Cleanable(`\n    <time datetime='${text}'>\n      ${text}\n    </time>`.replace(/\\n/g, ' ').trim());\n    wrapper.__clean = text;\n    return wrapper;\n  }\n\n  override async renderConceptValue(conceptValue: ConceptValueViewModel, _: number): Promise<any> {\n    const value = await conceptValue.getValue();\n    const url = this.conceptValueToUrl ? await this.conceptValueToUrl(conceptValue): null;\n    const text = url ? `[${value.value}](${url.trim()})` : value.value;\n    const wrapper = new Cleanable(`\n    <span\n      class='alizarin-concept-value' data-id='${value.id}'\n      data-concept-id='${value.__concept ? value.__concept.id : \"\"}'\n      data-concept-ref='$${value.__concept ? value.__concept.source : \"\"}'\n    >\n      ${text}\n    </span>`.replace(/\\n/g, ' ').trim());\n    wrapper.__clean = conceptValue.toString();\n    return wrapper;\n  }\n\n  override async renderResourceReference(rivm: ResourceInstanceViewModel<any>, _: number): Promise<any> {\n    const value = await rivm.forJson(false);\n    const url = this.resourceReferenceToUrl ? await this.resourceReferenceToUrl(rivm): null;\n    let title = value.title || value.type || 'Resource';\n    const text = url ? `[${title}](${url.trim()})` : title;\n    const resourceMetadata = await staticStore.getMeta(value.id);\n    if (resourceMetadata) {\n      title = resourceMetadata.name;\n    }\n    const wrapper = new Cleanable(`\n    <span\n      class='alizarin-resource-instance alizarin-related-resource' data-id='${value.id}'\n      data-graph-id='${value.graphId}'\n    >\n      ${text}\n    </span>`.replace(/\\n/g, ' ').trim());\n    wrapper.__clean = rivm.toString();\n    return wrapper;\n  }\n}\n\nclass FlatMarkdownRenderer extends MarkdownRenderer {\n  override async renderSemantic(vm: SemanticViewModel, depth: number): Promise<any> {\n    const children = [...(await vm.__getChildValues()).entries()].map(([_, v]) => [v.node.alias, v.node]);\n    const nodes = Object.fromEntries(await Promise.all(children));\n    return super.renderSemantic(vm, depth).then(async block => {\n      const text = [\n        `* <span class='node-type'>${vm.__node.name}</span> &rarr;`,\n        ...Object.entries(await block).map(([key, value]) => {\n          const node = nodes[key];\n          let nodeName = node.name;\n          if (this.nodeToUrl) {\n            nodeName = `[${node.name}](${this.nodeToUrl(node)})`;\n          }\n          if ((typeof value == 'string' || value instanceof String) && value.indexOf('\\n') != -1) {\n            return `  * <span class='node-name'>${nodeName}</span> <span class='node-alias'>[*${node.alias}*]</span>:<span class='node-value'>\\n${value.split('\\n').map(x => `    ${x}`).join('\\n')}\\n    </span>`;\n          } else {\n            return `  * <span class='node-name'>${nodeName}</span> <span class='node-alias'>[*${node.alias}*]</span>: <span class='node-value'>${value}</span>`;\n          }\n        }).join('\\n').split('\\n')\n      ];\n      if (text[1] == '') {\n        text[0] += `<span class='node-empty'>&lt;empty&gt;</span>`;\n        text.pop();\n      }\n      return text.map(line => `  ${line}`).join('\\n');\n    });\n  }\n\n  override async renderArray(value: any, depth: number): Promise<any> {\n      const rows = await super.renderArray(value, depth);\n      if (value instanceof PseudoList || value.indexOf('\\n') != -1) {\n        return rows.map((x: any) => `${x}`).join('\\n');\n      } else {\n        return rows.join(\", \");\n      }\n  }\n\n  async renderString(value: string | StringViewModel | NonLocalizedStringViewModel, _depth: number): Promise<any> {\n    if (value.indexOf('\\n') != -1) {\n      value = '\\n    ' + value.split('\\n').join('\\n    ');\n    }\n    return value;\n  }\n}\n\nclass JsonRenderer extends Renderer {\n  async renderDate(value: DateViewModel, _depth: number): Promise<any> {\n    return value.forJson();\n  }\n\n  async renderBoolean(value: boolean | BooleanViewModel, _depth: number): Promise<any> {\n    return typeof value === \"boolean\" ? value : value.forJson();\n  }\n\n  async renderConceptValue(value: ConceptValueViewModel, _depth: number): Promise<any> {\n    return value.forJson();\n  }\n\n  async renderDomainValue(value: DomainValueViewModel, _depth: number): Promise<any> {\n    return value.forJson();\n  }\n\n  async renderResourceReference(value: ResourceInstanceViewModel<any>, _depth: number): Promise<any> {\n    // TODO: decide if this makes sense: await value.retrieve();\n    const val = value.forJson();\n    return val;\n  }\n}\n\nexport { MarkdownRenderer, JsonRenderer, Cleanable, FlatMarkdownRenderer };\n","import * as client from \"./client\";\nimport * as interfaces from \"./interfaces\";\nimport { RDM } from \"./rdm\";\nimport { ResourceModelWrapper, WKRM, graphManager, staticStore, GraphManager, GraphMutator } from \"./graphManager\";\nimport * as staticTypes from \"./static-types\";\nimport * as utils from \"./utils\";\nimport * as viewModels from \"./viewModels\";\nimport * as renderers from \"./renderers\";\nimport * as nodeConfig from \"./nodeConfig\";\n\nconst AlizarinModel = viewModels.ResourceInstanceViewModel;\nconst setCurrentLanguage = utils.setCurrentLanguage;\nconst getCurrentLanguage = utils.getCurrentLanguage;\nexport {\n  AlizarinModel,\n  client,\n  graphManager,\n  GraphManager,\n  staticTypes,\n  utils,\n  viewModels,\n  staticStore,\n  RDM,\n  renderers,\n  interfaces,\n  WKRM,\n  nodeConfig,\n  ResourceModelWrapper,\n  GraphMutator,\n  setCurrentLanguage,\n  getCurrentLanguage,\n};\n"],"names":["DEFAULT_LANGUAGE","uuidv5","getCurrentLanguage","setCurrentLanguage","uuidv4","response","archesClient","resource","node","promise","value","val","ids","collection","str","tile","vm","nodegroupId","newImpliedNodegroups","card","config","graph","edges","wkrm","viewModels.ResourceInstanceViewModel","utils.setCurrentLanguage","utils.getCurrentLanguage"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9]}